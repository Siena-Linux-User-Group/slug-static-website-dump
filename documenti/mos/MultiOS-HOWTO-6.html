<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"><html><head>
 <meta name="GENERATOR" content="LinuxDoc-Tools 0.9.21"><title>Managing Multiple Operating Systems HOWTO: L'installazione:</title>
 
 <link href="MultiOS-HOWTO-7.html" rel="next">
 <link href="MultiOS-HOWTO-5.html" rel="previous">
 <link href="MultiOS-HOWTO.html#toc6" rel="contents"></head>

<body>
<a href="MultiOS-HOWTO-7.html">Avanti</a>
<a href="MultiOS-HOWTO-5.html">Indietro</a>
<a href="MultiOS-HOWTO.html#toc6">Indice</a>
<hr>
<h2><a name="s6">6.</a> <a href="MultiOS-HOWTO.html#toc6">L'installazione:</a></h2>

<p>L'installazione consta di tre parti distinte, delle quali la prima è
l'installazione e configurazione del S/O primario sul suo drive dedicato.
La seconda è la configurazione, su un altro disco, del sistema operativo
alternativo che avete scelto. Infine, bisogna riconfigurare il BIOS e LILO
affinchè supportino entrambi i dischi.</p>

<h2><a name="ss6.1">6.1</a> <a href="MultiOS-HOWTO.html#toc6.1">Installare il sistema operativo primario</a>
</h2>

<p>L'installazione del S/O primario/operativo è abbastanza immediata.
Trattate il sistema come se fosse un sistema a drive singolo dedicato a Linux. Fate
riferimento alla documentazione allegata alla vostra distribuzione oppure a
<a href="http://www.linuxdoc.org/HOWTO/Installation-HOWTO.html">http://www.linuxdoc.org/HOWTO/Installation-HOWTO.html</a>
per i dettagli sull'installazione di Linux.</p>

<p> Dal momento che questa è, in definitiva, un'installazione a più dischi,
ci sono alcuni passi che bisogna fare per indurre le routine di installazione
a credere, durante il processo di installazione, che sia un sistema con un
unico disco.</p>

<p> In primo luogo, togliete il disco removibile e accertatevi che l'altro
disco sia identificato dal BIOS come disco di avvio secondario (dopo il floppy).
Il programma di installazione del sistema operativo dovrebbe vedere un solo
disco, quello che state usando per l'installazione. In questo modo, non ci sono
dubbi riguardo a dove venga installato. Inoltre installerà tutto in maniera
appropriata per un sistema con un unico disco.</p>

<p>Quando vi verrà richiesto, fate usare al programma di installazione l'intero
disco per il vostro sistema operativo. Io ho accettato le opzioni di
partizionamento di default della RedHat e ho installato il LILO generico nel MBR.</p>

<p> Una volta completata l'installazione, spegnete e riavviate il computer
per avere conferma che il vostro sistema funzioni. A questo punto dovreste
avere una macchina pienamente funzionante su cui si avvia direttamente Linux.</p>

<h2><a name="ss6.2">6.2</a> <a href="MultiOS-HOWTO.html#toc6.2">Installare sistemi operativi alternativi</a>
</h2>

<p> Ora che avete un sistema pienamente operativo, potete andare avanti nella
configurazione di un secondo disco col vostro sistema operativo alternativo.</p>

<p>Scegliete uno o due sistemi operativi da installare sul secondo disco.
Per il mio test iniziale ho scelto, per nessuna ragione particolare, Windows 98
e BeOS . Ho diviso un disco da 8 Gb in due partizioni primarie da 4 Gb e ho
installato Windows 98 nella prima partizione e BeOS nella seconda.</p>

<p>Portate avanti questa installazione esattamente come avete fatto per la
prima. Disabilitate il primo disco dal BIOS così che il programma di
installazione non lo veda nemmeno. Questo è molto importante. Se potete
rimuovere fisicamente il primo disco, o disconnetterlo, fatelo! Durante
la seconda installazione questo metterà il vostro sistema primario al riparo
da ogni vostro errore e da sistemi operativi eccessivamente avidi che richiedano
il controllo di tutti i dischi che vedono. Se in futuro deciderete di configurare
un altro disco removibile ricordatevi di ripetere questo passaggio.</p>

<p>Fatto questo, installate i sistemi operativi che avete scelto come se
fosse un sistema con un unico disco.</p>

<p> Se state installando sul secondo disco un solo sistema operativo, è
sufficiente inserire il disco di installazione e lasciarlo fare. Windows 95
o 98 o praticamente qualunque altro sistema operativo, incluso Linux,
dovrebbero portare a buon fine l'installazione così. Consentite a Windows 9x
di scrivere nel MBR. Se state installando Linux, scegliete di installare
LILO nel MBR.</p>

<p> Io ho deciso di installare due sistemi operativi sul secondo disco così da
poter verificare la funzionalità dell'avere più boot loader uno dopo l'altro.</p>

<p>Ho installato prima Windows 98, perché sovrascrive automaticamente il MBR
e avrebbe sovrascritto qualunque boot loader ci avessi installato. Poi ho
installato BeOS nella seconda partizione e ho lanciato bootman, il boot
loader del BeOS. L'ho usato per costruire un menu di avvio per il secondo
disco ed ho intenzionalmente sovrascritto il MBR impostato da Windows 98.</p>

<p>Non era essenziale usare bootman, avrei potuto utilizzare qualunque boot
loader che si installasse nel MBR, ma era disponibile e funziona piuttosto bene.</p>

<p>Riavviate di frequente per accertarvi che tutto funzioni a dovere come
sistema a disco singolo. Personalmente ho riavviato dopo l'installazione di
ciascun S/O per essere sicuro che funzionasse, e anche per verificare il
funzionamento del menu di avvio del boot loader.</p>

<h2><a name="ss6.3">6.3</a> <a href="MultiOS-HOWTO.html#toc6.3">Configurazione finale del BIOS e di LILO:</a>
</h2>

<p>Successivamente riconfigurate il BIOS in maniera che riconosca nuovamente
il primo disco come disco di avvio (ricollegatelo fisicamente se prima
l'avevate disconnesso) e fate in modo che riconosca il secondo disco. Il modo
in cui effettuare queste operazioni dipende molto dal vostro sistema, dal BIOS
e dal fatto che abbiate una configurazione SCSI/IDE o IDE/IDE. Non ho provato
una configurazione SCSI/SCSI perché i dischi SCSI e i supporti per dischi SCSI
removibili sono decisamente più costosi dei corrispondenti IDE. Volevo una
certa performance per il mio sistema operativo primario ma potevo accettare
scelte più a buon mercato per gli altri.</p>

<p>Assicuratevi che per il secondo disco il tipo di disco sia "Auto" o
"Automatico". In questo modo il BIOS sarà forzato a determinare dinamicamente
il tipo di disco al momento dell'avvio. Sono riuscito a utilizzare con
successo come secondo disco un vecchio disco da 512 Mb, uno da 4 Gb, uno
da 8 Gb e persino uno Zip IDE da 100 Mb. Tutti riconosciuti automaticamente
dal BIOS.</p>

<p>Riavviate il sistema e tornate a Linux. A questo punto, nonostante ci siano
almeno due sistemi operativi installati, questo LILO è configurato solo per il
Linux originale e dovrebbe avviarlo automaticamente. Osservate il processo di
avvio e dovreste vedere un messaggio riguardante l'identificazione automatica
di un disco. Una volta avviato, verificate con dmesg che Linux abbia
riconosciuto il secondo disco.</p>

<p>Fatto questo dovete riconfigurare LILO sul primo disco per rendergli nota
la presenza del secondo disco. Qui di seguito ci sono due differenti file
lilo.conf, uno per un sistema SCSI/IDE e l'altro per un IDE/IDE. Ciascuno ha
i suoi punti di forza e le sue debolezze...</p>
<p>
</p><pre># lilo.conf per un disco interno SCSI e un disco removibile
# configurato come master sul connettore IDE primario

disk = /dev/sda         #  Queste quattro linee sono necessarie
   bios = 0x80          #  per far si' che il disco SCSI venga
disk = /dev/hda         #  identificato come drive primario anche
   bios = 0x81          #  se è selezionato nel BIOS come dispositivo
                                        #  di avvio. Questo potrebbe essere un
                                        #  problema specifico del BIOS.

# Senza queste righe il LILO darà gli errori seguenti:
#
#  LILO version 21, Copyright 1992-1998 Werner Almesberger
#
# ading boot sector from /dev/sda
# Warning: /dev/sda is not on the first disk
# E LILO si blocca a LI oppure scrive a oltranza "01 " sullo schermo

boot=/dev/sda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/vmlinuz-2.2.12-20smp
   label=Linux
   root=/dev/sda1
   initrd=/boot/initrd-2.2.12-20smp.img
   read-only
other = /dev/hda
# other = /dev/hda è l'elemento chiave. Invece di reindirizzare LILO ad una
# partizione specifica, lo rimanda al MBR del secondo disco.
# In questo modo, LILO non ha bisogno di sapere nulla del secondo disco e,
# dal momento che punterà sempre allo stesso posto a prescindere dal disco
# installato, possiamo rimpiazzarlo con un altro. LILO è l'unico boot manager
# da me trovato in grado di far questo.
   label = Disk2
   map-drive = 0x80
      to = 0x81
   map-drive = 0x81
      to = 0x80
# Le righe con la dicitura map-drive sono necessarie per far credere
# al secondo disco di essere effettivamente il disco di avvio.



# lilo.conf per un sistema con due dischi IDE.  Entrambi sono configurati come master,
# /dev/hda sul connettore primario e /dev/hdc su quello secondario.
# /dev/hdb è un CDROM configurato come slave sul connettore IDE primario.
# disk = /dev/hda       # Queste linee non sono necessarie
#    bios = 0x80        # per un'installazione IDE/IDE perché il BIOS
# disk = /dev/hdc       # sa già in che ordine sono i dischi
#    bios = 0x81
boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/vmlinuz-2.2.5-15
        label=linux
        root=/dev/hda4
        read-only
other = /dev/hdc
# other = /dev/hdc è nuovamente la chiave. Rimanda LILO al MBR
# del secondo disco. Viene passato il controllo a qualunque cosa sia lì.
   label = Disk2
   map-drive = 0x80
      to = 0x81
   map-drive = 0x81
      to = 0x80
</pre>
<p></p>

<p>Le voci /dev, boot, map e image sono specifiche per ciascun sistema e
probabilmente le vostre saranno diverse dalle mie. Le voci nel vostro
/etc/lilo.conf di partenza dovrebbero fornirvi una guida accurata per il
vostro sistema. Personalmente ho copiato la voce "Linux" dal file
lilo.conf originale, generato dall'installazione, direttamente nel nuovo
lilo.conf. Questo dovrebbe permettervi di avviare il sistema con "Linux"
e modificare lilo.conf anche nel caso in cui la voce "Disk2" non funzioni
per niente.</p>

<p>Infine, eseguite il comando lilo -vvv per accertarvi che non vi siano
errori in quello che state cercando di fare.</p>

<hr>
<a href="MultiOS-HOWTO-7.html">Avanti</a>
<a href="MultiOS-HOWTO-5.html">Indietro</a>
<a href="MultiOS-HOWTO.html#toc6">Indice</a>
</body></html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"    "http://www.w3.org/TR/html4/strict.dtd">
<HTML LANG="it">
<HEAD>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html">
    <META NAME="Generator" CONTENT="Alml">
    <META NAME="Description" CONTENT=" LDR: Linux Domande e Risposte FAQ su GNU/Linux in italiano ">
    <META NAME="Keywords" CONTENT=" LDR, FAQ, linuxfaq, LINUXFAQ, linux faq, linux, Linux, ldr, L.D.R., l.d.r., faq, F.A.Q., f.a.q., Linux Domande e Risposte, Gaetano Paolone, Paolone ">
    <META NAME="Author" CONTENT="Gaetano Paolone &lt;bigpaul@linuxfaq.it&gt;">
    <META NAME="Date" CONTENT="(2001.08.10)">
    <META NAME="Resource-type" LANG="en" CONTENT="Document" >
    <META NAME="Revisit-after" LANG="en" CONTENT="15 days" >
    <META NAME="Robots" CONTENT="ALL" >
    <TITLE>LDR: Linux Domande e Risposte</TITLE>
    <LINK REL="stylesheet" TYPE="text/css" HREF="ldr.css">
    <LINK REL="Start" TITLE="Start" HREF="ldr.html">
    <LINK REL="Prev" TITLE="Previous" HREF="ldr3.html">
    <LINK REL="Next" TITLE="Next" HREF="ldr5.html">
</HEAD>
<BODY>
<P>
<A HREF="ldr5.html">[successivo]</A>
<A HREF="ldr3.html">[precedente]</A>
<A HREF="ldr.html">[inizio]</A>
<A HREF="ldr23.html">[fine]</A>
<A HREF="ldr1.html">[indice generale]</A>
<A HREF="ldr21.html">[hall of fame]</A>
<A HREF="ldr23.html">[indice analitico]</A>
<A HREF="ldr3.html">[parte]</A>
</P>
<HR>
<DIV>
<H1>Capitolo 1. &nbsp; <A NAME="title8"></A><A NAME="anchor12"></A>Amministrazione del sistema</H1>

<H2>1.1 &nbsp; <A NAME="title9"></A><A NAME="anchor13"></A>
 Installazione di GNU/Linux <A NAME="index26"></A> </H2>

<P><STRONG>1.1.1)&nbsp;&nbsp;<A NAME="title10"></A><A NAME="anchor14"></A>
Come si copiano o come si creano i dischetti di avvio (<A NAME="index27"></A>boot)? <A NAME="index28"></A> <A NAME="index29"></A> <A NAME="index30"></A> <A NAME="index31"></A> </STRONG></P>

<P>Si pu&ograve; leggere il dischetto creando un'immagine in un file:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>dd if=/dev/fd0 of=floppy.img</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote1" NAME="footnote-ref1">(1)</A></SUP></P>

<P>Quindi si pu&ograve; utilizzare il file dell'immagine copiandolo in un altro dischetto gi&agrave; inizializzato a basso livello:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>dd if=floppy.img of=/dev/fd0</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In alternativa si pu&ograve; usare <SAMP>mkbootdisk</SAMP>, per crearne uno nuovo, ecco un esempio per il <A NAME="index32"></A>kernel 2.2.7:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mkbootdisk --device /dev/fd0 2.2.7</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Oppure ancora:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp bzImage /dev/fd0</CODE></STRONG>[<KBD>Invio </KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote2" NAME="footnote-ref2">(2)</A></SUP></P>

<P>Per indicare la partizione del disco fisso su cui dovr&agrave; essere montato il <A NAME="index35"></A>file&nbsp;system principale (<CODE>/</CODE>) si deve utilizzare il comando <SAMP>rdev</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>rdev /dev/fd0 /dev/<VAR>partizione</VAR> </CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote3" NAME="footnote-ref3">(3)</A></SUP></P>

<P>Infine occorre ricordarsi di impostare nel BIOS l'avvio da dischetto.</P>

<P><STRONG>1.1.2)&nbsp;&nbsp;<A NAME="title11"></A><A NAME="anchor15"></A>
 Come si creano i dischetti di installazione di una distribuzione GNU/Linux <A NAME="index37"></A>Debian? <A NAME="index38"></A> <A NAME="index39"></A> <A NAME="index40"></A> </STRONG></P>

<P>Come per i dischetti della distribuzione <A NAME="index41"></A>Red&nbsp;Hat, <SAMP>RAWRITE.EXE</SAMP> &egrave; un comando valido per copiare qualsiasi immagine di dischetto. Nella distribuzione GNU/Linux <A NAME="index42"></A>Debian si pu&ograve; trovare <SAMP>RAWRITE.EXE</SAMP> nella directory <CODE>\TOOLS\RAWRITE2\</CODE> (meglio usare la versione 2), mentre le immagini dei dischetti si trovano in <CODE>\DISTS\STABLE\MAIN\DISKS-I386\CURRENT\</CODE>. Il numero di dischetti da usare dipende dal metodo di installazione.</P>

<P><STRONG>1.1.3)&nbsp;&nbsp;<A NAME="title12"></A><A NAME="anchor16"></A>
 Come si creano i dischetti di installazione di una distribuzione GNU/Linux <A NAME="index43"></A>Red&nbsp;Hat da Dos? <A NAME="index44"></A> <A NAME="index45"></A> <A NAME="index46"></A> <A NAME="index47"></A> </STRONG></P>

<P>Si deve usare il programma <SAMP>RAWRITE.EXE</SAMP> presente nella directory <CODE>\I386\DOSUTILS\</CODE> della distribuzione che hai. Il comando &egrave;:</P>

<P class="command"><CODE>D:\&gt;&nbsp;</CODE><STRONG><CODE>RAWRITE <VAR>immagine</VAR> A:</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>La metavariabile <VAR>immagine</VAR> rappresenta il nome del dell'immagine presente in <CODE>\I386\IMAGES\</CODE>. I file sono due per creare i due dischetti. La terza immagine &egrave; per la risoluzione dei problemi di installazione.</P>

<P><STRONG>1.1.4)&nbsp;&nbsp;<A NAME="title13"></A><A NAME="anchor17"></A>
 Perch&eacute; <SAMP>FIPS.EXE</SAMP> non funziona all'interno di una finestra Dos? <A NAME="index48"></A> </STRONG></P>

<P><SAMP>FIPS.EXE</SAMP> deve essere lanciato da Dos puro, <STRONG>non</STRONG> da emulazione MS-Windows. Si deve innanzitutto eseguire la deframmentazione del disco fisso e riavviare poi in modalit&agrave; Dos in seguito si esegue <SAMP>FIPS.EXE</SAMP> seguendo le istruzioni.</P>

<TABLE BORDER="3" WIDTH="100%">
<TR><TD>

<P>&Egrave; consigliabile leggere con attenzione la documentazione di <SAMP>FIPS.EXE</SAMP>, che dovrebbe trovarsi insieme all'eseguibile, facendo comunque fare le copie di sicurezza del contenuto del disco di MS-Windows (o almeno dei file non recuperabili in altri modi).</P>

</TD></TR>
</TABLE>

<P><STRONG>1.1.5)&nbsp;&nbsp;<A NAME="title14"></A><A NAME="anchor18"></A>
 Cosa significa il problema del limite dei 1&nbsp;024 cilindri?<SUP><A HREF="amministrazione_del_sistema.html#footnote4" NAME="footnote-ref4">(4)</A></SUP> <A NAME="index50"></A> </STRONG></P>

<P>Al momento di suddividere in partizioni il disco con l'uso di <SAMP>fdisk</SAMP> pu&ograve; capitare di vedere la segnalazione di un errore simile a quello seguente:</P>
<BLOCKQUOTE>

<PRE>The number of cylinders for this disk is set to 2105.
This is larger than 1024, and may cause problems with:
1) software that runs at boot time (e.g. LILO)
2) booting and partitioning software from
   other OSs (e.g. DOS FDISK, OS/2 FDISK)</PRE>

</BLOCKQUOTE>

<P>Non &egrave; il caso di preoccuparsi; pi&ugrave; che un errore &egrave; un avvertimento sul fatto che alcuni programmi (<A NAME="index51"></A>LILO) o sistemi operativi non sono in grado di accedere ai cilindri oltre il 1&nbsp;024-esimo (il numero 1&nbsp;023) per problemi del BIOS.</P>

<P>Si possono attuare gli accorgimenti seguenti:</P>

<OL>

<LI>

<P>attivazione della modalit&agrave; LBA del BIOS, che traduce il disco (divide il numero dei cilindri per un certo numero e moltiplica il numero di testine per lo stesso);</P>
</LI>

<LI>

<P>creazione (e questo forse &egrave; meglio) di una partizione di avvio entro il 1&nbsp;024-esimo cilindro, ad esempio <CODE>/boot/</CODE> per GNU/Linux, senza abilitare la modalit&agrave; LBA.</P>
</LI>
</OL>

<P>C'&egrave; da dire in ogni caso che le ultime versioni di <A NAME="index52"></A>LILO non presentano pi&ugrave; queste limitazioni. Basta quindi procurarsi una versione aggiornata di <A NAME="index53"></A>LILO.</P>

<P><STRONG>1.1.6)&nbsp;&nbsp;<A NAME="title15"></A><A NAME="anchor19"></A>
 Perch&eacute; dopo avere spostato il disco con MS-Windows e dopo averlo collocato come primario <A NAME="index54"></A>slave, MS-Windows non parte pi&ugrave;? Ho aggiornato le impostazioni di <A NAME="index55"></A>LILO ma riesco ad avviare solamente GNU/Linux. <A NAME="index56"></A> <A NAME="index57"></A> <A NAME="index58"></A> </STRONG></P>

<DL>
<DT>Soluzione 1: BIOS</DT>
<DD>

<P>Dal BIOS si disabilita il disco fisso primario <A NAME="index59"></A>master, si salvano le impostazioni e si riavvia. In questo modo MS-Windows si trova effettivamente sul primo disco fisso in fase di avvio e cos&igrave; parte normalmente.</P>

<P>Se non dovesse partire vuol dire che si &egrave; compromesso il <A NAME="index60"></A>MBR (<EM>Master Boot Record</EM>), quindi si deve avviare con il disco di ripristino di MS-Windows, digitando il comando seguente per rimettere a posto il <A NAME="index61"></A>MBR:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>fdisk /MBR</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Al termine si riavvia da disco fisso e MS-Windows dovrebbe partire regolarmente.</P>
</DD>
<DT>Soluzione 2: <A NAME="index62"></A>LILO</DT>
<DD>

<P>Nella sezione relativa a MS-Windows si aggiungono le seguenti impostazioni:</P>
<BLOCKQUOTE>

<PRE>  other = /dev/hdb1    #nel mio caso
  label = DOS
  table = /dev/hdb

        # le quattro righe seguenti indicano a LILO di far credere che
        # i dischi fissi siano invertiti, cio&egrave;
        # che lo slave primario sia sul
        # master primario e viceversa

  map-drive=0x80
       to = 0x81
  map-drive=0x81
       to = 0x80</PRE>

</BLOCKQUOTE>

<P>In questo modo i dischi vengono rimappati istantaneamente al contrario rispetto a come sono impostati.</P>
</DD>
</DL>

<P>Altro problema &egrave; cercare di installare MS-Windows su disco <A NAME="index63"></A>slave mentre sul <A NAME="index64"></A>master c'&egrave; gi&agrave; GNU/Linux. Per farlo, occorre prima copiare il <A NAME="index65"></A>kernel su un dischetto, in modo da poter eventualmente riavviare da floppy. Il comando necessario &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cat /boot/vmlinuz &gt; /dev/fd0 </CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>dove <CODE>/boot/vmlinuz</CODE> &egrave; il percorso assoluto per raggiungere l'immagine del <A NAME="index66"></A>kernel in uso (basta provare ad avviare con il dischetto appena creato per verificare che il procedimento vada a buon fine). Successivamente si procede con i passi seguenti: </P>

<OL>

<LI>

<P>da BIOS si deve disabilitare il disco <A NAME="index67"></A>master;</P>
</LI>

<LI>

<P>si lancia il setup di MS-Windows (avvio direttamente da CD-ROM, oppure avvio da dischetto e poi installazione da CD-ROM);</P>
</LI>

<LI>

<P>si attende che MS-Windows concluda i suoi numerosi riavvii per terminare l'installazione;</P>
</LI>

<LI>

<P>si riavvia, rientrando nel BIOS e riabilitando il primo disco fisso;</P>
</LI>

<LI>

<P>si riavvia da dischetto con il dischetto contenente l'immagine del <A NAME="index68"></A>kernel creato prima di iniziare;</P>
</LI>

<LI>

<P>da GNU/Linux, si modifica <CODE>/etc/lilo.conf</CODE> nel modo indicato in precedenza;</P>
</LI>

<LI>

<P>si lancia <SAMP>lilo</SAMP>.</P>
</LI>
</OL>

<P>In questo modo, avviando la macchina con <A NAME="index69"></A>LILO si dovrebbe riuscire a caricare entrambi i sistemi operativi.</P>

<P><STRONG>1.1.7)&nbsp;&nbsp;<A NAME="title16"></A><A NAME="anchor20"></A>
 Come si fa a esportare il CD-ROM durante l'installazione via NFS? <A NAME="index70"></A> <A NAME="index71"></A> <A NAME="index72"></A> </STRONG></P>

<P>Si deve aggiungere il percorso al file <CODE>/etc/exports</CODE> facendo riferimento alle <A NAME="index73"></A>pagine di manuale di <EM>nfs</EM>(5) e di <EM>exports</EM>(5).</P>

<P class="syntax"><TT>/cdrom          <VAR>host_che_mi_pare</VAR>(ro)
</TT></P>

<P>Nel modello si vede la parola chiave <SAMP>ro</SAMP>, che sta per <EM>read only</EM>. Successivamente si fa ripartire l'NFS con il comando seguente:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>/etc/init.d/nfs restart</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Ovviamente bisogna avere installato il demone <SAMP>nfsd</SAMP>, oppure bisogna avere compilato il supporto per il <A NAME="index74"></A>server NFS nel <A NAME="index75"></A>kernel (c'&egrave; nei <A NAME="index76"></A>kernel 2.2, ma non &egrave; ancora del tutto stabile).</P>

<H2>1.2 &nbsp; <A NAME="title17"></A><A NAME="anchor21"></A>
 Avvio e arresto del sistema <A NAME="index77"></A> <A NAME="index78"></A> <A NAME="index79"></A> </H2>

<P><STRONG>1.2.1)&nbsp;&nbsp;<A NAME="title18"></A><A NAME="anchor22"></A>
 Come si arresta il sistema? Come si riavvia? </STRONG></P>

<P>Per arrestare il sistema si deve dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>shutdown -h now</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Oppure:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>init 0</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per riavviare il sistema il comando &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>shutdown -r now</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Oppure:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>init 6</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.2.2)&nbsp;&nbsp;<A NAME="title19"></A><A NAME="anchor23"></A>
 Come si disabilita il supporto per l'APM in fase di avvio? <A NAME="index80"></A> <A NAME="index81"></A> </STRONG></P>

<P> Al prompt di <A NAME="index82"></A>LILO occorre digitare: </P>

<P class="command"><CODE>LILO boot:&nbsp;</CODE><STRONG><CODE>linux apm=off</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote5" NAME="footnote-ref5">(5)</A></SUP></P>

<P><STRONG>1.2.3)&nbsp;&nbsp;<A NAME="title20"></A><A NAME="anchor24"></A>
 &Egrave; possibile fermare l'arresto o il riavvio del sistema dopo averne dato il comando? <A NAME="index84"></A> </STRONG></P>

<P>Per poter farlo, occorre impartire il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>shutdown <VAR>-c</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote6" NAME="footnote-ref6">(6)</A></SUP></P>

<P> ma questa operazione di annullamento avrebbe successo esclusivamente qualora il comando <SAMP>shutdown</SAMP> fosse stato impartito mediante l'indicazione esatta del tempo di esecuzione dello stesso:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>shutdown <VAR>-r</VAR> <VAR>ore:minuti</VAR> &amp;</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Nel caso in cui invece il comando venisse assegnato cos&igrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>shutdown <VAR>-r</VAR> <VAR>now</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>le console virtuali e i terminali grafici verrebbero repentinamente disattivati impedendo qualsiasi tipo di operazione.</P>

<P><STRONG>1.2.4)&nbsp;&nbsp;<A NAME="title21"></A><A NAME="anchor25"></A>
 Esiste un modo per rendere pi&ugrave; repentino l'arresto del sistema? <A NAME="index85"></A> </STRONG></P>

<P>Utilizzare <SAMP>shutdown</SAMP> con l'opzione <VAR>-n</VAR>, comporta un riavvio e un arresto del sistema velocissimi. In ogni caso se ne sconsiglia <EM>decisamente</EM> l'uso come indicato anche nella pagina di manuale:</P>

<P class="syntax"><TT>man <VAR>shutdown</VAR>
</TT></P>
<BLOCKQUOTE>

<PRE>-n     [DEPRECATED] Don't call init(8) to do
       the  shutdown but  do it ourself.  The use of this
       option is dis-couraged, and its results are not
       always what you'd expect.

-n     [SCONSIGLIATO] Non impartite init(8) per lo
       shutdown ma fatelo voi.  L'utilizzo di questa opzione 
       &egrave; sconsigliato, e i risultati ottenuti
       non sono quelli che ci si aspetterebbero.</PRE>

</BLOCKQUOTE>

<P><STRONG>1.2.5)&nbsp;&nbsp;<A NAME="title22"></A><A NAME="anchor26"></A>
 Come si concede a tutti gli utenti la possibilit&agrave; di arrestare il sistema? <A NAME="index86"></A> <A NAME="index87"></A> </STRONG></P>

<P>Occorre attivare il bit SUID abbinando la propriet&agrave; all'utente <SAMP>root</SAMP> (SUID-root), per l'eseguibile <SAMP>shutdown</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chmod 4755 /sbin/shutdown </CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In questo modo <SAMP>shutdown</SAMP> verr&agrave; sempre eseguito come se fosse l'utente <SAMP>root</SAMP> a lanciarlo.</P>

<P>Un altro modo per ottenere lo stesso obiettivo &egrave; quello di creare un utente speciale <SAMP>halt</SAMP>. Ecco una porzione del file <CODE>/etc/passwd</CODE> che indica quali dovrebbero essere le impostazioni di questo ipotetico utente:</P>
<BLOCKQUOTE>

<PRE>[...]
halt:x:0:0:,,,:/home/halt:/sbin/halt
[...]</PRE>

</BLOCKQUOTE>

<P>In questa maniera l'arresto del sistema &egrave; consentito solo a coloro che hanno la <A NAME="index88"></A>password di quell'utente.</P>

<P><STRONG>1.2.6)&nbsp;&nbsp;<A NAME="title23"></A><A NAME="anchor27"></A>
 Come si concede a tutti gli utenti la possibilit&agrave; di riavviare il sistema? <A NAME="index89"></A> </STRONG></P>

<P>Tale operazione pu&ograve; essere effettuata in diversi modi; in questo caso verr&agrave; spiegato come farlo mediante il comando <SAMP>sudo</SAMP>.</P>

<P>Innanzitutto occorre modificare il file <CODE>/etc/sudoers</CODE> mediante <SAMP>visudo</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>visudo</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote7" NAME="footnote-ref7">(7)</A></SUP></P>

<P>e aggiungere una riga tipo questa:</P>
<BLOCKQUOTE>

<PRE> tizio   sempronio=/sbin/shutdown -[hr] now
 </PRE>

</BLOCKQUOTE>

<P>In questo caso <SAMP>tizio</SAMP> &egrave; l'utente e <SAMP>sempronio</SAMP> il nome della macchina; <SAMP>-<STRONG><BIG>[</BIG></STRONG>h<STRONG><BIG>|</BIG></STRONG>r<STRONG><BIG>]</BIG></STRONG></SAMP> indica che l'utente avr&agrave; la possibilit&agrave; di arrestare e di riavviare il sistema.</P>

<P>Una volta apportate le modifiche, per arrestare il sistema o per riavviarlo, l'utente <SAMP>tizio</SAMP> dovr&agrave; impartire:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>sudo <VAR>shutdown -h now </VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>sudo <VAR>shutdown -r now </VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>A questo punto egli dovr&agrave; inserire la <A NAME="index90"></A>password per proseguire con l'arresto o il riavvio del sistema.</P>

<P><STRONG>1.2.7)&nbsp;&nbsp;<A NAME="title24"></A><A NAME="anchor28"></A>
 Come si pu&ograve; impedire agli utenti del sistema di impartire il riavvio mediante la combinazione di tasti [<KBD>Ctrl+Alt+Canc</KBD>]? <A NAME="index91"></A> </STRONG></P>

<P>Occorre commentare la riga contenente <SAMP>ctrlaltcanc</SAMP> nel file <CODE>/etc/inittab</CODE>.</P>

<P><STRONG>1.2.8)&nbsp;&nbsp;<A NAME="title25"></A><A NAME="anchor29"></A>
 Come funziona <SAMP>install-mbr</SAMP> in una distribuzione GNU/Linux <A NAME="index92"></A>Debian? <A NAME="index93"></A> </STRONG></P>

<P> In <A NAME="index94"></A>Debian GNU/Linux, <SAMP>install-mbr</SAMP> aggiunge al MBR (<EM>Master Boot Record</EM>) un piccolo ma potente codice per scegliere la partizione di avvio. In realt&agrave; questo evita anche di utilizzare il MBR Dos che non &egrave; libero. </P>

<P><SAMP>install-mbr</SAMP> si installa con il seguente comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cd /usr/sbin</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>./install-mbr /dev/hda</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote8" NAME="footnote-ref8">(8)</A></SUP></P>

<P>Una volta installato, dal riavvio successivo del sistema, se non si preme alcun tasto, l'MBR modificato, invocher&agrave; il primo settore della prima partizione del primo disco fisso. Se invece si premer&agrave; qualche tasto, <SAMP>install-mbr</SAMP> visualizzer&agrave; il suo <A NAME="index95"></A>prompt. Quest'ultimo &egrave; costituito da lettere e numeri.</P>

<P>Ecco un esempio di <A NAME="index96"></A>prompt:</P>

<P class="command"><CODE>14FA:&nbsp;</CODE></P>

<UL>

<LI>

<P>[<KBD>1</KBD>]</P>

<P>permette l'avvio della prima partizione;</P>
</LI>

<LI>

<P>[<KBD>4</KBD>]</P>

<P>permette l'avvio della quarta partizione;</P>
</LI>

<LI>

<P>[<KBD>F</KBD>]</P>

<P>permette l'avvio da dischetto;</P>
</LI>

<LI>

<P>[<KBD>A</KBD>]</P>

<P>opzioni avanzate.</P>
</LI>
</UL>

<P>Ulteriori informazioni possono essere rilevate nel file <CODE>/usr/doc/mbr/README</CODE> di una distribuzione <A NAME="index97"></A>Debian GNU/Linux.</P>

<P><STRONG>1.2.9)&nbsp;&nbsp;<A NAME="title26"></A><A NAME="anchor30"></A>
 Come &egrave; possibile avviare un sistema GNU/Linux da un sistema Dos/MS-Windows? <A NAME="index98"></A> </STRONG></P>

<P>Occorre utilizzare il comando <SAMP>LOADLIN.EXE</SAMP>. Prima di invocarlo per&ograve;, occorre apportare qualche modifica al sistema Dos o MS-Windows. Bisogna infatti copiare <SAMP>LOADLIN.EXE</SAMP> e le immagini del <A NAME="index99"></A>kernel all'interno di una directory dell'unit&agrave; da cui si intende avviare il sistema GNU/Linux.</P>

<P>Per invocare <SAMP>LOADLIN.EXE</SAMP>, supponendo di avere posto lo stesso comando e le immagini del <A NAME="index100"></A>kernel nella directory <CODE>C:\LINUX\</CODE>, abbiamo a disposizione diverse metodiche:</P>

<OL>

<LI>

<P>si pu&ograve; inserire la riga:</P>
<BLOCKQUOTE>

<PRE> INSTALL=C:\LINUX\LOADLIN.EXE</PRE>

</BLOCKQUOTE>

<P>nel file <CODE>C:\CONFIG.SYS</CODE>;</P>
</LI>

<LI>

<P>si pu&ograve; inserire il comando <SAMP>LOADLIN.EXE</SAMP> nel file <CODE>C:\AUTOEXEC.BAT</CODE>;</P>
</LI>

<LI>

<P>infine si pu&ograve; ricorrere a <A NAME="index101"></A>script (<EM>batch</EM>).</P>
</LI>
</OL>

<P>Esempi di <A NAME="index102"></A>script:</P>
<BLOCKQUOTE>

<PRE>rem C:\LINUX\LINUX2.BAT
rem l'immagine &egrave; quella del kernel 2.2.2 e
rem la partizione &egrave; la seconda di un disco SCSI
@pause
@echo Premere Ctrl-C per interrompere
C:\LINUX\LOADLIN C:\LINUX\bzImage.222 root=/dev/sda2 ro

rem C:\LINUX\LINUX_R.BAT
rem l'immagine &egrave; quella del kernel 2.0.36 della Red&middot;Hat
rem la partizione &egrave; la seconda di un disco IDE/EIDE master
@pause
@echo Premere Ctrl-C per interrompere
C:\LINUX\LOADLIN C:\LINUX\vmlinuz2.036 root=/dev/hda2 ro

rem C:\LINUX\SINGLE.BAT
rem l'immagine &egrave; quella del kernel 2.0.36 della Red&middot;Hat
rem la partizione &egrave; la seconda di un disco IDE/EIDE slave
@pause
@echo Premere Ctrl-C per interrompere
C:\LINUX\LOADLIN C:\LINUX\vmlinuz2.036 single root=/dev/hdb2 ro</PRE>

</BLOCKQUOTE>

<P>Notiamo in quest'ultimo esempio l'opzione <VAR>single</VAR> che permette di avviare il sistema in modalit&agrave; utente singolo.</P>

<P><STRONG>1.2.10)&nbsp;&nbsp;<A NAME="title27"></A><A NAME="anchor31"></A>
 Come si avvia GNU/Linux dal <A NAME="index103"></A>Boot Manager di MS-Windows NT? <A NAME="index104"></A> </STRONG></P>

<P>Occorre innanzitutto installare <A NAME="index105"></A>LILO sulla partizione Linux. Va poi generato il file <CODE>bootsect.lin</CODE> contenente l'immagine del settore di avvio della partizione Linux:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>dd if=/dev/hd<VAR>x</VAR> of= /tmp/bootsect.lin bs=512 count=1</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote9" NAME="footnote-ref9">(9)</A></SUP></P>

<P><CODE>bootsect.lin</CODE> va poi copiato nella partizione di avvio di MS-Windows NT e va modificato il file <CODE>boot.ini</CODE> di MS-Windows NT come segue:</P>
<BLOCKQUOTE>

<PRE>[boot loader]
timeout=5
default=multi(0)disk(0)rdisk(0)partition(1)\WINNT
[operating systems]
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Windows NT Server Version 4.00"
multi(0)disk(0)rdisk(0)partition(1)\WINNT="Windows NT Server Version 4.00 [VGA mode]" /basevideo /sos
C:\="MS-DOS"
c:\bootsect.lin="Linux"</PRE>

</BLOCKQUOTE>

<P>Occorre infine ricordare che ogni modifica di <A NAME="index106"></A>LILO, comporta il fatto che si deve ricreare il file immagine e che si deve copiarlo nuovamente nella partizione di MS-Windows NT.</P>

<P><STRONG>1.2.11)&nbsp;&nbsp;<A NAME="title28"></A><A NAME="anchor32"></A>
 Ho impostato involontariamente il livello di esecuzione (<EM>runlevel</EM>) a zero e il sistema inizia la procedura di arresto non appena ha terminato l'avvio. Che posso fare? <A NAME="index107"></A> <A NAME="index108"></A> <A NAME="index109"></A> </STRONG></P>

<P>Al prompt di <A NAME="index110"></A>LILO occorre dare il comando:</P>

<P class="command"><CODE>LILO boot:&nbsp;</CODE><STRONG><CODE>linux init=/bin/bash </CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Si intende che <SAMP>linux</SAMP> deve essere sostituito con l'etichetta di <A NAME="index111"></A>LILO deputata al caricamento di GNU/Linux</P>

<P>Una volta ottenuto l'accesso al sistema si deve montare a mano in modalit&agrave; lettura-scrittura il <A NAME="index112"></A>file&nbsp;system radice (<A NAME="index113"></A>root):</P>

<P class="command"><CODE>bash-2.03$ </CODE><STRONG><CODE>mount -n -o remount,rw /</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Questo permette di apportare le modifiche necessarie per tornare al livello di esecuzione preferito.</P>

<P>Un'altra soluzione consiste nell'impartire <SAMP>linux 1</SAMP> sempre al prompt di <A NAME="index114"></A>LILO e cambiare poi repentinamente livello di esecuzione.</P>

<P><STRONG>1.2.12)&nbsp;&nbsp;<A NAME="title29"></A><A NAME="anchor33"></A>
 Come &egrave; possibile fare spegnere la macchina alla fine del processo di arresto? <A NAME="index115"></A> <A NAME="index116"></A> <A NAME="index117"></A> </STRONG></P>

<P>Se la macchina in questione ha la capacit&agrave; di gestire autonomamente l'alimentazione (<EM>APM</EM>), &egrave; necessario ricompilare il <A NAME="index118"></A>kernel includendo il supporto per l'<SAMP>APM</SAMP> selezionando l'opzione <SAMP>power off on shutdown</SAMP>. Dopo questa modifica la macchina dovrebbe spegnersi dopo le procedure d'arresto (<A NAME="index119"></A>shutdown). Se cos&igrave; non fosse, occorre verificare che nel file <CODE>/etc/init.d/halt</CODE> (o in <CODE>/etc/rc.d/init.d/halt</CODE>) sia presente l'opzione <VAR>-p</VAR> del comando <SAMP>halt</SAMP>.</P>

<P>Ecco un esempio del file <CODE>halt</CODE>:</P>
<BLOCKQUOTE>

<PRE>#! /bin/sh
#
# halt          Execute the halt command.
#
# Version:      @(#)halt  2.75  19-May-1998  miquels@cistron.nl
#

PATH=/sbin:/bin:/usr/sbin:/usr/bin

# See if we need to cut the power.
if [ -x /etc/init.d/ups-monitor ]
then
        /etc/init.d/ups-monitor poweroff
fi

halt -d -f -i -p</PRE>

</BLOCKQUOTE>

<P><STRONG>1.2.13)&nbsp;&nbsp;<A NAME="title30"></A><A NAME="anchor34"></A>
 Come &egrave; possibile far spegnere la macchina se si dispone di una scheda madre <SAMP>Soyo 5-EM</SAMP> o <SAMP>Soyo 5 ema</SAMP>? <A NAME="index120"></A> <A NAME="index121"></A> <A NAME="index122"></A> </STRONG></P>

<P>Occorre collegarsi al sito della Soyo (&lt;<EM><A HREF="http://www.soyo.com">http://www.soyo.com</A></EM>&gt;) spostandosi nella sezione <SAMP>software</SAMP>. Qui troviamo una directory chiamata <CODE>patch/</CODE> contenente due <A NAME="index123"></A>file di differenze (<EM>patch</EM>) per le due schede in oggetto. &Egrave; necessario ora applicare i <A NAME="index124"></A>file di differenze al <A NAME="index125"></A>kernel che dovr&agrave; essere ricompilato includendo il supporto per l'<SAMP>APM</SAMP> selezionando l'opzione <SAMP>power off on shutdown</SAMP>. <SUP><A HREF="amministrazione_del_sistema.html#footnote10" NAME="footnote-ref10">(10)</A></SUP>. </P>

<P><STRONG>1.2.14)&nbsp;&nbsp;<A NAME="title31"></A><A NAME="anchor35"></A>
 &Egrave; possibile avviare la procedura di arresto del sistema con una combinazione di tasti? </STRONG></P>

<P>Nel file <CODE>/etc/inittab</CODE> troviamo la seguente sezione:</P>
<BLOCKQUOTE>

<PRE># Trap CTRL-ALT-DELETE
ca::ctrlaltdel:/sbin/shutdown -t3 -r now</PRE>

</BLOCKQUOTE>

<P>Se sostituiamo <VAR>-r</VAR> con <VAR>-h</VAR>, alla pressione contemporanea di [<KBD>Ctrl+Alt+Canc</KBD>] il sistema comincer&agrave; la procedura di arresto.</P>

<P><STRONG>1.2.15)&nbsp;&nbsp;<A NAME="title32"></A><A NAME="anchor36"></A>
 Perch&eacute; in alcune distribuzioni tutti gli utenti hanno la facolt&agrave; di impartire il comando <SAMP>halt</SAMP>? <A NAME="index128"></A> <A NAME="index129"></A> </STRONG></P>

<P>Per evitare che gli utenti possano impartire i comandi <SAMP>halt</SAMP> e <SAMP>shutdown</SAMP>, &egrave; sufficiente creare il file <CODE>/etc/halt.users</CODE> e aggiungere due righe ai file <CODE>/etc/pam.d/halt</CODE> e <CODE>/etc/pam.d/shutdown</CODE> in modo che risultino cos&igrave;:</P>
<BLOCKQUOTE>

<PRE>#%PAM-1.0
auth       sufficient   /lib/security/pam_rootok.so
auth       requisite    /lib/security/pam_listfile.so \
           onerr=3Dfail sense=allow item=user file=/etc/halt.users
auth       required     /lib/security/pam_console.so
auth       required     /lib/security/pam_pwdb.so
account    required     /lib/security/pam_permit.so</PRE>

</BLOCKQUOTE>

<P>In questa maniera solo gli utenti menzionati in <CODE>/etc/halt.users</CODE> possono utilizzare <SAMP>halt</SAMP> e <SAMP>shutdown</SAMP>. Ovviamente il controllo della <A NAME="index130"></A>password per l'utente rimane, per essere sicuri che sia proprio l'utente che sta digitando colui che ha impartito il comando.</P>

<P><STRONG>1.2.16)&nbsp;&nbsp;<A NAME="title33"></A><A NAME="anchor37"></A>
 Come &egrave; possibile visualizzare messaggi o loghi all'avvio di GNU/Linux? <A NAME="index131"></A> <A NAME="index132"></A> <A NAME="index133"></A> <A NAME="index134"></A> <A NAME="index135"></A> <A NAME="index136"></A> <A NAME="index137"></A> </STRONG></P>

<P>Le metodiche da utilizzare per ottenere questo risultato variano al variare del momento in cui si vuole che il messaggio o il logo venga visualizzato.</P>

<P>Se ad esempio vogliamo fare visualizzare al sistema un messaggio al prompt di <A NAME="index138"></A>LILO, occorre mettere nel file <CODE>/etc/lilo.conf</CODE> la riga:</P>
<BLOCKQUOTE>

<PRE>message= &lt;var&gt;/percorso/nomefile&lt;/var&gt;</PRE>

</BLOCKQUOTE>

<P>Per rendere effettive le modifiche occorrer&agrave; dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per ottenere questo messaggio colorato, &egrave; necessario installare <A NAME="index139"></A>Lilo-Colors che altro non &egrave; che un <A NAME="index140"></A>file di differenze per <A NAME="index141"></A>LILO. Si tenga presente che esiste un altro programma chiamato <A NAME="index142"></A>BootLogo che &egrave; un generatore di messaggi sia per la versione monocromatica che per la versione colorata di <A NAME="index143"></A>LILO.</P>

<P>Per avere un logo ANSI o <A NAME="index144"></A>ASCII al <A NAME="index145"></A>login di GNU/Linux possiamo utilizzare <A NAME="index146"></A>Linux Logo. Simile &egrave; <A NAME="index147"></A>Welcome2L.</P>

<TABLE ID="anchor38" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="5.jpg" ALT="figure/linux_logo" WIDTH="737" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor38">1.1</A>. Linux Logo. </P>

</TD></TR>
</TABLE>

<TABLE ID="anchor39" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="6.jpg" ALT="figure/llogo_banner" WIDTH="737" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor39">1.2</A>. Linux Logo in visualizzazione banner. </P>

</TD></TR>
</TABLE>

<TABLE ID="anchor40" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="7.jpg" ALT="figure/welcome2l" WIDTH="566" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor40">1.3</A>. Welcome2L. </P>

</TD></TR>
</TABLE>

<P>Inoltre, se ricompilando il <A NAME="index148"></A>kernel si include il supporto per <SAMP>fbcon</SAMP>, si avr&agrave; la possibilit&agrave; di fare apparire durante l'avvio del sistema un pinguino in modalit&agrave; grafica.</P>

<P><STRONG>1.2.17)&nbsp;&nbsp;<A NAME="title34"></A><A NAME="anchor41"></A>
 <SAMP>KERNEL PANIC: VFS: Unable to mount root fs on 03:03</SAMP> <A NAME="index149"></A> <A NAME="index150"></A> </STRONG></P>

<P>Questo tipo di errore si presenta quando il sistema non riesce a montare la radice del <A NAME="index151"></A>file&nbsp;system. Probabilmente c'&egrave; stato un cambiamento di disposizione dei dischi fissi (aggiunta, rimozione o inversione).</P>

<P>Per risolvere il problema, occorre far ripartire il sistema mediante un disco di avvio. Al prompt di <A NAME="index152"></A>LILO si deve indicare quale &egrave; la radice del <A NAME="index153"></A>file&nbsp;system:</P>

<P class="command"><CODE>LILO boot:&nbsp;</CODE><STRONG><CODE>linux 1 root=/dev/hd<VAR>x</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote11" NAME="footnote-ref11">(11)</A></SUP></P>

<P>Una volta ottenuto l'accesso al sistema occorre modificare il file <CODE>/etc/fstab</CODE> indicando il dispositivo corretto della partizione che costituisce la partizione principale. La stessa modifica va effettuata anche nel file <CODE>/etc/lilo.conf</CODE> e per rendere effettive le modifiche va rilanciato <SAMP>lilo</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>/sbin/lilo</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.2.18)&nbsp;&nbsp;<A NAME="title35"></A><A NAME="anchor42"></A>
 Perch&eacute; dopo la ricompilazione del <A NAME="index155"></A>kernel viene visualizzato un messaggio di <EM>kernel panic</EM>? <A NAME="index156"></A> <A NAME="index157"></A> </STRONG></P>

<P>Quando si ricompila il <A NAME="index158"></A>kernel, &egrave; possibile gestirne alcune parti in forma di modulo. Ci&ograve; che non deve <EM>assolutamente</EM> essere caricato sotto forma di modulo &egrave; ci&ograve; che &egrave; necessario in fase di avvio. Infatti, se il modulo per i dischi IDE/EIDE viene caricato sotto forma di modulo, il sistema non sar&agrave; in grado di avviarsi e produrr&agrave; un messaggio di <SAMP>kernel panic</SAMP>; questo potrebbe spiegare il problema. </P>

<P><STRONG>1.2.19)&nbsp;&nbsp;<A NAME="title36"></A><A NAME="anchor43"></A>
 <SAMP>swapon: warning: /dev/hda1 has insecure permissions 0660, 0600 suggested</SAMP> <A NAME="index159"></A> <A NAME="index160"></A> </STRONG></P>

<P>Con questo messaggio il sistema ci avverte di una condizione di scarsa sicurezza relativa ai permessi di una partizione; in questo caso si tratta della prima partizione dell'unit&agrave; IDE/EIDE <A NAME="index161"></A>master primaria che possiede inutilmente i permessi di lettura e scrittura per il gruppo del proprietario.</P>

<P>Mediante il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chmod 0600 /dev/hda1</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>si ristabiliscono i permessi corretti.</P>

<P><STRONG>1.2.20)&nbsp;&nbsp;<A NAME="title37"></A><A NAME="anchor44"></A>
 <SAMP>Parallelizing fsck version x.yy /dev/hdxy</SAMP> <SAMP>:UNEXPECTED</SAMP> <SAMP>INCONSISTENCY; RUN fsck MANUALLY</SAMP> <A NAME="index162"></A> <A NAME="index163"></A> <A NAME="index164"></A> <A NAME="index165"></A> </STRONG></P>

<P>Questo tipo di messaggio appare prevalentemente quando il sistema non &egrave; stato arrestato in maniera corretta. Per risolvere il problema occorre dare il seguente comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>e2fsck /dev/hdxy</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Occorre rispondere affermativamente alle eventuali richieste di clonazione di <A NAME="index166"></A>inode.</P>

<H2>1.3 &nbsp; <A NAME="title38"></A><A NAME="anchor45"></A>
 Tipi di <A NAME="index167"></A>file&nbsp;system e partizioni <A NAME="index168"></A> </H2>

<P><STRONG>1.3.1)&nbsp;&nbsp;<A NAME="title39"></A><A NAME="anchor46"></A>
 Come si fa a indicare che alcune directory del <A NAME="index169"></A>file&nbsp;system sono distribuite su dispositivi differenti? <A NAME="index170"></A> </STRONG></P>

<P>Per fare questa operazione occorre aggiungere nel file <CODE>/etc/fstab</CODE> una riga per ogni dispositivo o <A NAME="index171"></A>file&nbsp;system remoto che si voglia montare.</P>

<P>Ogni riga di <CODE>/etc/fstab</CODE> &egrave; composta da 6 campi:</P>

<OL>

<LI>

<P>dispositivo o <A NAME="index172"></A>file&nbsp;system remoto;</P>
</LI>

<LI>

<P>directory di innesto (<EM>mount&nbsp;point</EM>) del <A NAME="index173"></A>file&nbsp;system;</P>
</LI>

<LI>

<P>tipo del <A NAME="index174"></A>file&nbsp;system:</P>

<UL>

<LI>

<P>ext2;</P>
</LI>

<LI>

<P>vfat;</P>
</LI>

<LI>

<P>nfs;</P>
</LI>

<LI>

<P>swap;</P>
</LI>

<LI>

<P>iso9660;</P>
</LI>

<LI>

<P>ecc.</P>
</LI>
</UL>
</LI>

<LI>

<P>opzioni di <A NAME="index175"></A>montaggio(<SAMP>user</SAMP>, <SAMP>auto</SAMP>, <SAMP>noauto</SAMP>, ecc.)</P>
</LI>

<LI>

<P>campo usato da <SAMP>dump</SAMP></P>
</LI>

<LI>

<P>campo usato da <SAMP>fsck</SAMP></P>
</LI>
</OL>

<P>Se si vuole ad esempio che venga innestata al <A NAME="index176"></A>file&nbsp;system principale la directory <CODE>/var/</CODE> che risiede sulla terza partizione del secondo disco fisso, bisogna aggiungere la seguente riga al file <CODE>/etc/fstab</CODE>:</P>
<BLOCKQUOTE>

<PRE>/dev/hdb3       /var    ext2    defaults        1 2</PRE>

</BLOCKQUOTE>

<P><STRONG>1.3.2)&nbsp;&nbsp;<A NAME="title40"></A><A NAME="anchor47"></A>
 Come si visualizza la struttura del <A NAME="index177"></A>file&nbsp;system? <A NAME="index178"></A> <A NAME="index179"></A> </STRONG></P>

<P>Per vedere quali partizioni sono innestate al <A NAME="index180"></A>file&nbsp;system principale, &egrave; sufficiente impartire il comando <SAMP>df</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>df</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<TABLE ID="anchor48" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="8.jpg" ALT="figure/df" WIDTH="453" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor48">1.4</A>. La visualizzazione della struttura del file system. </P>

</TD></TR>
</TABLE>

<P>Per visualizzare invece il partizionamento di un'unit&agrave;, si dar&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>fdisk -l <VAR>dispositivo</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote12" NAME="footnote-ref12">(12)</A></SUP></P>

<P><STRONG>1.3.3)&nbsp;&nbsp;<A NAME="title41"></A><A NAME="anchor49"></A>
 Come si crea un <A NAME="index181"></A>file&nbsp;system <A NAME="index182"></A>Ext2 nella terza partizione del secondo disco fisso IDE/EIDE? <A NAME="index183"></A> <A NAME="index184"></A> <A NAME="index185"></A> </STRONG></P>

<P>Assumendo che il partizionamento sia un'operazione gi&agrave; effettuata, il comando sar&agrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mke2fs /dev/hdb3</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per controllare i blocchi difettosi ed eventualmente fissarli, si utilizza l'opzione <SAMP>-c</SAMP> di <SAMP>mke2fs</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mke2fs -c /dev/hdb3</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.3.4)&nbsp;&nbsp;<A NAME="title42"></A><A NAME="anchor50"></A>
 Come si verifica se ci sono settori danneggiati su partizioni con <A NAME="index186"></A>file&nbsp;system <A NAME="index187"></A>Ext2? <A NAME="index188"></A> </STRONG></P>

<P>Occorre impartire il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>fsck.ext2 -c /dev/<VAR>partizione</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote13" NAME="footnote-ref13">(13)</A></SUP></P>

<P>Oppure:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>e2fsck -c <VAR>partizione</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.3.5)&nbsp;&nbsp;<A NAME="title43"></A><A NAME="anchor51"></A>
 Come si possono ridimensionare le partizioni con <A NAME="index189"></A>file&nbsp;system <A NAME="index190"></A>Ext2? <A NAME="index191"></A> <A NAME="index192"></A> <A NAME="index193"></A> <A NAME="index194"></A> <A NAME="index195"></A> </STRONG></P>

<P>Per tale scopo esistono due strumenti molto validi:</P>

<OL>

<LI>

<P><A NAME="index196"></A>GNU parted; <SUP><A HREF="amministrazione_del_sistema.html#footnote14" NAME="footnote-ref14">(14)</A></SUP> </P>
</LI>

<LI>

<P><A NAME="index197"></A>ext2resize; <SUP><A HREF="amministrazione_del_sistema.html#footnote15" NAME="footnote-ref15">(15)</A></SUP> </P>
</LI>
</OL>

<P><STRONG>1.3.6)&nbsp;&nbsp;<A NAME="title44"></A><A NAME="anchor52"></A>
 Come si pu&ograve; creare da GNU/Linux un <A NAME="index198"></A>file&nbsp;system Dos-FAT? <A NAME="index199"></A> </STRONG></P>

<P>Il comando <SAMP>mkdosfs</SAMP> o il comando <SAMP>mkfs.msdos</SAMP> sono preposti a questo scopo. Ecco un esempio che mostra come creare un <A NAME="index200"></A>file&nbsp;system Dos-FAT nella terza partizione del secondo disco SCSI (<CODE>/dev/sdb3</CODE>) dopo avere verificato la presenza di settori difettosi (<VAR>-n</VAR>):</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mkdosfs -c /dev/sdb3</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.3.7)&nbsp;&nbsp;<A NAME="title45"></A><A NAME="anchor53"></A>
 Come si verifica la presenza di settori danneggiati in una partizione contenente un <A NAME="index201"></A>file&nbsp;system Dos-FAT? <A NAME="index202"></A> </STRONG></P>

<P>Con il comando <SAMP>fsck.msdos</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>fsck.msdos -r /dev/hda1</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In questo caso sar&agrave; la prima partizione del primo disco fisso IDE/EIDE ad essere controllata e nel caso venisse trovata qualche irregolarit&agrave;, verrebbe chiesto all'utente come comportarsi.</P>

<H2>1.4 &nbsp; <A NAME="title46"></A><A NAME="anchor54"></A>
Swap</H2>

<P><STRONG>1.4.1)&nbsp;&nbsp;<A NAME="title47"></A><A NAME="anchor55"></A>
 Se si avesse bisogno di ulteriore spazio <SAMP>swap</SAMP>, come si aggiunge? <A NAME="index203"></A> <A NAME="index204"></A> </STRONG></P>

<P>Si pu&ograve; creare una <A NAME="index205"></A>partizione Linux-swap oppure un <A NAME="index206"></A>file-swap.</P>

<P>La partizione da rendere <A NAME="index207"></A>partizione Linux-swap si crea come tutte le altre partizioni; il file invece deve essere creato nel seguente modo:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>dd if=/dev/zero of=/file_swap bs=1024 count=1024</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote16" NAME="footnote-ref16">(16)</A></SUP></P>

<P>Per rendere <SAMP>swap</SAMP> la partizione <CODE>/dev/hda2</CODE>, si dar&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mkswap -c /dev/hda2</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote17" NAME="footnote-ref17">(17)</A></SUP></P>

<P>Per rendere invece <SAMP>swap</SAMP> il file <CODE>file_swap</CODE>, si dar&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mkswap /file_swap 1024</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Sono stati quindi predisposti due spazi <SAMP>swap</SAMP> che per&ograve; non sono ancora utilizzati. Per farlo, occorre impartire il comando <SAMP>swapon</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>swapon /dev/hda1</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Oppure, nel caso del file:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>swapon file_swap</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se non si vuole lanciare ogni volta questo comando, basta inserire nel file <CODE>/etc/fstab</CODE> le indicazioni del nuovo spazio di <SAMP>swap</SAMP> ed esso verr&agrave; attivato ad ogni avvio del sistema. Ecco una porzione d'esempio del file <CODE>/etc/fstab</CODE>.</P>
<BLOCKQUOTE>

<PRE>[...]
/file_swap         none          swap      sw   0 0
[...]</PRE>

</BLOCKQUOTE>

<H2>1.5 &nbsp; <A NAME="title48"></A><A NAME="anchor56"></A>
Montare i dischi</H2>

<P><STRONG>1.5.1)&nbsp;&nbsp;<A NAME="title49"></A><A NAME="anchor57"></A>
 Operazioni con un dischetto Dos (<A NAME="index208"></A>file&nbsp;system vfat) <A NAME="index209"></A> </STRONG></P>

<P>Come si crea in Linux un dischetto capace di ospitare file generati con un sistema operativo Dos?</P>

<P>Occorre innanzitutto preparare il dischetto mediante la formattazione:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>fdformat /dev/fd0</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Il dischetto appena formattato non ha ancora una struttura; bisogna infatti crearci un <A NAME="index210"></A>file&nbsp;system adatto. Nel nostro caso si pu&ograve; utilizzare l'opzione <SAMP>vfat</SAMP> o <SAMP>msdos</SAMP>.</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mkfs -t msdos /dev/fd0</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Ora che il dischetto possiede un <A NAME="index211"></A>file&nbsp;system, per operarvi, occorre <A NAME="index212"></A>innestarlo al <A NAME="index213"></A>file&nbsp;system principale in uno dei suoi punti di <A NAME="index214"></A>montaggio. Se il punto di <A NAME="index215"></A>montaggio risulta essere <CODE>/mnt/floppy</CODE>, il comando per la procedura di <A NAME="index216"></A>innesto sar&agrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount /dev/fd0 /mnt/floppy</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Si procede quindi con l'operazione di copia:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp file.txt /mnt/floppy</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Infine si <A NAME="index217"></A>distacca il <A NAME="index218"></A>file&nbsp;system del dischetto da quello principale:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>umount /mnt/floppy</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.5.2)&nbsp;&nbsp;<A NAME="title50"></A><A NAME="anchor58"></A>
 Non riesco a <A NAME="index219"></A>montare dischetti con <A NAME="index220"></A>file&nbsp;system <A NAME="index221"></A>Ext2; se uso dischetti con <A NAME="index222"></A>file&nbsp;system Dos invece non ho problemi, perch&eacute;? <A NAME="index223"></A> </STRONG></P>

<P>Questo generalmente si verifica quando si cerca di <A NAME="index224"></A>innestare (<A NAME="index225"></A>montare) il <A NAME="index226"></A>file&nbsp;system di un dispositivo mediante il comando <SAMP>mount</SAMP> specificando solamente il nome del dispositivo contenente il <A NAME="index227"></A>file&nbsp;system da <A NAME="index228"></A>innestare o solamente il <A NAME="index229"></A>punto di montaggio. In tale maniera vengono richiamate le impostazioni riposte nel file <CODE>/etc/fstab</CODE>.</P>

<P>Nel file suddetto, nella riga riguardante <CODE>/dev/fd0</CODE>, in corrispondenza del campo in cui viene indicato il <A NAME="index230"></A>file&nbsp;system del dispositivo, sar&agrave; presente la voce <SAMP>msdos</SAMP> o <SAMP>vfat</SAMP>.</P>

<P>Occorre sostituirla con la voce <SAMP>ext2</SAMP> o qualora si desideri continuare a mantenere tale impostazione in <CODE>/etc/fstab</CODE> occorre procedere al <A NAME="index231"></A>montaggio del <A NAME="index232"></A>file&nbsp;system del dischetto manualmente, indicando tutte le opzioni necessarie:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount -t ext2 /dev/fd0 /mnt/floppy</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote18" NAME="footnote-ref18">(18)</A></SUP></P>

<P>Un'altra soluzione consiste nell'inserire un'altra riga nel file <CODE>/etc/fstab</CODE> contenente le indicazioni di <A NAME="index234"></A>montaggio dello stesso dispositivo contenente per&ograve; un <A NAME="index235"></A>file&nbsp;system diverso (in questo caso <SAMP>ext2</SAMP>) da <A NAME="index236"></A>innestare su un altro <A NAME="index237"></A>punto di montaggio.</P>

<P><STRONG>1.5.3)&nbsp;&nbsp;<A NAME="title51"></A><A NAME="anchor59"></A>
 Come si pu&ograve; <A NAME="index238"></A>montare una partizione con <A NAME="index239"></A>file&nbsp;system NTFS (<A NAME="index240"></A>MS-Windows NT)? <A NAME="index241"></A> <A NAME="index242"></A> </STRONG></P>

<P>Occorre ricompilare il <A NAME="index243"></A>kernel includendo l'opzione <EM>NTFS filesystem support (read only)</EM> per accedere alla partizione di <A NAME="index244"></A>MS-Windows NT.</P>

<P>Il seguente comando permette di <A NAME="index245"></A>montare la partizione:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount -t NTFS /dev/hd<VAR>x</VAR> /<VAR>y</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote19" NAME="footnote-ref19">(19)</A></SUP></P>

<P><STRONG>1.5.4)&nbsp;&nbsp;<A NAME="title52"></A><A NAME="anchor60"></A>
 Come si <A NAME="index248"></A>monta una partizione contenente MS-Windows 2000? <A NAME="index249"></A> <A NAME="index250"></A> <A NAME="index251"></A> <A NAME="index252"></A> </STRONG></P>

<P>Il <A NAME="index253"></A>file&nbsp;system di MS-Windows 2000 pu&ograve; essere di due tipi:</P>

<UL>

<LI>

<P>NTFS;</P>
</LI>

<LI>

<P>FAT32.</P>
</LI>
</UL>

<P>Nel primo caso, l'immagine del <A NAME="index254"></A>kernel che si utilizza deve contenere il supporto per il <A NAME="index255"></A>file&nbsp;system NTFS (questo supporto pu&ograve; essere compilato all'interno dell'immagine oppure pu&ograve; essere caricato mediante il modulo apposito). Una volta abilitato questo supporto, il comando per effettuare il <A NAME="index256"></A>montaggio &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount -t ntfs /dev/<VAR>x</VAR> /<VAR>y</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote20" NAME="footnote-ref20">(20)</A></SUP></P>

<P>Nel secondo invece, se la partizione di MS-Windows 2000 presenta un <A NAME="index259"></A>file&nbsp;system FAT32, allora il comando sar&agrave; il seguente:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount -t ntfs /dev/<VAR>x</VAR> /<VAR>y</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote21" NAME="footnote-ref21">(21)</A></SUP></P>

<P><STRONG>1.5.5)&nbsp;&nbsp;<A NAME="title53"></A><A NAME="anchor61"></A>
 Come si fa a dare agli utenti il permesso di montare il lettore dischetti e il lettore CD-ROM? <A NAME="index260"></A> <A NAME="index261"></A> </STRONG></P>

<P>Occorre modificare il file <CODE>/etc/fstab</CODE> inserendo nel terzultimo campo dei dispositivi <CODE>/dev/fd0</CODE> e <CODE>/dev/cdrom</CODE> quanto segue:</P>
<BLOCKQUOTE>

<PRE>users,noauto</PRE>

</BLOCKQUOTE>

<P>Ecco un estratto di un <CODE>/etc/fstab</CODE> che contiene tale configurazione:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cat /etc/fstab </CODE></STRONG>[<KBD>Invio</KBD>]</P>

<PRE># /etc/fstab: static file system information.
#
# &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;                   &lt;dump&gt; &lt;pass&gt;
/dev/hda2       /               ext2    defaults,errors=remount-ro  0       1
/dev/hda3       none            swap    sw                          0       0
proc            /proc           proc    defaults                    0       0
/dev/fd0        /floppy         auto    users,noauto                0       0
/dev/cdrom      /cdrom          iso9660 users,noauto                0       0
/dev/hdb7       /mnt/debian2.1  ext2    defaults,user,auto          0       0
/dev/hda1       /mnt/win95      vfat    defaults,user,auto          0       0</PRE>

<P><STRONG>1.5.6)&nbsp;&nbsp;<A NAME="title54"></A><A NAME="anchor62"></A>
 Ma cosa cambia se si mette <SAMP>user</SAMP> o <SAMP>users</SAMP> nei campi di <CODE>/etc/fstab</CODE>? <A NAME="index262"></A> <A NAME="index263"></A> </STRONG></P>

<P>La risposta la troviamo nelle <A NAME="index264"></A>pagine di manuale di <SAMP>mount</SAMP> (<EM>mount</EM>(8)):</P>
<BLOCKQUOTE>

<PRE>[...]
For more  details,  see  fstab(5).   Only  the  user  that
mounted  a  filesystem  can unmount it again.  If any user
should be able to unmount, then use users instead of  user
in the fstab line.
[...]

[...]
Per  ulteriori dettagli,  controllate  fstab(5).   Solamente
l'utente che  ha montato un  file&middot;system pu&ograve;  smontarlo.  Se
tutti gli utenti dovessero avere la possibilit&agrave; di smontarlo,
allora utilizzate  users al posto di user nella riga del file
fstab.
[...]</PRE>

</BLOCKQUOTE>

<P><STRONG>1.5.7)&nbsp;&nbsp;<A NAME="title55"></A><A NAME="anchor63"></A>
 Come si concedono tutti i permessi di una partizione ad ogni utente del sistema? <A NAME="index265"></A> <A NAME="index266"></A> </STRONG></P>

<P>Occorre indicare nel file <CODE>/etc/fstab</CODE> le opzioni <SAMP>user</SAMP>, <SAMP>quiet</SAMP> ed <SAMP>umask</SAMP>:</P>

<PRE>/dev/hda1   /mnt/msdos      vfat    quiet,umask=000 0   0</PRE>

<P>da <EM>mount</EM>(8):</P>
<BLOCKQUOTE>

<PRE>user   Permette ad un utente normale di montare  il
       file system. Questa opzione implica anche le
       opzioni noexec, nosuid, e nodev (finch&eacute;  ci&ograve;
       non  sia  cambiato  dal superuser usando, ad
       esempio,  la  seguente  riga   di   opzioni:
       user,exec,dev,suid).

quiet  Abilita il flag quiet.  Tentativi di chown o  chmod
       su  file  non restituiscono errori, sebbene fallis-
       cano. Usare con cautela!

umask=valore
       Imposta  l'umask  (la  bitmask dei permessi che non
       sono presenti). Il default &egrave; l'umask  del  processo
       corrente. Il valore va dato in ottale.</PRE>

</BLOCKQUOTE>

<P><STRONG>1.5.8)&nbsp;&nbsp;<A NAME="title56"></A><A NAME="anchor64"></A>
 <SAMP>No final new line in /etc/fstab</SAMP> <A NAME="index267"></A> <A NAME="index268"></A> </STRONG></P>

<P> Questo messaggio viene visualizzato quando manca un &lt;<EM>CR</EM>&gt; alla fine dell'ultima riga del file <CODE>/etc/fstab</CODE>. Occorre aprire il file per la modifica, posizionarsi alla fine dell'ultima riga, premere [<KBD>Invio</KBD>] e salvare. </P>

<P><STRONG>1.5.9)&nbsp;&nbsp;<A NAME="title57"></A><A NAME="anchor65"></A>
 Come si fa a montare automaticamente i dischi all'avvio? <A NAME="index269"></A> </STRONG></P>

<P>Il file <CODE>/etc/fstab</CODE> &egrave; un file di configurazione composto da righe. Ogni riga, oltre ad indicare quale dispositivo deve essere <A NAME="index270"></A>montato, dove deve essere <A NAME="index271"></A>agganciato al <A NAME="index272"></A>file&nbsp;system principale, di che tipo &egrave; (<SAMP>vfat</SAMP>, <SAMP>ext2</SAMP>, <SAMP>iso9660</SAMP>, <SAMP>ntfs</SAMP>, ecc.), presenta altre opzioni. Tra queste abbiamo l'opzione <SAMP>auto</SAMP>. Le righe che presentano tale opzione consentono al dispositivo in questione di venire <A NAME="index273"></A>montato automaticamente all'avvio del sistema, senza bisogno di alcun tipo di comando. Le partizioni che non devono essere <A NAME="index274"></A>montate automaticamente, presentano invece l'opzione <SAMP>noauto</SAMP> (il CD-ROM ad esempio) che &egrave; una delle opzioni comprese in <SAMP>default</SAMP>.</P>

<P>Inoltre, se un dispositivo &egrave; elencato in <CODE>/etc/fstab</CODE> ma non presenta l'opzione <SAMP>auto</SAMP>, sar&agrave; sufficiente impartire il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount <VAR>dispositivo</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount /<VAR>punto_di_montaggio</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per <A NAME="index275"></A>montare il dispositivo in questione, e sar&agrave; l'eseguibile <SAMP>mount</SAMP> a rilevare le opzioni necessarie dal file <CODE>/etc/fstab</CODE>.</P>

<P><STRONG>1.5.10)&nbsp;&nbsp;<A NAME="title58"></A><A NAME="anchor66"></A>
 Come &egrave; possibile montare le partizioni Dos/MS-Windows 9x (<A NAME="index276"></A>file&nbsp;system vfat)? <A NAME="index277"></A> <A NAME="index278"></A> </STRONG></P>

<P>Per <A NAME="index279"></A>montare le partizioni Dos/MS-Windows 9x occorre disporre di un'immagine del <A NAME="index280"></A>kernel che contenga il supporto per <A NAME="index281"></A>file&nbsp;system vfat.</P>

<P>Una volta ricompilato il <A NAME="index282"></A>kernel, o se si disponesse gi&agrave; di un'immagine con tale supporto, per montare le partizioni Dos/MS-Windows occorrer&agrave; indicare <SAMP>vfat</SAMP> come tipo di <A NAME="index283"></A>file&nbsp;system:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount -t vfat /<VAR>dispositivo</VAR> /<VAR> punto_di_montaggio</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.5.11)&nbsp;&nbsp;<A NAME="title59"></A><A NAME="anchor67"></A>
 Effettuando il <A NAME="index284"></A>login da un'altra console, si ottengono a volte numerosi messaggi relativi a dispositivi gi&agrave; <A NAME="index285"></A>montati. Come si possono eliminare? <A NAME="index286"></A> </STRONG></P>

<P>Si pu&ograve; evitare questo fenomeno indirizzando lo <A NAME="index287"></A>standard&nbsp;error su <CODE>/dev/null</CODE>. Il comando per montare i dispositivi in questione, risulter&agrave; cos&igrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mount /<VAR>dispositivo</VAR> /<VAR>punto_di_montaggio</VAR> 2&gt;/dev/null</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><SAMP>2&gt;</SAMP> &egrave; appunto il comando di reindirizzamento dello <A NAME="index288"></A>standard&nbsp;error.</P>

<P>Generalmente questo accade solo se il dispositivo o i dispositivi in questione, vengono <A NAME="index289"></A>montati a mano. <A NAME="index290"></A>Montare i dischi di frequente utilizzo mediante il file <CODE>/etc/fstab</CODE> risulta essere la modalit&agrave; pi&ugrave; corretta.</P>

<P><STRONG>1.5.12)&nbsp;&nbsp;<A NAME="title60"></A><A NAME="anchor68"></A>
 Come &egrave; possibile accedere a partizioni GNU/Linux (<A NAME="index291"></A>file&nbsp;system <A NAME="index292"></A>Ext2) da MS-Windows? <A NAME="index293"></A> <A NAME="index294"></A> <A NAME="index295"></A> <A NAME="index296"></A> </STRONG></P>

<P>Si possono usare <A NAME="index297"></A>ext2&nbsp;tools <SUP><A HREF="amministrazione_del_sistema.html#footnote22" NAME="footnote-ref22">(22)</A></SUP> <A NAME="index298"></A>FSDEXT2 <SUP><A HREF="amministrazione_del_sistema.html#footnote23" NAME="footnote-ref23">(23)</A></SUP> <A NAME="index299"></A>Explore2fs <SUP><A HREF="amministrazione_del_sistema.html#footnote24" NAME="footnote-ref24">(24)</A></SUP> .</P>

<P>I pacchetti possono essere prelevati rispettivamente presso &lt;<EM><A HREF="ftp://ftp.pg.gda.pl/pub/linux/util/fsdext2.zip">ftp://ftp.pg.gda.pl/pub/linux/util/fsdext2.zip</A></EM>&gt; e &lt;<EM><A HREF="http://uranus.it.swin.edu.au/~jn/linux/explore2fs.htm">http://uranus.it.swin.edu.au/~jn/linux/explore2fs.htm</A></EM>&gt;.</P>

<P>Il primo &egrave; molto sicuro e si utilizza da riga di comando, il secondo permette di <A NAME="index300"></A>montare partizioni <A NAME="index301"></A>Ext2 come se fossero dischi Dos, solo che &egrave; molto pericoloso perch&eacute; molte volte blocca i canali dell'interfaccia IDE/EIDE.</P>

<H2>1.6 &nbsp; <A NAME="title61"></A><A NAME="anchor69"></A>
 <A NAME="index302"></A>LILO <A NAME="index303"></A> </H2>

<P><STRONG>1.6.1)&nbsp;&nbsp;<A NAME="title62"></A><A NAME="anchor70"></A>
 Installazione e configurazione di <A NAME="index304"></A>LILO <A NAME="index305"></A> </STRONG></P>

<P>Il file di configurazione di <A NAME="index306"></A>LILO <SUP><A HREF="amministrazione_del_sistema.html#footnote25" NAME="footnote-ref25">(25)</A></SUP> &egrave; <CODE>/etc/lilo.conf</CODE>. Segue un esempio di <CODE>/etc/lilo.conf</CODE> di un sistema che presenta due dischi fissi, il primo contenente MS-Windows ed il secondo contenente GNU/Linux. <A NAME="index307"></A>LILO verr&agrave; installato sul primo disco e far&agrave; partire in maniera predefinita MS-Windows dal momento che &egrave; il primo dei due sistemi operativi indicati.</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
other=/dev/hda1
        label=dos
        table=/dev/hda
image=/boot/vmlinuz-2.2.5-15
        label=linux
        root=/dev/hdb1
        read-only</PRE>

</BLOCKQUOTE>

<P>Al <A NAME="index308"></A>prompt di <A NAME="index309"></A>LILO si avranno a disposizione 5 secondi (<VAR>timeout</VAR> = 50) per scegliere il sistema da avviare. Per avviare GNU/Linux occorrer&agrave; inserire <SAMP>linux</SAMP> come dichiarato nella variabile <VAR>label</VAR> del secondo sistema operativo.</P>

<P>Si deve ricordare che <EM>non</EM> basta modificare il file <CODE>/etc/lilo.conf</CODE> per rendere effettive le modifiche. Occorrer&agrave; invece lanciare l'eseguibile <SAMP>lilo</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote26" NAME="footnote-ref26">(26)</A></SUP></P>

<P><STRONG>1.6.2)&nbsp;&nbsp;<A NAME="title63"></A><A NAME="anchor71"></A>
 Come posso avviare Linux con un dischetto di avvio, in maniera veloce? <A NAME="index310"></A> </STRONG></P>

<P>I dischetti di avvio generalmente contengono, oltre al gestore degli avvii (<EM>boot&nbsp;loader</EM>), anche l'immagine del <A NAME="index311"></A>kernel per cui l'operazione di caricamento del sistema risulta molto lenta. Si pu&ograve; in ogni caso accelerare tale procedura mantenendo solo il gestore degli avvii (<EM>boot&nbsp;loader</EM>) su dischetto, ad esempio <A NAME="index312"></A>LILO, e utilizzando un'immagine del <A NAME="index313"></A>kernel presente sul <A NAME="index314"></A>file&nbsp;system principale.</P>

<P>Per fare questo occorre modificare il file <CODE>/etc/lilo.conf</CODE> che dovr&agrave; risultare simile a questo:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/fd0     (l'avvio avverr&agrave; da dischetto)
vga=3
compact
read-only
prompt
timeout=0         (l'avvio avverr&agrave; immediatamente
                   dopo l'accesso al dischetto)

image = /vmlinuz  (indica il percorso dell' immagine del kernel)

root = /dev/hdb2  (indica la partizione che sar&agrave; il file
                  system principale in questo caso &egrave; la
                  seconda partizione del secondo disco della
                  prima catena IDE/EIDE)

label = linux </PRE>

</BLOCKQUOTE>

<P>Occorre a questo punto inserire un dischetto formattato nel lettore dei dischetti, e lanciare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Al termine si riavvia il sistema assicurandosi di avere riabilitato nel BIOS l'avvio da dischetto. Pu&ograve; capitare, anche se &egrave; molto raro, che il <A NAME="index315"></A>kernel non si avvii. In tal caso, dopo avere verificato l'esattezza dei dati inseriti in <CODE>/etc/lilo.conf</CODE>, si pu&ograve; provare a eliminare la riga <SAMP>compact</SAMP> perch&eacute; su alcuni sistemi pu&ograve; non funzionare. Questo comporta solamente un leggerissimo rallentamento della fase di avvio.</P>

<P>Il fatto di potere provare l'avvio del sistema da dischetto permette di provare in tutta sicurezza i procedimenti di avvii multipli dei sistemi operativi. Capita spesso di avere delle difficolt&agrave; nel configurare un sistema che debba poter avviare alternativamente Linux, MS-Windows 9x e MS-Windows NT. Una volta soddisfatti delle configurazioni provate su dischetto, baster&agrave; sostituire <SAMP>/dev/fd0</SAMP> con <SAMP>/dev/hda</SAMP> e rilanciare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.6.3)&nbsp;&nbsp;<A NAME="title64"></A><A NAME="anchor72"></A>
 Come si installa <A NAME="index316"></A>LILO in una posizione diversa da quella attuale? </STRONG></P>

<P>Il file <CODE>/etc/lilo.conf</CODE> contiene la riga:</P>
<BLOCKQUOTE>

<PRE>boot=</PRE>

</BLOCKQUOTE>

<P>Questa indica su quale dispositivo o su quale partizione dovr&agrave; essere installato <A NAME="index317"></A>LILO. Indicando <CODE>/dev/hda</CODE> <A NAME="index318"></A>LILO verr&agrave; installato nel settore di avvio (<EM>boot</EM>) del primo disco fisso IDE/EIDE; indicando invece <CODE>/dev/hdb2</CODE>, verr&agrave; installato nella seconda partizione del secondo disco fisso della prima catena IDE/EIDE. In questo ultimo caso, la partizione deve essere resa avviabile (mediante il comando <SAMP>a</SAMP> di <SAMP>fdisk</SAMP> o l'apposita casella di <SAMP>cfdisk</SAMP>).</P>

<P>Dopo aver fatto le modifiche, <A NAME="index319"></A>LILO deve essere rilanciato mediante il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.6.4)&nbsp;&nbsp;<A NAME="title65"></A><A NAME="anchor73"></A>
 Come si elimina <A NAME="index320"></A>LILO? <A NAME="index321"></A> <A NAME="index322"></A> <A NAME="index323"></A> </STRONG></P>

<P>Da un sistema con sistema operativo Dos o MS-Windows:</P>

<P class="command"><CODE>C:\&gt;&nbsp;</CODE><STRONG><CODE>fdisk /mbr</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure, dopo avere avviato da un disco di ripristino di MS-Windows:</P>

<P class="command"><CODE>C:\&gt;&nbsp;</CODE><STRONG><CODE>sys c:</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Da Linux invece:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -U</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure si pu&ograve; utilizzare <SAMP>dd</SAMP> per riscrivere il MBR originario grazie al file di <A NAME="index324"></A>backup che <A NAME="index325"></A>LILO crea al momento della sua installazione. Questo file generalmente risiede in <CODE>/boot</CODE> e ha di solito un nome tipo <CODE>boot.xxxx</CODE> (<VAR>xxxx</VAR> pu&ograve; assumere diversi valori). Il comando per riscrivere il MBR &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>dd if=boot.<VAR>xxxxx</VAR> of =/dev/hda bs=446 count=1</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.6.5)&nbsp;&nbsp;<A NAME="title66"></A><A NAME="anchor74"></A>
 Come si fa a scegliere quale sistema operativo avviare in maniera predefinita con <A NAME="index326"></A>LILO? <A NAME="index327"></A> </STRONG></P>

<P>Il sistema operativo che si avvia in maniera predefinita &egrave; il primo di quelli indicati nel file <CODE>/etc/lilo.conf</CODE>. Se ad esempio si dispone di un <CODE>/etc/lilo.conf</CODE> come il seguente, il sistema operativo predefinito sar&agrave; GNU/Linux</P>
<BLOCKQUOTE>

<PRE>boot=/dev/sdb1
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/vmlinuz
        label=linux
        root=/dev/sdb1
        initrd=/boot/initrd
        read-only
other=/dev/sda1
        label=dos
        table=/dev/sda</PRE>

</BLOCKQUOTE>

<P>Se invece si ha l'intenzione di rendere MS-Windows il sistema predefinito, occorrer&agrave; semplicemente invertire le sezioni <SAMP>image</SAMP> e <SAMP>other</SAMP>:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/sdb1
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
other=/dev/sda1
        label=dos
        table=/dev/sda
image=/boot/vmlinuz
        label=linux
        root=/dev/sdb1
        initrd=/boot/initrd
        read-only</PRE>

</BLOCKQUOTE>

<P>Ogni cambiamento effettuato dovr&agrave; comunque essere sempre seguito dal comando <SAMP>lilo</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.6.6)&nbsp;&nbsp;<A NAME="title67"></A><A NAME="anchor75"></A>
 Come &egrave; possibile con <A NAME="index328"></A>LILO gestire pi&ugrave; distribuzioni GNU/Linux sullo stesso sistema? </STRONG></P>

<P>Assumendo che il <CODE>/etc/lilo.conf</CODE> sia originariamente simile a questo:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/bzImage
        label=linux.debian
        root=/dev/hda1
        read-only</PRE>

</BLOCKQUOTE>

<P>si deduce che <A NAME="index329"></A>LILO &egrave; per ora in grado di avviare una sola distribuzione. Per permettere a <A NAME="index330"></A>LILO di avviare altre distribuzioni, sar&agrave; necessario aggiungere tante sezioni <SAMP>image</SAMP> quante saranno le ulteriori distribuzioni da avviare.</P>

<P>Ogni sezione <SAMP>image</SAMP> indicher&agrave; il nome dell'immagine del <A NAME="index331"></A>kernel da avviare, il suo percorso, la partizione su cui montare il <A NAME="index332"></A>file&nbsp;system principale (<EM>root</EM>).</P>

<P>Se si volesse quindi aggiungere una sezione che possa invocare una seconda distribuzione, presente su <CODE>/dev/hda4</CODE>, si dovr&agrave; aggiungere il seguente codice:</P>
<BLOCKQUOTE>

<PRE>image=/boot/vmlinuz-2.2.5-15
      label=linux.redhat
      root=/dev/hda4
      read-only</PRE>

</BLOCKQUOTE>

<P>Questo presume che occorre copiare nella directory <CODE>/boot</CODE> della prima distribuzione, l'immagine del <A NAME="index333"></A>kernel della seconda; la directory <CODE>/lib/modules/x</CODE> <SUP><A HREF="amministrazione_del_sistema.html#footnote27" NAME="footnote-ref27">(27)</A></SUP> deve essere copiata nella directory <CODE>/lib/modules/</CODE> della prima distribuzione. <SAMP>linux.redhat</SAMP> sar&agrave; l'etichetta che servir&agrave; ad invocare la seconda distribuzione.</P>

<P>Ecco quindi il <CODE>/etc/lilo.conf</CODE> completo:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/bzImage
      label=linux.debian
      root=/dev/hda1
      read-only
image=/boot/vmlinuz-2.2.5-15
      label=linux.redhat
      root=/dev/hda4
      read-only</PRE>

</BLOCKQUOTE>

<P><STRONG>1.6.7)&nbsp;&nbsp;<A NAME="title68"></A><A NAME="anchor76"></A>
 Come si deve configurare <A NAME="index335"></A>LILO se sulla macchina &egrave; installato anche MS-Windows NT? <A NAME="index336"></A> </STRONG></P>

<P>Assumendo che sul primo disco sia installato GNU/Linux e MS-Windows ad esempio sulle partizioni <CODE>/dev/hda1</CODE> e <CODE>/dev/hda2</CODE> e che MS-Windows NT sia installato sul disco fisso <A NAME="index337"></A>slave, il file <CODE>/etc/lilo.conf</CODE> dovr&agrave; essere configurato come nell'esempio seguente:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=30
other=/dev/hda1
        label=dos
        table=/dev/hda
image=/boot/vmlinuz-2.2.5-15
        label=linux
        root=/dev/hda2
        read-only
other=/dev/hdb
        label=nt
        map-drive=0x80
           to = 0x81
        map-drive=0x81
           to = 0x80</PRE>

</BLOCKQUOTE>

<P><A NAME="index338"></A>LILO verr&agrave; quindi installato sul <A NAME="index339"></A>MBR del primo disco fisso. La configurazione ora descritta, permetter&agrave; di scegliere al <A NAME="index340"></A>prompt di <A NAME="index341"></A>LILO uno dei tre sistemi operativi mediante le tre etichette:</P>

<OL>

<LI>

<P>dos</P>
</LI>

<LI>

<P>linux</P>
</LI>

<LI>

<P>nt</P>
</LI>
</OL>

<P>La scelta di uno dei primi due sistemi operativi comporter&agrave; il loro avvio in maniera convenzionale. La scelta invece di MS-Windows NT comporter&agrave; lo scambio logico dei codici dell'identificazione dei dischi. Essi sono tipicamente 80<SUB>16</SUB> per il primo disco IDE <A NAME="index342"></A>master) e 81<SUB>16</SUB> per il secondo (<A NAME="index343"></A>slave). La porzione:</P>
<BLOCKQUOTE>

<PRE>map-drive=0x80
   to = 0x81
map-drive=0x81
   to = 0x80</PRE>

</BLOCKQUOTE>

<P>effettuer&agrave; questo scambio permettendo a MS-Windows NT di trovarsi su un disco <A NAME="index344"></A>master.</P>

<P>Considerando questa possibilit&agrave; &egrave; bene provvedere, ad installare MS-Windows NT o su un disco montato come <A NAME="index345"></A>master o su un disco <A NAME="index346"></A>slave dopo aver provveduto a disabilitare dal BIOS il disco fisso <A NAME="index347"></A>master contenente gli altri sistemi operativi. Dopo l'installazione, si dovr&agrave; reimpostare come <A NAME="index348"></A>slave il disco in oggetto.</P>

<P><STRONG>1.6.8)&nbsp;&nbsp;<A NAME="title69"></A><A NAME="anchor77"></A>
 Come si configura <A NAME="index349"></A>LILO se si vuole installare una distribuzione GNU/Linux sul primo disco fisso e MS-Windows su un altro? <A NAME="index350"></A> </STRONG></P>

<P>MS-Windows per avviarsi deve risiedere nel primo disco fisso della prima catena IDE/EIDE; se questo non &egrave; possibile si deve ricorrere alle opzioni <SAMP>map-drive</SAMP> di <A NAME="index351"></A>LILO. Mediante queste opzioni, si effettuer&agrave; lo scambio logico dei codici dell'identificazione dei dischi. Essi sono 80<SUB>16</SUB> per il disco <A NAME="index352"></A>master della prima catena IDE/EIDE e 81<SUB>16</SUB> per il disco <A NAME="index353"></A>slave della stessa catena e cos&igrave; via. Lo scambio permette di rendere <A NAME="index354"></A>master dischi <A NAME="index355"></A>slave e viceversa.</P>

<P>Con il <CODE>/etc/lilo.conf</CODE> configurato in questo modo:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
default=linux
prompt
timeout=20
read-only
root=/dev/hda1
image=/vmlinuz
        label=linux
other=/dev/hdb1
        label=win
        map-drive=0x80
        to=0x81
        map-drive=0x81
        to=0x80</PRE>

</BLOCKQUOTE>

<P>MS-Windows potr&agrave; essere avviato normalmente seppure esso non risieda nel primo disco fisso della prima catena IDE/EIDE.</P>

<P><STRONG>1.6.9)&nbsp;&nbsp;<A NAME="title70"></A><A NAME="anchor78"></A>
 Se si reinstalla MS-Windows, il MBR contenente <A NAME="index356"></A>LILO verr&agrave; sovrascritto; come posso prevenire questo problema? </STRONG></P>

<P>Si consiglia in genere, prima di trovarsi in situazioni spiacevoli di replicare su dischetto il proprio <A NAME="index357"></A>LILO una volta soddisfatti del suo funzionamento. Per fare questo, basta sostituire, all'interno del file <CODE>/etc/lilo.conf</CODE> queste righe:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b</PRE>

</BLOCKQUOTE>

<P>con queste altre:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/fd0
compact
read-only</PRE>

</BLOCKQUOTE>

<P>e rilanciare <SAMP>lilo</SAMP> con un dischetto inserito nel lettore:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In tal modo, qualora il MBR (<EM>Master Boot Record</EM>) venisse sovrascritto, si sar&agrave; in grado di avviare il sistema esattamente come prima ma da dischetto. A quel punto non rester&agrave; altro che rilanciare <SAMP>lilo</SAMP> assicurandosi che le impostazioni di <SAMP>boot</SAMP>, <SAMP>map</SAMP> e <SAMP>install</SAMP> siano corrette. </P>

<P><STRONG>1.6.10)&nbsp;&nbsp;<A NAME="title71"></A><A NAME="anchor79"></A>
 Come si pu&ograve; impostare una <A NAME="index358"></A>password per <A NAME="index359"></A>LILO? <A NAME="index360"></A> </STRONG></P>

<P>L'indicazione della <A NAME="index361"></A>password per <A NAME="index362"></A>LILO deve essere posta nel file <CODE>/etc/lilo.con</CODE>. La sintassi &egrave; semplice ed &egrave; indicata dalla <A NAME="index363"></A>pagina di manuale di <EM>lilo.conf </EM>(1):</P>
<BLOCKQUOTE>

<PRE>password=password</PRE>

</BLOCKQUOTE>

<P>La password pu&ograve; essere inserita sia nella sezione con le impostazioni generali che nelle singole sezioni specifiche di ogni sistema operativo.</P>

<P><STRONG>1.6.11)&nbsp;&nbsp;<A NAME="title72"></A><A NAME="anchor80"></A>
 Perch&eacute; digitare &laquo;linux 1&raquo; al <A NAME="index364"></A>prompt di <A NAME="index365"></A>LILO consente l'accesso al sistema senza richiesta di <A NAME="index366"></A>password? <A NAME="index367"></A> </STRONG></P>

<P>Tutto dipende dal fatto che per poter dare questo comando bisogna avere l'accesso fisico al sistema. Un <A NAME="index368"></A>server di solito, al contrario di macchine casalinghe, si trova in luoghi protetti il cui accesso &egrave; riservato a poche persone. Riavviare un <A NAME="index369"></A>server &egrave; un operazione a volte possibile esclusivamente via hardware. Ecco quindi che la possibilit&agrave; di dare un comando a <A NAME="index370"></A>LILO &egrave; una facolt&agrave; riservata spesso solo a coloro che possono accedere fisicamente alla macchina. E' possibile in ogni caso impostare una <A NAME="index371"></A>password aggiungendo la riga:</P>
<BLOCKQUOTE>

<PRE>password=password</PRE>

</BLOCKQUOTE>

<P>al file <CODE>/etc/lilo.conf</CODE>; in questo modo anche se il sistema verr&agrave; riavviato, ci sar&agrave; un controllo al <A NAME="index372"></A>prompt di <A NAME="index373"></A>LILO. Inoltre, se viene aggiunta anche la riga:</P>
<BLOCKQUOTE>

<PRE>restricted</PRE>

</BLOCKQUOTE>

<P> <A NAME="index374"></A>LILO chieder&agrave; la <A NAME="index375"></A>password ogni volta che si cercher&agrave; di fornirgli degli argomenti. Dal momento che la <A NAME="index376"></A>password viene scritta in chiaro, il file dovr&agrave; essere accessibile solo da <SAMP>root</SAMP>. </P>

<P><STRONG>1.6.12)&nbsp;&nbsp;<A NAME="title73"></A><A NAME="anchor81"></A>
 <SAMP>Error 0x10</SAMP> - visualizzazione di ripetuti 01 con <A NAME="index377"></A>LILO <A NAME="index378"></A> <A NAME="index379"></A> </STRONG></P>

<P>In questi casi si deve controllare che:</P>

<UL>

<LI>

<P>il disco fisso contenente GNU/Linux sia impostato nel BIOS con la modalit&agrave; LBA attivata;</P>
</LI>

<LI>

<P>la partizione radice (<EM>root</EM>) risieda entro il cilindro 1024. Se cos&igrave; non &egrave;, <A NAME="index380"></A>LILO non funziona. <SUP><A HREF="amministrazione_del_sistema.html#footnote28" NAME="footnote-ref28">(28)</A></SUP></P>
</LI>
</UL>

<P><STRONG>1.6.13)&nbsp;&nbsp;<A NAME="title74"></A><A NAME="anchor82"></A>
 Da cosa pu&ograve; dipendere se si riceve la segnalazione della presenza di un virus nel settore di avvio (<EM>boot</EM>)? <A NAME="index382"></A> </STRONG></P>

<P> Qualora all'avvio del sistema, dopo che sia stato scelto il sistema operativo desiderato mediante <A NAME="index383"></A>LILO, si presenti un messaggio che indichi che &egrave; stato rilevato un virus nel settore di avvio (<EM>boot</EM>), occorre disattivare dal BIOS, il controllo dei virus. Il BIOS confonde <A NAME="index384"></A>LILO con un virus. Se dopo tale operazione, il problema persistesse &egrave; probabile allora che ci sia un virus. </P>

<P><STRONG>1.6.14)&nbsp;&nbsp;<A NAME="title75"></A><A NAME="anchor83"></A>
 Ci sono delle valide alternative a <A NAME="index385"></A>LILO? <A NAME="index386"></A> <A NAME="index387"></A> <A NAME="index388"></A> <A NAME="index389"></A> <A NAME="index390"></A> <A NAME="index391"></A> <A NAME="index392"></A> </STRONG></P>

<P><A NAME="index393"></A>LILO &egrave; solo uno dei tanti gestori degli avvii (<EM>boot&nbsp;loader</EM>). Tra gli altri gestori liberi ricordiamo:</P>

<UL>

<LI>

<P><A NAME="index394"></A>GRUB; <SUP><A HREF="amministrazione_del_sistema.html#footnote29" NAME="footnote-ref29">(29)</A></SUP></P>
</LI>

<LI>

<P><A NAME="index395"></A>GAG; <SUP><A HREF="amministrazione_del_sistema.html#footnote30" NAME="footnote-ref30">(30)</A></SUP></P>
</LI>

<LI>

<P><A NAME="index396"></A>Smart BootManager; <SUP><A HREF="amministrazione_del_sistema.html#footnote31" NAME="footnote-ref31">(31)</A></SUP></P>
</LI>

<LI>

<P><A NAME="index397"></A>Psiko. <SUP><A HREF="amministrazione_del_sistema.html#footnote32" NAME="footnote-ref32">(32)</A></SUP></P>
</LI>
</UL>

<TABLE ID="anchor84" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="9.jpg" ALT="figure/gagn1" WIDTH="566" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor84">1.5</A>. Una schermata di GAG. </P>

</TD></TR>
</TABLE>

<TABLE ID="anchor85" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="10.jpg" ALT="figure/gagn2" WIDTH="566" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor85">1.6</A>. Una schermata di GAG. </P>

</TD></TR>
</TABLE>

<TABLE ID="anchor86" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="11.jpg" ALT="figure/gagn3" WIDTH="566" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor86">1.7</A>. Una schermata di GAG. </P>

</TD></TR>
</TABLE>

<P>Alternativamente, si deve sempre ricordare che &egrave; possibile avviare GNU/Linux tramite un dischetto di avvio (<EM>boot</EM>) o tramite <A NAME="index398"></A>Loadlin.</P>

<H2>1.7 &nbsp; <A NAME="title76"></A><A NAME="anchor87"></A>
 <A NAME="index399"></A>Kernel <A NAME="index400"></A> </H2>

<P><STRONG>1.7.1)&nbsp;&nbsp;<A NAME="title77"></A><A NAME="anchor88"></A>
 Come si pu&ograve; sapere quale &egrave; l'ultima versione del <A NAME="index401"></A>kernel? <A NAME="index402"></A> <A NAME="index403"></A> </STRONG></P>

<P>Si pu&ograve; fare mediante <SAMP>finger</SAMP>:</P>

<P class="command"><CODE>[bigpaul@localhost /~]$ </CODE><STRONG><CODE>finger @linux.kernel.org</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>o:</P>

<P class="command"><CODE>[bigpaul@localhost /~]$ </CODE><STRONG><CODE>finger @finger.kernel.org</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>e verr&agrave; restituito qualcosa simile a questo:</P>

<PRE>[linux.kernel.org]

        The latest stable version of the Linux kernel is:     2.2.12
        The latest beta version of the Linux kernel is:       2.3.18
        The latest prepatch (alpha) version *appears* to be:  none</PRE>

<TABLE ID="anchor89" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="12.jpg" ALT="figure/finger_kernel" WIDTH="566" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor89">1.8</A>. Il comando finger. </P>

</TD></TR>
</TABLE>

<P><STRONG>1.7.2)&nbsp;&nbsp;<A NAME="title78"></A><A NAME="anchor90"></A>
 Come si visualizza la versione del <A NAME="index404"></A>kernel in uso? <A NAME="index405"></A> <A NAME="index406"></A> </STRONG></P>

<P>Si visualizza con <SAMP>uname</SAMP> seguito dall'opzione <VAR>-n</VAR>:</P>

<P class="command"><CODE>[bigpaul@localhost /~]$&nbsp;</CODE><STRONG><CODE>uname -r</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.7.3)&nbsp;&nbsp;<A NAME="title79"></A><A NAME="anchor91"></A>
 Come &egrave; possibile conoscere il nome del file dell'immagine del <A NAME="index407"></A>kernel che &egrave; stata caricata? <A NAME="index408"></A> </STRONG></P>

<P>Esiste la variabile <VAR>BOOT_IMAGE</VAR> di <A NAME="index409"></A>LILO che contiene il file dell'immagine del <A NAME="index410"></A>kernel che &egrave; stata caricata. Purtroppo essa viene azzerata da qualche processo, per cui dopo il <A NAME="index411"></A>login risulta vuota. Bisogna usarla prima di <SAMP>depmod</SAMP> in <CODE>rc.sysinit</CODE> per visualizzarne il valore.</P>

<P>Si deve ricordare comunque che con:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>uname -a</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>viene restituita una riga di questo tipo:</P>
<BLOCKQUOTE>

<PRE>Linux server 2.2.13 #4 Sun Nov 21 14:13:37 CET 1999 i586 unknown</PRE>

</BLOCKQUOTE>

<P>da cui &egrave; possibile capire almeno la versione del <A NAME="index412"></A>kernel utilizzato.</P>

<P><STRONG>1.7.4)&nbsp;&nbsp;<A NAME="title80"></A><A NAME="anchor92"></A>
 Come si ricompila il <A NAME="index413"></A>kernel? <A NAME="index414"></A> <A NAME="index415"></A> </STRONG></P>

<P>La metodica qui di seguito spiegata si riferisce sia alla ricompilazione di un <A NAME="index416"></A>kernel gi&agrave; in utilizzo, sia alla ricompilazione di una nuova versione.</P>

<P>Qualora si intenda ricompilare il <A NAME="index417"></A>kernel gi presente nel sistema, occorre assicurarsi che nella directory <CODE>/usr/src</CODE> sia generalmente presente un <A NAME="index418"></A>collegamento simbolico chiamato <SAMP>linux</SAMP> che punti alla directory che contiene tutti i sorgenti del <A NAME="index419"></A>kernel installato. A volte non &egrave; presente tale <A NAME="index420"></A>collegamento simbolico ma c'&egrave; direttamente la directory <CODE>linux</CODE>. Qualora non sia presente nessuno dei due, occorre individuare la directory contenente i sorgenti e creare in <CODE>/usr/src</CODE> un <A NAME="index421"></A>collegamento simbolico chiamato <SAMP>linux</SAMP> che vi punti.</P>

<P>Se si deve invece ricompilare una nuova versione del <A NAME="index422"></A>kernel, si deve copiare il pacchetto in <CODE>/usr/src</CODE> e successivamente si deve decomprimerlo mediante:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cd /usr/src/</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>tar -zxvf pacchetto.tar.gz</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In questo modo verr&agrave; creata una nuova directory chiamata <CODE>linux</CODE> dove sono presenti i sorgenti del nuovo <A NAME="index423"></A>kernel. Se la directory creata dal processo di decompressione non si chiama <CODE>linux</CODE>, si dovr&agrave; rinominarla:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mv <VAR>directory_creata</VAR> linux</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>o creare un <A NAME="index424"></A>collegamento simbolico simbolico ad essa:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ln -s <VAR>directory_creata</VAR> linux</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Ora occorre entrare nella directory <CODE>/usr/src/linux</CODE> (<A NAME="index425"></A>collegamento simbolico o directory che sia) e si devono eseguire questi comandi:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make mrproper</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>(Questo comando cancella il file <CODE>.config</CODE> riazzerando tutte le opzioni selezionate nell'ultimo tentativo di ricompilazione.) <SUP><A HREF="amministrazione_del_sistema.html#footnote33" NAME="footnote-ref33">(33)</A></SUP></P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make menuconfig</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>se si vuole una schermata interattiva testuale, oppure, per una schermata grafica:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make xconfig</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<TABLE ID="anchor93" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="13.jpg" ALT="figure/make_xconfig" WIDTH="566" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor93">1.9</A>. make xconfig. </P>

</TD></TR>
</TABLE>

<P>A questo punto si devono scegliere tutte le componenti che si desiserano utilizzare e il supporto per le periferiche di cui si dispone. A scelta ultimata, si salva la configurazione (che verr&agrave; salvata nel file <CODE>.config</CODE>) e si impartiscono i seguenti comandi:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make dep</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make clean</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make bzImage</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>che possono essere anche inclusi tutti insieme in un unico comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make dep clean bzImage</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Conviene fare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make bzImage</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>e non:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make zImage</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>perch&eacute; il secondo comando crea un'immagine del <A NAME="index427"></A>kernel pi&ugrave; grande che il <A NAME="index428"></A>LILO pu&ograve; non accettare; per cui conviene subito compilare con l'opzione <SAMP>bzImage</SAMP>.</P>

<P>Se alcune componenti sono state dichiarate come modulo, va dato il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make modules</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>e subito dopo:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make modules_install</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>A questo punto l'immagine del <A NAME="index429"></A>kernel sar&agrave; stata creata nella directory <CODE>/usr/src/linux/arch/i386/boot</CODE> con il nome <CODE>bzImage</CODE>.</P>

<P>L'immagine va copiata nella directory <CODE>/boot/</CODE>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp bzImage /boot</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Si deve in seguito modificare opportunamente il file <CODE>/etc/lilo.conf</CODE> indicando il nuovo nome dell'immagine. Nella sezione corrispondente al sistema GNU/Linux si deve inserire il nome del file dell'immagine dopo:</P>
<BLOCKQUOTE>

<PRE>image=</PRE>

</BLOCKQUOTE>

<P> Se ad esempio non si &egrave; rinominato il file dell'immagine, si dovr&agrave; inserire la riga seguente: </P>
<BLOCKQUOTE>

<PRE>image=bzImage</PRE>

</BLOCKQUOTE>

<P>Le modifiche effettuate al file <CODE>/etc/lilo.conf</CODE> non saranno effettive fino a che non si lancia <SAMP>lilo</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>/sbin/lilo</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>A questo punto al riavvio, partir&agrave; la nuova versione del <A NAME="index430"></A>kernel.</P>

<P><STRONG>1.7.5)&nbsp;&nbsp;<A NAME="title81"></A><A NAME="anchor94"></A>
 Come funziona la ricompilazione del <A NAME="index431"></A>kernel in una distribuzione GNU/Linux <A NAME="index432"></A>Debian? <A NAME="index433"></A> <A NAME="index434"></A> <A NAME="index435"></A> </STRONG></P>

<P>In una distribuzione GNU/Linux <A NAME="index436"></A>Debian, la gestione del <A NAME="index437"></A>kernel presenta una particolarit&agrave; sebbene sia sempre possibile operare in maniera convenzionale come indicato nella <A NAME="index438"></A>LDR <A HREF="ldr4.html#anchor92">1.7.4</A>. La particolarit&agrave; consiste nella possibilit&agrave; di creare pacchetti <A NAME="index439"></A>Debian del proprio <A NAME="index440"></A>kernel con il vantaggio quindi di potere installare e disinstallare rapidamente diversi pacchetti del <A NAME="index441"></A>kernel e specialmente di potere facilmente utilizzare la stessa immagine su pi&ugrave; macchine.</P>

<P>Per fare ci&ograve;, &egrave; necessario installare i pacchetti <SAMP>kernel-package</SAMP> e <SAMP>bin86</SAMP>. La descrizione del pacchetto <SAMP>kernel-package</SAMP> &egrave; la seguente:</P>
<BLOCKQUOTE>

<PRE>This package provides the capability to create a debian kernel-image
package by just running make-kpkg kernel_image in a kernel source directory
tree.  It can also build the kernel source package as a debian file, the
kernel headers package. In general, this package is very useful if you need
to create a custom kernel, if, for example, the default kernel does not
support some of your hardware, or you wish a leaner, meaner kernel.

If you are running on an intel x86 platform, and you wish to compile a 
custom kernel (why else are you considering this package?), then you may 
need the package bin86 as well.  (This is not required on other platforms).

Questo pacchetto consente di poter creare un pacchetto debian contenente
l'immagine del kernel. Esso pu&ograve; inoltre creare un file debian,
il pacchetto delle intestazioni del kernel, da un pacchetto
del sorgente del kernel. In generale, questo pacchetto &egrave; molto utile
se avete bisogno di creare kernel personalizzati, se ad esempio, il
kernel predefinito non gestisce una parte del vostro hardware, o se aveste
bisogno di un kernel pi&ugrave; piccolo.

Se state utilizzando una piattaforma intel x86, e vorreste compilare
un kernel personalizzato (altrimenti perch&eacute; dovreste considerare questo pacchetto?),
allora avrete bisogno anche del pacchetto bin86. (Non richiesto
per altre piattaforme).</PRE>

</BLOCKQUOTE>

<P>Una volta installati i suddetti pacchetti, si seguono tutti i passaggi indicati nella LDR <A HREF="ldr4.html#anchor92">1.7.4</A> fino a <SAMP>make menuconfig</SAMP> (o <SAMP>make xconfig</SAMP>). Non serviranno quindi i seguenti comandi: <SAMP>make dep</SAMP>, <SAMP>make clean</SAMP>, <SAMP>make zlilo</SAMP>, <SAMP>make modules</SAMP>, <SAMP>make modules install</SAMP>.</P>

<P>A questo punto, per creare il pacchetto personalizzato, si deve impartire il seguente comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make-kpkg nome</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote34" NAME="footnote-ref34">(34)</A></SUP></P>

<P>Nella directory esterna ai sorgenti del <A NAME="index442"></A>kernel sar&agrave; ora presente un pacchetto <SAMP>deb</SAMP> contenente il <A NAME="index443"></A>kernel compilato e tutti i moduli necessari.</P>

<P>Disponendo ora di un pacchetto <SAMP>deb</SAMP>, lo si pu&ograve; installare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>dpkg -i /usr/src/nome</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per verificarne il funzionamento, si dovr&agrave; riavviare il sistema:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>shutdown -r now</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Oltre al pacchetto del <A NAME="index444"></A>kernel, <SAMP>make-kpkg</SAMP> &egrave; in grado di generare pacchetti <A NAME="index445"></A>Debian particolari:</P>

<UL>

<LI>

<P><SAMP>kernel-headers</SAMP> (<CODE>.h</CODE> per compilare programmi dipendenti dal <A NAME="index446"></A>kernel)</P>
</LI>

<LI>

<P><SAMP>kernel-source</SAMP> (crea un pacchetto con i sorgenti del <A NAME="index447"></A>kernel)</P>
</LI>

<LI>

<P><SAMP>kernel-doc</SAMP> (documentazione del <A NAME="index448"></A>kernel)</P>
</LI>
</UL>

<TABLE BORDER="3" WIDTH="100%">
<TR><TD>

<P>Occorre prestare attenzione a <A NAME="index449"></A>Dselect, che potrebbe sovrascrivere il proprio <A NAME="index450"></A>kernel. Per ovviare a tale problema, premere il tasto [<KBD>=</KBD>] sul pacchetto <SAMP>kernel-image</SAMP> installato; in questo modo <A NAME="index451"></A>Dselect o <SAMP>dpkg</SAMP> non potr&agrave; sostituirlo.</P>

</TD></TR>
</TABLE>

<P><STRONG>1.7.6)&nbsp;&nbsp;<A NAME="title82"></A><A NAME="anchor95"></A>
 Cosa succede se copio la nuova immagine del <A NAME="index452"></A>kernel in <CODE>/boot</CODE> ma l&igrave; c'&egrave; la vecchia immagine? <A NAME="index453"></A> </STRONG></P>

<P>Non &egrave; importante che l'immagine del <A NAME="index454"></A>kernel abbia sempre lo stesso nome. Si possono infatti copiare nella directory <CODE>/boot/</CODE> diversi file immagine. Sar&agrave; allora compito del <A NAME="index455"></A>gestore degli avvii (<EM>boot&nbsp;manager</EM>) richiamare le immagini desiderate all'avvio del sistema.</P>

<P>Se ad esempio disponiamo di un file <CODE>/etc/lilo.conf</CODE> configurato nel seguente modo:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/bzImage-2.2.0
      label=predefinto
      root=/dev/hda1
      read-only
image=/boot/bzImage-2.2.5-15
      label=prova
      root=/dev/hda1
      read-only</PRE>

</BLOCKQUOTE>

<P>nella directory <CODE>/boot/</CODE> saranno presenti i due file immagine <CODE>bzImage-2.2.0</CODE> e <CODE>bzImage-2.2.5-15</CODE> che saranno invocati dal <A NAME="index456"></A>prompt di <A NAME="index457"></A>LILO mediante le etichette <SAMP>predefinito</SAMP> e <SAMP>prova</SAMP>. Si pu&ograve; notare che le due voci puntano alla stessa directory radice per cui si fornisce la scelta di due immagini del <A NAME="index458"></A>kernel diverse per lo stesso sistema GNU/Linux.</P>

<P><STRONG>1.7.7)&nbsp;&nbsp;<A NAME="title83"></A><A NAME="anchor96"></A>
 Quanto spazio occupa il sorgente del <A NAME="index459"></A>kernel? Si pu&ograve; cancellare dopo la ricompilazione? <A NAME="index460"></A> </STRONG></P>

<P>I sorgenti decompressi occupano circa <STRONG>60-70&nbsp;Mibyte</STRONG>.</P>

<P><STRONG>1.7.8)&nbsp;&nbsp;<A NAME="title84"></A><A NAME="anchor97"></A>
 Come si applica una <A NAME="index461"></A>patch al <A NAME="index462"></A>kernel? <A NAME="index463"></A> <A NAME="index464"></A> <A NAME="index465"></A> <A NAME="index466"></A> </STRONG></P>

<P>L'applicazione di una <A NAME="index467"></A>patch al <A NAME="index468"></A>kernel risulta una operazione molto comoda in quanto consente di evitare lo scaricamento dell'intero sorgente che &egrave; generalmente di grosse dimensioni. </P>

<P>Per applicare una <A NAME="index469"></A>patch al <A NAME="index470"></A>kernel, si deve innanzitutto copiare il <A NAME="index471"></A>file di modifiche (<EM>patch</EM>) all'interno della directory <CODE>/usr/src/</CODE>. Entrati quindi nella stessa directory mediante il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cd /usr/src</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>applichiamo il <A NAME="index472"></A>file di modifiche (<EM>patch</EM>):</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>bzip2 -dc nomefile.bz2 |patch -p1</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>o:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>gzip -dc nomefile.gz |patch -p0</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>se &egrave; in formato <CODE>.gz</CODE>.</P>

<P>Oltre a questa metodica, si pu&ograve; ricorrere all'eseguibile <SAMP>patch-kernel</SAMP> presente nella directory <CODE>/usr/src/linux/scripts/</CODE>. Con questa metodica, come nella precedente, si copiano i <A NAME="index473"></A>file di modifiche (<EM>patch</EM>) nella directory <CODE>/usr/src/</CODE> e si lancia l'eseguibile <SAMP>patch-kernel</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cd /usr/src/linux/scripts/patch-kernel</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><SAMP>patch-kernel</SAMP> &egrave; in pratica uno <A NAME="index474"></A>script che provvede a cercare i <A NAME="index475"></A>file di modifiche (<EM>patch</EM>) nella directory <CODE>/usr/src/</CODE> e ad applicarli.</P>

<P><STRONG>1.7.9)&nbsp;&nbsp;<A NAME="title85"></A><A NAME="anchor98"></A>
 Dopo avere applicato una <A NAME="index476"></A>patch al <A NAME="index477"></A>kernel, la procedura di ricompilazione subisce dei cambiamenti? <A NAME="index478"></A> <A NAME="index479"></A> </STRONG></P>

<P>No, dopo l'applicazione del <A NAME="index480"></A>file di modifiche (<EM>patch</EM>) tutti i file sono stati aggiornati e il sorgente del <A NAME="index481"></A>kernel che ne risulta &egrave; identico a quello della versione alla quale si &egrave; effettuato l'aggiornamento.</P>

<P>In ogni caso &egrave; bene aggiornare la configurazione con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make oldconfig</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.7.10)&nbsp;&nbsp;<A NAME="title86"></A><A NAME="anchor99"></A>
 Durante la ricompilazione del <A NAME="index482"></A>kernel, viene segnalata la mancanza di <SAMP>wish</SAMP>, perch&eacute;? <A NAME="index483"></A> <A NAME="index484"></A> <A NAME="index485"></A> </STRONG></P>

<P><A NAME="index486"></A>Wish non &egrave; altro che l'interprete <A NAME="index487"></A>Tcl. Occorre quindi installare il pacchetto <SAMP>tk</SAMP> (toolkit Tk) che in ogni caso necessita del pacchetto <SAMP>tcl</SAMP> (Tool Command Language - TCL).</P>

<P>I pacchetti ora descritti vengono di solito forniti con qualsiasi distribuzione.</P>

<P><STRONG>1.7.11)&nbsp;&nbsp;<A NAME="title87"></A><A NAME="anchor100"></A>
 Dopo avere ricompilato il <A NAME="index488"></A>kernel, come &egrave; possibile provare senza rischio l'immagine appena creata? <A NAME="index489"></A> </STRONG></P>

<TABLE BORDER="3" WIDTH="100%">
<TR><TD>

<P>La seguente procedura presume che la ricompilazione sia gi&agrave; stata effettuata (<A HREF="ldr4.html#anchor92">1.7.4</A>) e che l'immagine del <A NAME="index490"></A>kernel rinominata in <CODE>bzImage-prova</CODE> si trovi nella directory <CODE>/boot/</CODE>.</P>

</TD></TR>
</TABLE>

<P>Il file <CODE>/etc/lilo.conf</CODE> attuale dovrebbe somigliare a questo:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/bzImage
        label=linux
        root=/dev/hda3
        read-only
(eventuale altro sistema operativo)</PRE>

</BLOCKQUOTE>

<P><CODE>bzImage</CODE> (o qualsiasi altro nome) &egrave; il nome dell'immagine del <A NAME="index491"></A>kernel attuale e <CODE>/dev/hda3</CODE> &egrave; la partizione radice.</P>

<P>Se come si &egrave; detto la nuova immagine del <A NAME="index492"></A>kernel &egrave; stata copiata in <CODE>/boot/</CODE>, dovremo aggiungere al file <CODE>lilo.conf</CODE>, un'altra sezione:</P>
<BLOCKQUOTE>

<PRE>image=/boot/bzImage-prova
        label=prova
        root=/dev/hda3
        read-only</PRE>

</BLOCKQUOTE>

<P>Il file <CODE>lilo.conf</CODE> risulter&agrave; quindi:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
image=/boot/bzImage
        label=linux
        root=/dev/hda3
        read-only
image=/boot/bzImage-prova
        label=prova
        root=/dev/hda3
        read-only
(eventuale altro sistema operativo)</PRE>

</BLOCKQUOTE>

<P>Per rendere operative le modifiche apportate a <CODE>lilo.conf</CODE>, si dovr&agrave; rilanciare <A NAME="index493"></A>LILO:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote35" NAME="footnote-ref35">(35)</A></SUP></P>

<P>Al riavvio del sistema, al <A NAME="index494"></A>prompt di <A NAME="index495"></A>LILO digitando <SAMP>prova</SAMP> verr&agrave; avviata la nuova immagine del <A NAME="index496"></A>kernel. Qualora la nuova immagine non funzionasse a dovere, sar&agrave; sempre possibile utilizzare l'etichetta <SAMP>linux</SAMP> (in ogni caso la predefinita) per caricare la vecchia immagine del <A NAME="index497"></A>kernel.</P>

<P>Prima di eliminare la vecchia immagine del <A NAME="index498"></A>kernel, &egrave; consigliato un certo periodo di prova. Una volta sicuri del funzionamento della nuova configurazione sar&agrave; possibile rimuovere la sezione:</P>
<BLOCKQUOTE>

<PRE>image=/boot/bzImage
        label=linux
        root=/dev/hda3
        read-only</PRE>

</BLOCKQUOTE>

<P>dal file <CODE>/etc/lilo.conf</CODE> e sostituire <SAMP>prova</SAMP> con <SAMP>linux</SAMP>. Ricordarsi sempre, dopo qualsiasi modifica al file di configurazione di <A NAME="index499"></A>LILO, di impartire:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>lilo -v</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per rendere effettive le modifiche.</P>

<P><STRONG>1.7.12)&nbsp;&nbsp;<A NAME="title88"></A><A NAME="anchor101"></A>
 Si pu&ograve; trasportare l'immagine del <A NAME="index500"></A>kernel da una distribuzione ad un'altra? </STRONG></P>

<P>Se l'immagine del <A NAME="index501"></A>kernel da spostare include il supporto per caratteristiche del sistema ricevente, sar&agrave; un'operazione possibile. Per poter spostare il <A NAME="index502"></A>kernel sono necessari:</P>

<UL>

<LI>

<P>il file <CODE>bzImage</CODE> (l'immagine del <A NAME="index503"></A>kernel, presente generalmente in <CODE>/boot/</CODE>, pu&ograve; assumere qualsiasi nome);</P>
</LI>

<LI>

<P>la directory <CODE>/usr/src/linux/include/</CODE>;</P>
</LI>

<LI>

<P>la directory <CODE>/lib/modules/x.x.xx</CODE> relativa alla versione del <A NAME="index504"></A>kernel che si sta spostando.</P>
</LI>
</UL>

<P><SAMP>kernel-package</SAMP> (<A HREF="ldr4.html#anchor94">1.7.5</A>) di una distribuzione <A NAME="index505"></A>Debian GNU/Linux consente di creare un pacchetto <SAMP>deb</SAMP> di tutte le componenti di un <A NAME="index506"></A>kernel. L'utilizzo quindi dello stesso <A NAME="index507"></A>kernel, su pi&ugrave; sistemi, risulter&agrave; quindi pi&ugrave; semplice e versatile.</P>

<P><STRONG>1.7.13)&nbsp;&nbsp;<A NAME="title89"></A><A NAME="anchor102"></A>
 A cosa serve il file <CODE>initrd-x.x.xx.img</CODE> nella directory <CODE>/boot</CODE>? <A NAME="index508"></A> <A NAME="index509"></A> </STRONG></P>

<P>La guida <EM>The Official <A NAME="index510"></A>Red&nbsp;Hat Linux Reference Guide</EM> riporta quanto segue:</P>

<P><EM>An initrd image is needed for loading your SCSI module at boot time. The shell script /sbin/mkinitrd can build a proper initrd image for your machine if the following conditions are met:</EM></P>

<P><EM>The loopback block device is available.</EM></P>

<P><EM>The /etc/conf.modules file has a line for your SCSI adapter; for example: alias scsi_hostadapter BusLogic</EM></P>

<P><EM>Viene richiesta un'immagine initrd per caricare il vostro modulo SCSI all'avvio. Lo <A NAME="index511"></A>script /sbin/mkinitrd pu&ograve; costruire un'immagine initrd corretta per la vostra macchina se si presentano le seguenti condizioni:</EM></P>

<P><EM>&Egrave; disponibile il dispositivo di blocco del loopback</EM></P>

<P><EM>Il file /etc/conf.modules presenta una riga per l'adattatore SCSI; ad esempio: alias scsi_hostadapter BusLogic</EM></P>

<P><CODE>initrd-x.x.xx.img</CODE> &egrave; quindi un'immagine utilizzata per caricare il modulo SCSI all'avvio. La si pu&ograve; creare con il comando <SAMP>/sbin/mkinitrd</SAMP>.</P>

<P><STRONG>1.7.14)&nbsp;&nbsp;<A NAME="title90"></A><A NAME="anchor103"></A>
 Il <A NAME="index512"></A>kernel di Linux &egrave; in grado di gestire periferiche <A NAME="index513"></A>USB? <A NAME="index514"></A> <A NAME="index515"></A> </STRONG></P>

<P> Occorre avere come minimo un <A NAME="index516"></A>kernel 2.2.14 con il <EM>backport</EM> oppure un 2.3.<VAR>xx</VAR>. </P>

<P><STRONG>1.7.15)&nbsp;&nbsp;<A NAME="title91"></A><A NAME="anchor104"></A>
 Come &egrave; possibile ottimizzare il <A NAME="index517"></A>kernel per macchine con processore Pentium? <A NAME="index518"></A> </STRONG></P>

<P>Lo si pu&ograve; fare modificando il makefile che si trova in <CODE>/usr/src/linux</CODE>. In pratica bisogna cercare le voci:</P>

<UL>

<LI>

<P>HOSTCFLAGS</P>
</LI>

<LI>

<P>MAKE</P>
</LI>

<LI>

<P>CFLAGS </P>
</LI>
</UL>

<P>e modificare il loro contenuto nel seguente modo:</P>

<PRE>HOSTCFLAGS      =-Wall -Wstrict-prototypes -O3 -march=pentium -mcpu=pentium -ffa
st-math -funroll-loops -fomit-frame-pointer -fforce-mem -fforce-addr -malign-dou
ble -fno-exceptions

MAKE    =make -j 4

CFLAGS := $(CPPFLAGS) -Wall -Wstrict-prototypes -O3 -march=pentium -mcpu=pentium
 -ffast-math -funroll-loops -fomit-frame-pointer -fforce-mem -fforce-addr -malig
n-double -fno-exceptions</PRE>

<P>(nella versione 2.3.47 si trova CFLAGS := $(CPPFLAGS) mentre fino alla 2.2.14 c'&egrave; solo CFLAGS =).</P>

<P>&Egrave; da notare che si deve utilizzare come compilatore <SAMP>pgcc</SAMP> (un compilatore gcc ottimizzato per processori pentium).</P>

<P><STRONG>1.7.16)&nbsp;&nbsp;<A NAME="title92"></A><A NAME="anchor105"></A>
 Dove si trovano i sorgenti del <A NAME="index519"></A>kernel? <A NAME="index520"></A> </STRONG></P>

<P>I sorgenti del <A NAME="index521"></A>kernel si trovano generalmente nella directory <CODE>/usr/src/linux</CODE>.</P>

<P><STRONG>1.7.17)&nbsp;&nbsp;<A NAME="title93"></A><A NAME="anchor106"></A>
 Perch&eacute; sopraggiungono dei problemi relativi a <SAMP>ipfwadm</SAMP> con i <A NAME="index522"></A>kernel della serie 2.2.<VAR>x</VAR>? <A NAME="index523"></A> <A NAME="index524"></A> <A NAME="index525"></A> </STRONG></P>

<P> Perch&eacute; dai <A NAME="index526"></A>kernel della serie 2.2.<VAR>x</VAR>, non si usa pi&ugrave; <SAMP>ipfwadm</SAMP> ma <SAMP>ipchains</SAMP>.</P>

<P><STRONG>1.7.18)&nbsp;&nbsp;<A NAME="title94"></A><A NAME="anchor107"></A>
 Perch&eacute; nei <A NAME="index527"></A>kernel della serie 2.2.<VAR>x</VAR> non &egrave; presente l'opzione <EM>drop source-routed frames</EM>? <A NAME="index528"></A> </STRONG></P>

<P>La risposta &egrave; tratta dal file <CODE>/usr/src/linux/Documentation/Changes</CODE>:</P>
<BLOCKQUOTE>

<PRE>In 2.0.x the kernel could be configured to drop source routed IP
packets via a compile time configuration option.  In 2.2.x, this has
been replaced by a sysctl.</PRE>

</BLOCKQUOTE>
<BLOCKQUOTE>

<PRE>Nei kernel della serie 2.0.x ci potrebbe essere la configurazione
che (ri)lasci i pacchetti IP sorgenti (originali) instradati
mediante un'opzione di configurazione del tempo di compilazione.
Nella serie 2.2.x, questa caratteristica &egrave; stata  sostituita da
una sysctl.</PRE>

</BLOCKQUOTE>

<P><STRONG>1.7.19)&nbsp;&nbsp;<A NAME="title95"></A><A NAME="anchor108"></A>
 Come si verifica quali sono i pacchetti RPM del <A NAME="index529"></A>kernel installati? <A NAME="index530"></A> </STRONG></P>

<P>Con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>rpm -qa | grep kernel | sort</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.7.20)&nbsp;&nbsp;<A NAME="title96"></A><A NAME="anchor109"></A>
 Come si possono memorizzare gli eventuali messaggi (di errore e non) che possono risultare dalla procedura di ricompilazione del <A NAME="index531"></A>kernel? </STRONG></P>

<P>Durante la ricompilazione del <A NAME="index532"></A>kernel, possono verificarsi numerose problematiche che vengono di solito visualizzate mediante messaggi. Con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make dep;make clean;make bzImage &gt; LOG-k 2&gt; ERR-k;make modules &gt; LOG-m 2&gt; ERR-m</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>sar&agrave; possibile registrare nei file <CODE>LOG-k</CODE> e <CODE>LOG-m</CODE> gli avvertimenti e gli errori verificatesi durante la ricompilazione del <A NAME="index533"></A>kernel e l'installazione dei moduli.</P>

<P>Risulter&agrave; quindi pi&ugrave; facile individuare i problemi e le cause degli errori.</P>

<P><STRONG>1.7.21)&nbsp;&nbsp;<A NAME="title97"></A><A NAME="anchor110"></A>
 Perch&eacute; dopo la ricompilazione del <A NAME="index534"></A>kernel c'&egrave; una diminuzione dello spazio nel disco? <A NAME="index535"></A> </STRONG></P>

<P>La ricompilazione del <A NAME="index536"></A>kernel comporta una diminuzione dello spazio su disco di circa 20&nbsp;-&nbsp;30&nbsp;Mibyte.</P>

<P>Per recuperare lo spazio, occorre dare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make clean</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>dopo essersi posizionati in <CODE>/usr/src/linux</CODE>.</P>

<P><STRONG>1.7.22)&nbsp;&nbsp;<A NAME="title98"></A><A NAME="anchor111"></A>
 Dove devo copiare il file <CODE>System.map</CODE> e che operazioni devo compiere su di esso? <A NAME="index537"></A> <A NAME="index538"></A> </STRONG></P>

<P>Il file <CODE>System.map</CODE> si viene a trovare nella directory <CODE>/usr/src/linux/</CODE> alla fine del processo di ricompilazione del <A NAME="index539"></A>kernel e va copiato nella directory <CODE>/boot/</CODE>. Per ogni immagine del <A NAME="index540"></A>kernel, esiste un <CODE>System.map</CODE> diverso. Occorre quindi provvedere, nel caso si desideri utilizzare pi&ugrave; di un'immagine del <A NAME="index541"></A>kernel nel proprio sistema, a sostituire i vari file <CODE>System.map</CODE> a seconda dell'immagine del <A NAME="index542"></A>kernel che si sta utilizzando.</P>

<P>Un modo per fare questo &egrave; rinominare i vari <CODE>System.map</CODE> in <CODE>System.map.x.y.z</CODE><SUP><A HREF="amministrazione_del_sistema.html#footnote36" NAME="footnote-ref36">(36)</A></SUP>, e creare ogni volta un <A NAME="index544"></A>collegamento simbolico che punti al <CODE>System.map.x.y.z</CODE> desiderato.</P>

<P>Se ad esempio si &egrave; appena ricompilato il <A NAME="index545"></A>kernel 2.2.12 occorrer&agrave; copiare in <CODE>/boot/</CODE> l'immagine del <A NAME="index546"></A>kernel e il file <CODE>System.map</CODE> rinominando quest'ultimo in <CODE>System.map.2.2.12</CODE>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp /usr/src/linux/arch/i386/boot/bzImage /boot/</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>e:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp /usr/src/linux/System.map /boot/System.map.2.2.12</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Occorrer&agrave; quindi creare il collegamento simbolico in <CODE>/boot</CODE>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ln -s /boot/System.map.2.2.12 /boot/System.map</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<PRE>lrwxrwxrwx   1 root     root           19 Jun  5 14:38 System.map -&gt; System.map.2.2.12
-rw-r--r--   1 root     root       186846 Jun  5 14:30 System.map-2.2.12</PRE>

<P><STRONG>1.7.23)&nbsp;&nbsp;<A NAME="title99"></A><A NAME="anchor112"></A>
 Come si possono gestire pi&ugrave; file <CODE>System.map</CODE> quando si dispone di pi&ugrave; immagini del <A NAME="index547"></A>kernel? <A NAME="index548"></A> <A NAME="index549"></A> </STRONG></P>

<P>Per far s&igrave; che il sistema carichi all'avvio i file <CODE>/boot/System.map</CODE> corretti a seconda dell'immagine del <A NAME="index550"></A>kernel che si &egrave; scelto di caricare, si dovr&agrave; modificare il file <CODE>/etc/rc.d/init.d/syslog</CODE> (<CODE>/etc/init.d/sysklogd</CODE> in una distribuzione <A NAME="index551"></A>Debian).</P>

<P>La riga:</P>
<BLOCKQUOTE>

<PRE>daemon klogd -k /boot/System.map</PRE>

</BLOCKQUOTE>

<P>dovr&agrave; essere sostituita con:</P>
<BLOCKQUOTE>

<PRE>daemon klogd -k /boot/System.map-`uname -r`</PRE>

</BLOCKQUOTE>

<P>Ora si devono copiare in <CODE>/boot</CODE> i file <CODE>System.map</CODE> dei rispettivi <A NAME="index552"></A>kernel, rinominandoli nel seguente modo:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mv System.map System.map-x.y.z</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote37" NAME="footnote-ref37">(37)</A></SUP></P>

<P><STRONG>1.7.24)&nbsp;&nbsp;<A NAME="title100"></A><A NAME="anchor113"></A>
 Perch&eacute; il sistema mi avverte che la versione del file <CODE>System.map</CODE> &egrave; sbagliata? <A NAME="index555"></A> <A NAME="index556"></A> <A NAME="index557"></A> </STRONG></P>

<P> Ogni immagine del kernel, ha un <CODE>System.map</CODE> che vi si riferisce. Probabilmente in <CODE>/boot/</CODE> c'&egrave; un <CODE>System.map</CODE> che non si riferisce all'immagine del <A NAME="index558"></A>kernel caricata. Questo di solito accade se si dimentica di copiare il file <CODE>System.map</CODE> presente in <CODE>/usr/src/linux/</CODE> in <CODE>/boot/</CODE> al termine della ricompilazione del <A NAME="index559"></A>kernel. </P>

<P>Qualora si intenda utilizzare sempre e solo l'ultima immagine creata dal <A NAME="index560"></A>kernel, conviene rendere <CODE>/boot/System.map</CODE> un <A NAME="index561"></A>collegamento simbolico a <CODE>/usr/src/linux/System.map</CODE>; in questo modo ogni volta che il <A NAME="index562"></A>kernel verr&agrave; aggiornato, il collegamento far&agrave; sempre riferimento all'ultima versione di <CODE>System.map</CODE> e non verranno pi&ugrave; segnalati problemi di incongruenza.</P>

<P><STRONG>1.7.25)&nbsp;&nbsp;<A NAME="title101"></A><A NAME="anchor114"></A>
 <SAMP>as86 Command not found</SAMP> <A NAME="index563"></A> <A NAME="index564"></A> <A NAME="index565"></A> </STRONG></P>

<P>Questo errore si verifica nella fase di creazione dell'immagine del <A NAME="index566"></A>kernel, dopo il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make bzImage</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In genere viene visualizzato qualcosa del genere:</P>
<BLOCKQUOTE>

<PRE>make[1]: Entering directory '/linux/arch/i386/boot'
as -0 -a -o bootsect.o bootsect.s
make[1]: as86: command not found
make[1]: *** [bootsect.o] Error 127
make[1]: Leaving directory '/linux/arch/i386/boot'
make: *** [zImage] Error 2</PRE>

</BLOCKQUOTE>

<P> Il problema si presenta perch&eacute; manca il pacchetto <SAMP>bin86</SAMP> di cui <SAMP>as86</SAMP> fa parte. </P>

<P><STRONG>1.7.26)&nbsp;&nbsp;<A NAME="title102"></A><A NAME="anchor115"></A>
 <SAMP>/dev/lp0 :not detected</SAMP> <A NAME="index567"></A> <A NAME="index568"></A> </STRONG></P>

<P>Spesso dopo l'aggiornamento del <A NAME="index569"></A>kernel da una versione 2.0.<VAR>x</VAR> ad una 2.2.<VAR>x</VAR>, capita di ricevere segnalazioni analoghe alla seguente:</P>
<BLOCKQUOTE>

<PRE>/dev/lp0 :not detected</PRE>

</BLOCKQUOTE>

<P>Se non viene riconosciuta la porta parallela pu&ograve; dipendere dal fatto che in <CODE>/etc/conf.modules</CODE> manca la riga riguardante il modulo <CODE>parport_pc.o</CODE>. Occorre quindi aggiungere al file suddetto le seguenti righe:</P>
<BLOCKQUOTE>

<PRE>alias parport_lowlevel parport_pc
options parport_pc io=0x378,0x278 irq=7,auto</PRE>

</BLOCKQUOTE>

<P>modificando opportunamente gli indirizzi con quelli del proprio sistema.</P>

<P><STRONG>1.7.27)&nbsp;&nbsp;<A NAME="title103"></A><A NAME="anchor116"></A>
 <SAMP>signal 11</SAMP> <A NAME="index570"></A> <A NAME="index571"></A> </STRONG></P>

<P>Se durante operazioni abbastanza impegnative per il sistema (la ricompilazione del <A NAME="index572"></A>kernel ad esempio), si ricevono messaggi quali:</P>
<BLOCKQUOTE>

<PRE>Internal compiler error: program cc1 got fatal signal 11&lt;/em&gt;</PRE>

</BLOCKQUOTE>

<P>&Egrave; bene prendere in considerazione il fatto che ci possano essere dei problemi di malfunzionamento della RAM. Potrebbe essere difettosa.</P>

<P><STRONG>1.7.28)&nbsp;&nbsp;<A NAME="title104"></A><A NAME="anchor117"></A>
 <SAMP>No setup Signature found</SAMP> <A NAME="index573"></A> <A NAME="index574"></A> </STRONG></P>

<P>Questo messaggio generalmente appare non appena l'immagine del <A NAME="index575"></A>kernel comincia ad essere caricata. Esso &egrave; la manifestazione del fatto che l'immagine del <A NAME="index576"></A>kernel non &egrave; stata predisposta ad utilizzare il <A NAME="index577"></A>file&nbsp;system principale desiderato. A tale scopo si utilizza il programma <SAMP>rdev</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>rdev /boot/bzImage /dev/<VAR>partizione</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Occorrer&agrave; sostituire <CODE>/boot/bzImage</CODE> con la posizione dell'immagine del <A NAME="index578"></A>kernel all'interno del <A NAME="index579"></A>file&nbsp;system (<CODE>/boot/vmlinuz</CODE>, <CODE>/boot/vmlinuz-2.2.9</CODE>, <CODE>/boot/zImage</CODE>, ecc.). <VAR>partizione</VAR> dovr&agrave; essere sostituita dal nome del dispositivo della partizione radice.</P>

<H2>1.8 &nbsp; <A NAME="title105"></A><A NAME="anchor118"></A>
 Moduli </H2>

<P><STRONG>1.8.1)&nbsp;&nbsp;<A NAME="title106"></A><A NAME="anchor119"></A>
 Cosa si deve fare per i moduli dopo la ricompilazione del <A NAME="index580"></A>kernel? <A NAME="index581"></A> <A NAME="index582"></A> <A NAME="index583"></A> </STRONG></P>

<P>I moduli devono essere installati e lo si fa mediante il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make modules modules_install</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>dopo avere dato:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>make bzImage</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Questo comando crea la directory <CODE>/lib/modules/x.y.z</CODE>. <SUP><A HREF="amministrazione_del_sistema.html#footnote38" NAME="footnote-ref38">(38)</A></SUP></P>

<P><STRONG>1.8.2)&nbsp;&nbsp;<A NAME="title107"></A><A NAME="anchor120"></A>
 Come si possono caricare i moduli del <A NAME="index585"></A>kernel all'avvio? <A NAME="index586"></A> </STRONG></P>

<P>Se ad esempio si intende caricare il modulo <CODE>ip_masq_ftp.o</CODE> ad ogni avvio del sistema invece di impartire ogni volta:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>modprobe ip_masq_ftp</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>&egrave; necessario inserire la riga:</P>
<BLOCKQUOTE>

<PRE>/sbin/modprobe ip_masq_ftp.o</PRE>

</BLOCKQUOTE>

<P>all'interno del file <CODE>/etc/rc.d/rc.local</CODE> o nei file corrispondenti delle diverse distribuzioni.</P>

<P><STRONG>1.8.3)&nbsp;&nbsp;<A NAME="title108"></A><A NAME="anchor121"></A>
 <SAMP>modprobe: can't locate module...</SAMP> <A NAME="index587"></A> </STRONG></P>

<P>Se nel file <CODE>/var/log/messages</CODE> sono presenti messaggi simili a questi:</P>

<P><SAMP>May 7 20:59 linuxfaq.it modprobe: can't locate module ppp-compress-21</SAMP></P>

<P><SAMP>May 7 20:59 linuxfaq.it modprobe: can't locate module ppp-compress-26</SAMP></P>

<P><SAMP>May 7 20:59 linuxfaq.it modprobe: can't locate module ppp-compress-24</SAMP></P>

<P>per rimuoverli &egrave; necessario inserire le seguenti righe nel file <CODE>/etc/modules.conf</CODE>:</P>
<BLOCKQUOTE>

<PRE>alias ppp-compress-21 bsd-comp
alias ppp-compress-26 ppp_deflate
alias ppp-compress-24 ppp_deflate</PRE>

</BLOCKQUOTE>

<H2>1.9 &nbsp; <A NAME="title109"></A><A NAME="anchor122"></A>
 Configurazione del sistema </H2>

<P><STRONG>1.9.1)&nbsp;&nbsp;<A NAME="title110"></A><A NAME="anchor123"></A>
 Come &egrave; possibile mantenere sulla propria macchina pi&ugrave; di una distribuzione GNU/Linux? <A NAME="index588"></A> <A NAME="index589"></A> </STRONG></P>

<P>Verr&agrave; qui spiegato come poter gestire attraverso <A NAME="index590"></A>LILO L'avvio di due distribuzioni GNU/Linux installate sulla stessa macchina. Come esempio si prender&agrave; in considerazione l'ipotesi di poter avviare una distribuzione GNU/Linux <A NAME="index591"></A>Debian e una <A NAME="index592"></A>Red&nbsp;Hat. </P>

<P>Nel file <CODE>/etc/lilo.conf</CODE> , dovranno essere presenti due sezioni distinte, una per <A NAME="index593"></A>Debian e una per <A NAME="index594"></A>Red&nbsp;Hat.</P>

<P>All'interno della directory <CODE>/boot/</CODE> della distribuzione da cui si impartir&agrave; <SAMP>lilo</SAMP>, ammettiamo che sia <A NAME="index595"></A>Debian ad esempio, dovranno essere presenti tutte e due le immagini del <A NAME="index596"></A>kernel con i rispettivi <CODE>System.map</CODE>. Questi ultimi dovranno essere rinominati in <CODE>System.map.x.y.z</CODE> in cui <VAR>x</VAR>, <VAR>y</VAR> e <VAR>z</VAR> identificano la versione del <A NAME="index597"></A>kernel cui si riferiscono. Inoltre, in <CODE>/lib/modules/</CODE> della stessa distribuzione <A NAME="index598"></A>Debian, dovranno essere copiate le directory dei moduli di <A NAME="index599"></A>Red&nbsp;Hat. In pratica la directory <CODE>x.y.z/</CODE> presente in <CODE>/lib/modules/</CODE> della distribuzione <A NAME="index600"></A>Red&nbsp;Hat, dovr&agrave; essere copiata all'interno della directory <CODE>/lib/modules/</CODE> della distribuzione <A NAME="index601"></A>Debian.</P>

<P>Il file <CODE>/etc/lilo.conf</CODE> assumer&agrave; questo aspetto:</P>
<BLOCKQUOTE>

<PRE>boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
password=**********
restricted
default=linux
image=/boot/vmlinuz-2.2.15
        label=debian
        root=/dev/hda2
        read-only
image=/boot/vmlinuz-2.2.12
        label=redhat
        root=/dev/hdc5
        read-only</PRE>

</BLOCKQUOTE>

<P>Da questo file si deduce che:</P>

<UL>

<LI>

<P><A NAME="index602"></A>LILO verr&agrave; installato sulla prima partizione del primo disco della catena IDE/EIDE;</P>
</LI>

<LI>

<P><A NAME="index603"></A>LILO mostrer&agrave; il <A NAME="index604"></A>prompt per 5 secondi prima di avviare la distribuzione <A NAME="index605"></A>Debian presente sulla seconda partizione del primo disco della catena IDE/EIDE;</P>
</LI>

<LI>

<P>le etichette per avviare le due distribuzioni sono rispettivamente <SAMP>debian</SAMP> e <SAMP>redhat</SAMP>;</P>
</LI>

<LI>

<P>la partizione radice della distribuzione <A NAME="index606"></A>Red&nbsp;Hat si trova nella quinta partizione del terzo disco della catena IDE/EIDE;</P>
</LI>
</UL>

<P>Per verificare tutte le impostazioni prima di avviare <SAMP>lilo</SAMP> controlliamo le directory dei moduli:</P>

<P class="command"><CODE>[bigpaul@localhost]$&nbsp;</CODE><STRONG><CODE>ls /lib/modules</CODE></STRONG>[<KBD>Invio</KBD>]</P>
<BLOCKQUOTE>

<PRE>total 2
drwxr-xr-x   6 root     root         1024 Oct 31 18:34 2.2.12/
drwxr-xr-x  11 root     root         1024 Oct 27 01:59 2.2.15/</PRE>

</BLOCKQUOTE>

<P>Controlliamo anche che nella directory <CODE>/boot/</CODE> siano presenti le immagini del <A NAME="index607"></A>kernel delle due distribuzioni e i relativi file <CODE>System.map</CODE>:</P>

<P class="command"><CODE>[bigpaul@localhost]$&nbsp;</CODE><STRONG><CODE>ls /boot</CODE></STRONG>[<KBD>Invio</KBD>]</P>
<BLOCKQUOTE>

<PRE>total 2735
-rw-r--r--   1 root     root       149820 Oct 31 17:30 System.map-2.2.12
-rw-r--r--   1 root     root       186846 Apr 20  1999 System.map-2.2.15
-rw-r--r--   1 root     root          512 Oct 27 01:55 boot.0303
-rw-r--r--   1 root     root         4544 Apr 13  1999 boot.b
-rw-r--r--   1 root     root          612 Apr 13  1999 chain.b
-rw-------   1 root     root        26624 Nov  1 15:31 map
-rw-r--r--   1 root     root       454123 Oct 31 17:30 vmlinuz-2.2.12
-rw-r--r--   1 root     root       617431 Apr 20  1999 vmlinuz-2.2.15</PRE>

</BLOCKQUOTE>

<P>Occorre infine assicurarsi che nel file <CODE>/etc/rc.d/init.d/syslog</CODE> (<CODE>/etc/init.d/sysklogd</CODE> in una distribuzione <A NAME="index608"></A>Debian) la riga:</P>
<BLOCKQUOTE>

<PRE>daemon klogd</PRE>

</BLOCKQUOTE>

<P>sia sostituita da:</P>
<BLOCKQUOTE>

<PRE>daemon klogd -k /boot/System.map-`uname -r`</PRE>

</BLOCKQUOTE>

<P>per far riconoscere senza problemi ai vari <A NAME="index609"></A>kernel i propri <CODE>System.map</CODE>.</P>

<P><STRONG>1.9.2)&nbsp;&nbsp;<A NAME="title111"></A><A NAME="anchor124"></A>
 Esiste la deframmentazione in GNU/Linux? <A NAME="index610"></A> </STRONG></P>

<P>I programmi per la deframmentazione del disco per GNU/Linux esistono ma non sono quasi mai necessari e se ne sconsiglia l'uso. Normalmente la frammentazione di un <A NAME="index611"></A>file&nbsp;system <A NAME="index612"></A>Ext2 si stabilizza tra il 4 e il 5 per cento, a meno che non ci sia una grande quantit&agrave; di installazioni, ma anche in questo caso non viene mai superato un certo limite.</P>

<P>Il metodo migliore e meno rischioso per deframmentare un disco, se proprio si desidera farlo, &egrave; archiviare (su nastro o su qualsiasi altro supporto) tutto il contenuto del <A NAME="index613"></A>file&nbsp;system, cancellare il <A NAME="index614"></A>file&nbsp;system stesso e ripristinare il contenuto dell'archivio.</P>

<P><STRONG>1.9.3)&nbsp;&nbsp;<A NAME="title112"></A><A NAME="anchor125"></A>
 Quali sono le differenze tra i file <CODE>/etc/profile</CODE>, <CODE>~/.bashrc</CODE>, <CODE>~/.bash_profile</CODE> e <CODE>~/.inputrc</CODE>? <A NAME="index615"></A> <A NAME="index616"></A> <A NAME="index617"></A> <A NAME="index618"></A> <A NAME="index619"></A> </STRONG></P>

<P>Esistono principalmente due tipi di <A NAME="index620"></A>shell: interattiva e non interattiva. La prima &egrave; una <A NAME="index621"></A>shell in cui l'utente &egrave; chiamato ad interagire con essa, ad inserire comandi. La <A NAME="index622"></A>shell non interattiva non richiede l'intervento dell'utente ed &egrave; quella che viene eseguita durante l'esecuzione di uno <A NAME="index623"></A>script. La <A NAME="index624"></A>shell interattiva si divide a sua volta in shell di <A NAME="index625"></A>login e shell normale. La prima consiste in quello che si ha di fronte quando &egrave; stata completata la <A NAME="index626"></A>procedura di accesso.</P>

<P>A seconda del tipo di <A NAME="index627"></A>shell, verranno letti diversi tipi di file:</P>

<P>Se &egrave; una <A NAME="index628"></A>shell di <A NAME="index629"></A>login, se <CODE>/etc/profile</CODE> esiste, lo legge; se <CODE>~/.bash_profile</CODE> esiste, lo legge, altrimenti se <CODE>~/.bash_login</CODE> esiste, lo legge, altrimenti se <CODE>~/.profile</CODE> esiste, lo legge. Se all'uscita dalla <A NAME="index630"></A>shell <CODE>~/.bash_logout</CODE> esiste, lo legge.</P>

<P>Se &egrave; una <A NAME="index631"></A>shell non di <A NAME="index632"></A>login, all'avvio se <CODE>~/.bashrc</CODE> esiste, lo legge.</P>

<P>Infine se si tratta di una <A NAME="index633"></A>shell non interattiva, se la variabile di ambiente <VAR>ENV</VAR> non &egrave; nulla, la espande e legge il file che indica, come se fosse stato eseguito il comando:</P>
<BLOCKQUOTE>

<PRE>if [ "$ENV" ]; then . $ENV; fi</PRE>

</BLOCKQUOTE>

<P>Ecco un estratto della <A NAME="index634"></A>pagina di manuale di <EM>bash</EM>(1) relativamente ai file letti dai vari tipi di <A NAME="index635"></A>shell:</P>
<BLOCKQUOTE>

<PRE>/etc/profile
       Il file di inizializzazione generale  per  il  sis&shy;
       tema, eseguito per le shell di login
~/.bash_profile
       Il file di inizializzazione personale, eseguito per
       le shell di login
~/.bashrc
       Il file di inizializzazione individuale  per  shell
       interattiva
~/.inputrc
       Il  file  di inizializzazione individuale per read&shy;
       line</PRE>

</BLOCKQUOTE>

<P><SAMP>readline</SAMP> &egrave; la libreria che gestisce la lettura dell'input quando si usa una shell interattiva.</P>

<P><STRONG>1.9.4)&nbsp;&nbsp;<A NAME="title113"></A><A NAME="anchor126"></A>
 Come si rendono disponibili anche per gli utenti le modifiche fatte al file <CODE>/etc/bashrc</CODE>? <A NAME="index636"></A> </STRONG></P>

<P>Per fare questo, occorre inserire nel file <CODE>.bashrc</CODE> dell'utente le seguenti righe:</P>
<BLOCKQUOTE>

<PRE>if [ -f /etc/bashrc ]; then
   . /etc/bashrc
fi</PRE>

</BLOCKQUOTE>

<P><STRONG>1.9.5)&nbsp;&nbsp;<A NAME="title114"></A><A NAME="anchor127"></A>
 Dopo aver modificato un file di configurazione, &egrave; necessario riavviare il sistema per rendere effettive le modifiche? <A NAME="index637"></A> </STRONG></P>

<P>No, &egrave; necessario invocarlo mediante l'eseguibile <SAMP>source</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>source .bashrc</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure ad esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>source ~/.bash_profile</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per ricaricare tutti i file di configurazione relativi alla <A NAME="index638"></A>shell, sia essa interattiva (di <A NAME="index639"></A>login o meno) che non interattiva, sar&agrave; sufficiente fare riferimento alla LDR <A HREF="ldr4.html#anchor125">1.9.3</A> per sapere quali file ricaricare mediante <SAMP>source</SAMP>.</P>

<P><STRONG>1.9.6)&nbsp;&nbsp;<A NAME="title115"></A><A NAME="anchor128"></A>
 Perch&eacute; alcune modifiche apportate al sistema durante situazioni di emergenza non sono riscontrabili al riavvio? <A NAME="index640"></A> </STRONG></P>

<P>Questo succede generalmente perch&eacute; non si &egrave; scaricata la <A NAME="index641"></A>memoria cache, quindi le modifiche sono rimaste nella RAM e non sono state applicate. Per fare scrivere effettivamente quello che si &egrave; fatto, occorre digitare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>sync</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In ogni caso &egrave; bene riavviare mediante il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>shutdown -r now</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>e non tramite il pulsante <SAMP>reset</SAMP>. Anche in situazioni di emergenza, se si possono fare modifiche al <A NAME="index642"></A>file&nbsp;system, si pu&ograve; anche avviare lo spegnimento.</P>

<P><STRONG>1.9.7)&nbsp;&nbsp;<A NAME="title116"></A><A NAME="anchor129"></A>
 Come vengono gestiti i servizi in una distribuzione GNU/Linux <A NAME="index643"></A>Debian? <A NAME="index644"></A> </STRONG></P>

<P>I servizi di una distribuzione GNU/Linux <A NAME="index645"></A>Debian sono gestiti dagli <A NAME="index646"></A>script e dai collegamenti simbolici presenti all'interno delle directory <CODE>/etc/rcx.d/</CODE> , dove <VAR>x</VAR> assume i valori S,0,1,2,3,4,5,6 e della directory <CODE>/etc/init.d/</CODE>.</P>

<P>In particolare, in <CODE>/etc/init.d/</CODE> saranno raccolti tutti gli <A NAME="index647"></A>script che si intende lanciare durante la fase di avvio. Per poterli eseguire durante tale fase per&ograve;, occorrer&agrave; creare un <A NAME="index648"></A>collegamento simbolico (<EM>link</EM>) all'interno della directory relativa al <A NAME="index649"></A>livello di esecuzione (<EM>runlevel</EM>) impostato. Se quest'ultimo &egrave; ad esempio il <A NAME="index650"></A>livello di esecuzione numero 3, il <A NAME="index651"></A>collegamento simbolico dovr&agrave; essere posto in <CODE>/etc/rc3.d/</CODE>.</P>

<P><STRONG>1.9.8)&nbsp;&nbsp;<A NAME="title117"></A><A NAME="anchor130"></A>
 Come si lancia un programma durante la fase di avvio di una distribuzione GNU/Linux <A NAME="index652"></A>Debian? <A NAME="index653"></A> </STRONG></P>

<P>Per eseguire un programma durante la fase di avvio, occorrer&agrave; creare uno <A NAME="index654"></A>script che invochi il programma stesso. Lo <A NAME="index655"></A>script dovr&agrave; essere collocato nella directory <CODE>/etc/init.d</CODE> e dovr&agrave; essere richiamato da <A NAME="index656"></A>collegamenti simbolici ad esso presenti nella directory del <A NAME="index657"></A>livello di esecuzione (<EM>runlevel</EM>) impostato. Se quest'ultimo &egrave; ad esempio il <A NAME="index658"></A>livello di esecuzione numero 3, il <A NAME="index659"></A>collegamento simbolico dovr&agrave; essere posto in <CODE>/etc/rc3.d/</CODE>.</P>

<P><STRONG>1.9.9)&nbsp;&nbsp;<A NAME="title118"></A><A NAME="anchor131"></A>
 Come vengono gestiti i servizi in una distribuzione GNU/Linux <A NAME="index660"></A>Red&nbsp;Hat? <A NAME="index661"></A> <A NAME="index662"></A> </STRONG></P>

<P>In <A NAME="index663"></A>Red&nbsp;Hat e nelle distribuzioni da essa derivate, nella directory <CODE>/etc/rc.d/</CODE> esistono le directory dei vari <A NAME="index664"></A>livelli di esecuzione (<EM>runlevel</EM>); esse sono caratterizzate dal nome <CODE>rcx.d</CODE> dove <VAR>x</VAR> pu&ograve; assumere i seguenti valori:</P>

<UL>

<LI>

<P>0: livello di spegnimento;</P>
</LI>

<LI>

<P>1: livello monoutente;</P>
</LI>

<LI>

<P>2,3: livelli di lavoro; </P>
</LI>

<LI>

<P>5: livello modalit&agrave; grafica;</P>
</LI>

<LI>

<P>6: livello di riavvio.</P>
</LI>
</UL>

<P>Oltre alle suddette directory c'&egrave; la directory <CODE>/etc/rc.d/rc.local/</CODE>. Queste directory contengono dei <A NAME="index665"></A>collegamenti simbolici a <A NAME="index666"></A>script presenti nella directory <CODE>/etc/rc.d/init.d/</CODE>. Praticamente, se in <CODE>/etc/rc.d/rc.local/</CODE> si inserisce un <A NAME="index667"></A>collegamento simbolico ad uno <A NAME="index668"></A>script presente in <CODE>/etc/rc.d/init.d/</CODE>, ad ogni avvio questo verr&agrave; eseguito; se se ne inserisce un altro in <CODE>/etc/rc.d/rc3.d/</CODE> questo verr&agrave; eseguito quando il sistema sar&agrave; avviato in <A NAME="index669"></A>livello di esecuzione (<EM>runlevel</EM>) 3 e verr&agrave; terminato allo spegnimento del sistema, al riavvio o se si passer&agrave; ad un altro <A NAME="index670"></A>livello di esecuzione.</P>

<P>Bisogna ricordare che i nomi dei <A NAME="index671"></A>collegamenti simbolici agli <A NAME="index672"></A>script presenti nella directory <CODE>/etc/rc.d/init.d/</CODE> sono nomi codificati. Essi infatti sono composti da una lettera maiuscola iniziale (S o K), da un numero e dal nome dello <A NAME="index673"></A>script cui puntano. La lettera (S o K) determina rispettivamente l'avvio o il non avvio dello <A NAME="index674"></A>script ed il numero ne determina invece l'ordine di esecuzione.</P>

<P>Se ad esempio nella directory <CODE>/etc/rc.d/rc3.d/</CODE> sono presenti:</P>

<PRE>K75netfs -&gt; ../init.d/netfs
S10network -&gt; ../init.d/network
S50inet -&gt; ../init.d/inet</PRE>

<P>all'avvio con <A NAME="index675"></A>livello di esecuzione (<EM>runlevel</EM>) 3, &laquo;netfs&raquo; non verr&agrave; eseguito (la &laquo;K&raquo; nel nome del collegamento ne nega l'esecuzione), mentre &laquo;network&raquo; e &laquo;inet&raquo; saranno eseguiti seguendo l'ordine indicato dal numero dopo la &laquo;S&raquo;.</P>

<P><STRONG>1.9.10)&nbsp;&nbsp;<A NAME="title119"></A><A NAME="anchor132"></A>
 Come si possono disattivare i servizi in <A NAME="index676"></A>Red&nbsp;Hat? <A NAME="index677"></A> </STRONG></P>

<P>All'interno della directory <CODE>/etc/rc.d/rcx.d/</CODE> <SUP><A HREF="amministrazione_del_sistema.html#footnote39" NAME="footnote-ref39">(39)</A></SUP>, sono presenti i <A NAME="index679"></A>collegamenti simbolici agli <A NAME="index680"></A>script dei servizi collocati all'interno della directory <CODE>/etc/rc.d/init.d/</CODE>.</P>

<P>Con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ls -l /etc/rc.d/rc3.d/</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote40" NAME="footnote-ref40">(40)</A></SUP></P>

<P>risulteranno evidenti i <A NAME="index682"></A>collegamenti simbolici. Questi <A NAME="index683"></A>collegamenti come gi&agrave; descritto nella LDR <A HREF="ldr4.html#anchor131">1.9.9</A> sono fatti nel seguente modo: sono composti da una lettera maiuscola iniziale (S o K), da un numero e dal nome dello <A NAME="index684"></A>script cui puntano. La lettera (S o K) determina rispettivamente l'avvio o il non avvio dello <A NAME="index685"></A>script ed il numero ne determina invece l'ordine di esecuzione.</P>

<P>Per disattivare un servizio, baster&agrave; quindi sostituire la &laquo;S&raquo; con la &laquo;K&raquo; o eliminare il <A NAME="index686"></A>collegamento simbolico.</P>

<P><STRONG>1.9.11)&nbsp;&nbsp;<A NAME="title120"></A><A NAME="anchor133"></A>
 Come si fanno ripartire i demoni se si sono modificati i file di configurazione? <A NAME="index687"></A> </STRONG></P>

<P>Occorre individuare il PID del demone attraverso il comando <SAMP>ps</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ps -aux | grep demone</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Una volta trovato il PID, per riavviare il demone si dar&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>kill -HUP <VAR>PID</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Quest'ultimo in pratica arresta il processo del demone e lo fa ripartire, facendogli in questo modo indirettamente rileggere i file di configurazione modificati.</P>

<P>Per riavviare, di solito si pu&ograve; anche mandare il sengale 1 al processo con il seguente comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>kill -1 <VAR>PID</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In <A NAME="index688"></A>Apache ad esempio basta uccidere il primo dei processi attivi (definito <SAMP>root</SAMP>) per far ripartire con le nuove impostazioni anche i processi figli.</P>

<P>Un modo ancora pi&ugrave; pulito &egrave; andare nella directory <CODE>/etc/init.d/</CODE> o <CODE>/etc/rc.d/init.d/</CODE> e fare ripartire il demone usando lo <A NAME="index689"></A>script di inizializzazione, ad esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cd /etc/init.d/</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>./apache restart</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.9.12)&nbsp;&nbsp;<A NAME="title121"></A><A NAME="anchor134"></A>
 Come si cambia il nome della macchina? <A NAME="index690"></A> </STRONG></P>

<P>Il nome della macchina che quasi sempre, in maniera predefinita, &egrave; <SAMP>localhost</SAMP>, pu&ograve; essere sostituito modificando il file <CODE>/etc/hosts</CODE>. In questo file infatti &egrave; indicato l'indirizzo IP e il nome della macchina. Questo esempio cambia il nome della macchina locale da <SAMP>localhost</SAMP> a <SAMP>miarete</SAMP> sostituendo la seguente riga del file <CODE>/etc/hosts</CODE>, con questa:</P>
<BLOCKQUOTE>

<PRE>127.0.0.1       localhost</PRE>

</BLOCKQUOTE>

<P>in (ad esempio):</P>
<BLOCKQUOTE>

<PRE>127.0.0.1       miarete</PRE>

</BLOCKQUOTE>

<P><STRONG>1.9.13)&nbsp;&nbsp;<A NAME="title122"></A><A NAME="anchor135"></A>
 Come si imposta l'orologio? <A NAME="index691"></A> <A NAME="index692"></A> </STRONG></P>

<P>La data va impostata mediante il comando <SAMP>date</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>date 12070820</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Questo comando imposter&agrave; l'orario alle 08.20 del 7 Dicembre dell'anno corrente.</P>

<P>Per mantenere per&ograve; queste impostazioni nel sistema, per aggiornare insomma l'orologio del BIOS, si dovr&agrave; dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>hwclock --systohc &amp;</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Ricordiamo inoltre che <SAMP>timeconfig</SAMP> &egrave; il <A NAME="index693"></A>programma di utilit&agrave; per impostare l'orario di una distribuzione <A NAME="index694"></A>Red&nbsp;Hat.</P>

<P><STRONG>1.9.14)&nbsp;&nbsp;<A NAME="title123"></A><A NAME="anchor136"></A>
 Come si mantiene aggiornato l'orologio? <A NAME="index695"></A> <A NAME="index696"></A> <A NAME="index697"></A> <A NAME="index698"></A> <A NAME="index699"></A> </STRONG></P>

<P>Mantenere aggiornato l'orologio del sistema con <A NAME="index700"></A>server remoti preposti a tale scopo, &egrave; un'operazione che si fa mediante gli eseguibili <SAMP>ntpdate</SAMP> e <SAMP>rdate</SAMP>. Se non presenti nel sistema, andranno installati i relativi pacchetti: <CODE>ntpdate</CODE> e <CODE>rdate</CODE>.</P>

<P>Dopo aver terminato il processo di <SAMP>xntpd</SAMP> occorrer&agrave; dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ntpdate www.clock.org</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>un comando simile &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>rdate -sp tempo.cstv.to.cnr.it</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per aggiornare l'orologio del BIOS, si dovr&agrave; in ogni caso dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>hwclock --systohc &amp;</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.9.15)&nbsp;&nbsp;<A NAME="title124"></A><A NAME="anchor137"></A>
 Cosa si deve fare per impostare l'ora legale in GNU/Linux? <A NAME="index701"></A> <A NAME="index702"></A> <A NAME="index703"></A> </STRONG></P>

<P>L'ora legale viene aggiornata automaticamente. &Egrave; opportuno fare in modo che l'orologio interno dell'elaboratore sia posizionato sull'ora di riferimento definita dal GMT, (<EM>Greenwich Mean Time</EM>).</P>

<P><STRONG>1.9.16)&nbsp;&nbsp;<A NAME="title125"></A><A NAME="anchor138"></A>
 Come si visualizza un calendario? <A NAME="index704"></A> <A NAME="index705"></A> </STRONG></P>

<P> Per visualizzare il calendario del mese corrente: </P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cal</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P> Per visualizzare il calendario dell'anno corrente: </P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cal -y</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P> Per visualizzare il calendario dell'anno 2002: </P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cal 2002</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P> Per visualizzare solo il mese di Febbraio 2000: </P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cal 2 2000</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<TABLE ID="anchor139" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="14.jpg" ALT="figure/cal"></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor139">1.10</A>. Il comando cal. </P>

</TD></TR>
</TABLE>

<P><STRONG>1.9.17)&nbsp;&nbsp;<A NAME="title126"></A><A NAME="anchor140"></A>
 Come &egrave; possibile attivare ad ogni avvio la spia della tastiera relativa al tasto [<KBD>BlocNum</KBD>]? <A NAME="index706"></A> <A NAME="index707"></A> <A NAME="index708"></A> </STRONG></P>

<P>Se da BIOS non &egrave; possibile impostare la spia, si dovr&agrave; operare in maniera diversa a seconda della distribuzione che si possiede.</P>

<P><A NAME="index709"></A>Red&nbsp;Hat:</P>

<P>Con questa distribuzione, si dovranno inserire nel file <CODE>/etc/rc.d/rc.sysinit</CODE> le seguenti righe:</P>
<BLOCKQUOTE>

<PRE>for t in 1 2 3 4 5 6
do
    /usr/bin/setleds -D +num &lt; /dev/tty$t &gt; /dev/null
done</PRE>

</BLOCKQUOTE>

<P>oppure:</P>
<BLOCKQUOTE>

<PRE>INITTY=/dev/tty[1-8]
for tty in $INITTY; do
  setleds -D +num &lt; $tty
done</PRE>

</BLOCKQUOTE>

<P><A NAME="index710"></A>Debian GNU/Linux:</P>

<P>In questa distribuzione, occorrer&agrave; creare uno <A NAME="index711"></A>script con le righe sopra esposte, e posizionarlo nella directory <CODE>/etc/rc.boot</CODE>.</P>

<P><A NAME="index712"></A>Slackware:</P>

<P>In questo caso lo <A NAME="index713"></A>script andr&agrave; inserito nel file <CODE>rc.keymap</CODE>.</P>

<P><STRONG>1.9.18)&nbsp;&nbsp;<A NAME="title127"></A><A NAME="anchor141"></A>
 Si pu&ograve; cancellare il contenuto della directory <CODE>/tmp/</CODE> o &egrave; pericoloso? <A NAME="index714"></A> <A NAME="index715"></A> <A NAME="index716"></A> <A NAME="index717"></A> </STRONG></P>

<P>Molti programmi in esecuzione, appoggiano alcuni file nella directory <CODE>/tmp/</CODE>. Pu&ograve; essere una buona idea ripulire quella directory prima che qualsiasi programma possa scriverci qualcosa dentro. Ecco quindi che l'avvio del sistema risulta essere il momento opportuno. Si deve allora creare uno <A NAME="index718"></A>script da inserire nella directory del sistema contenente tutti i servizi (<CODE>/etc/init.d/</CODE>, <CODE>/etc/rc.d/init.d/</CODE>, ecc.).</P>

<P>Alcune distribuzioni eseguono in maniera predefinita tale procedura. Lo script da inserire consta semplicemente di una riga:</P>
<BLOCKQUOTE>

<PRE>rm -rf /tmp/*</PRE>

</BLOCKQUOTE>

<P><STRONG>1.9.19)&nbsp;&nbsp;<A NAME="title128"></A><A NAME="anchor142"></A>
 Come si visualizza lo spazio disponibile su disco? </STRONG></P>

<P>A tale scopo si utilizza il comando <SAMP>df</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>df</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Il suddetto comando restituir&agrave; la percentuale di occupazione di ciascun <A NAME="index719"></A>file&nbsp;system montato, lo spazio occupato e lo spazio residuo. Mediante l'opzione <VAR>-h</VAR>, lo spazio residuo verr&agrave; visualizzato in maniera pi&ugrave; chiara. L'opzione <VAR>-T</VAR> mostrer&agrave; anche il tipo di ogni <A NAME="index720"></A>file&nbsp;system.</P>

<P><STRONG>1.9.20)&nbsp;&nbsp;<A NAME="title129"></A><A NAME="anchor143"></A>
 Come si possono visualizzare le variabili d'ambiente? <A NAME="index721"></A> </STRONG></P>

<P>Per visualizzare le variabili, occorre digitare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>printenv</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>set</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.9.21)&nbsp;&nbsp;<A NAME="title130"></A><A NAME="anchor144"></A>
 Come si impostano le variabili d'ambiente? <A NAME="index722"></A> <A NAME="index723"></A> <A NAME="index724"></A> </STRONG></P>

<P>Le variabili d'ambiente si impostano mediante il comando <SAMP>export</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>$ export VARIABILE=valore</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Ecco qualche esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>export HOSTNAME="`cat /etc/HOSTNAME`"</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>export MOZILLA_HOME=/usr/lib/netscape</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>export MAILDIR=/var/spool/mail</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>export TERM=linux</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>export PS1='\n\u@\h:[`pwd`] [\t] --&gt; \!\n* '</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.9.22)&nbsp;&nbsp;<A NAME="title131"></A><A NAME="anchor145"></A>
 Come si possono visualizzare le librerie usate da un programma? <A NAME="index725"></A> </STRONG></P>

<P>Con il comando <SAMP>ldd</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ldd programma</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.9.23)&nbsp;&nbsp;<A NAME="title132"></A><A NAME="anchor146"></A>
 Come mi devo comportare se un applicativo mi chiede una libreria di una versione pi&ugrave; vecchia di quella attualmente installata nel mio sistema? <A NAME="index726"></A> <A NAME="index727"></A> </STRONG></P>

<P>Se un programma richiede una versione di una libreria pi&ugrave; vecchia di quella installata nel proprio sistema, a volte &egrave; sufficiente creare un <A NAME="index728"></A>collegamento simbolico alla libreria pi&ugrave; vecchia. Il nome del <A NAME="index729"></A> collegamento simbolico dovr&agrave; essere quello della libreria di versione precedente.</P>

<P>Se ad esempio un programma richiedesse le librerie <CODE>libjpeg</CODE> 61 ma nel sistema fosse installata solo la versione 62, sarebbe sufficiente creare nella directory <CODE>/usr/lib/</CODE> un <A NAME="index730"></A> collegamento simbolico alla libreria pi&ugrave; recente:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cd /usr/lib/</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ln -s libjpeg.so.62 libjpeg.so.61</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.9.24)&nbsp;&nbsp;<A NAME="title133"></A><A NAME="anchor147"></A>
 C'&egrave; un modo per evitare di scrivere ogni volta comandi molto lunghi utilizzati di frequente? <A NAME="index731"></A> </STRONG></P>

<P>Per fare questo, occorre ricorrere agli alias. Questi ultimi non sono altro che dei nomi cui vengono associati comandi che si usano frequentemente e che comunque presentano numerose opzioni, difficili da ricordare o troppo lunghe da digitare. Per creare un alias &egrave; sufficiente il comando <SAMP>alias</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>alias ls='ls -la --color'</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In questo caso baster&agrave; digitare <SAMP>ls</SAMP> per avere un elenco dettagliato e colorato di tutti i file (anche quelli nascosti). Se si intende mantenere gli alias, si dovranno inserire i comandi nel file <CODE>~/.bash_profile</CODE> se sono specifici per un utente, o nel file <CODE>/etc/profile</CODE> se saranno tutti gli utenti del sistema a poterne beneficiare.</P>

<P><STRONG>1.9.25)&nbsp;&nbsp;<A NAME="title134"></A><A NAME="anchor148"></A>
 Esiste la possibilit&agrave; di sospendere (ibernare) un sistema GNU/Linux? <A NAME="index732"></A> <A NAME="index733"></A> <A NAME="index734"></A> </STRONG></P>

<P>Per abilitare questa funzione, bisogna includere tra le opzioni del <A NAME="index735"></A>kernel, il supporto per l'APM. Per sospendere il sistema si dovr&agrave; dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>apm --suspend</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<H2>1.10 &nbsp; <A NAME="title135"></A><A NAME="anchor149"></A>
Utenti e <A NAME="index736"></A>password</H2>

<P><STRONG>1.10.1)&nbsp;&nbsp;<A NAME="title136"></A><A NAME="anchor150"></A>
 Dove sono raccolte le informazioni sugli utenti del sistema? <A NAME="index737"></A> </STRONG></P>

<P>Queste informazioni sono raccolte nel file <CODE>/etc/passwd</CODE>. Se si usano le <A NAME="index738"></A>shadow password, si dovr&agrave; controllare anche il file <CODE>/etc/shadow</CODE>.</P>

<P><STRONG>1.10.2)&nbsp;&nbsp;<A NAME="title137"></A><A NAME="anchor151"></A>
 Dove sono raccolte le informazioni sui gruppi di utenti del sistema? <A NAME="index739"></A> </STRONG></P>

<P>L'elenco dei gruppi di utenti &egrave; contenuto nel file <CODE>/etc/group</CODE>. Se si usano le <A NAME="index740"></A>shadow password, si dovr&agrave; controllare anche il file <CODE>/etc/gshadow</CODE>.</P>

<P><STRONG>1.10.3)&nbsp;&nbsp;<A NAME="title138"></A><A NAME="anchor152"></A>
 In che modo &egrave; possibile rimuovere un <A NAME="index741"></A>account di un utente? <A NAME="index742"></A> <A NAME="index743"></A> <A NAME="index744"></A> </STRONG></P>

<P>Si pu&ograve; eliminare un utente dal sistema mediante il seguente comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>userdel IDutente</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote41" NAME="footnote-ref41">(41)</A></SUP></P>

<P>Alcune distribuzioni dispongono di <SAMP>deluser</SAMP> al posto di <SAMP>userdel</SAMP>.</P>

<P>In ogni caso si deve ricordare che ogni utente possiede generalmente i propri dati nella directory <CODE>/home/utente</CODE> e la sua presenza nel sistema dipende dalle impostazioni presenti nei file <CODE>/etc/passwd</CODE> e <CODE>/etc/group</CODE>. L'eliminazione quindi di queste componenti, comporta in effetti la rimozione dell'utente dal sistema.</P>

<P><STRONG>1.10.4)&nbsp;&nbsp;<A NAME="title139"></A><A NAME="anchor153"></A>
 Come si cancellano tutti i file di un utente presenti nel sistema? <A NAME="index745"></A> <A NAME="index746"></A> <A NAME="index747"></A> </STRONG></P>

<P>Il comando &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find / -user uid -exec rm {} \;</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote42" NAME="footnote-ref42">(42)</A></SUP></P>

<P>oppure:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find / -uid `id -u utente` | xargs rm -f</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per evitare di commettere errori che potrebbero risultare spiacevoli &egrave; meglio controllare cosa questo comando andr&agrave; a cancellare con:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find / -user uid | less</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.10.5)&nbsp;&nbsp;<A NAME="title140"></A><A NAME="anchor154"></A>
 Come si fa a diventare momentaneamente un altro utente? <A NAME="index748"></A> </STRONG></P>

<P>Con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>su utente</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per riassumere l'identit&agrave; dell'utente precedente, si dovr&agrave; digitare:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>exit</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.10.6)&nbsp;&nbsp;<A NAME="title141"></A><A NAME="anchor155"></A>
 Come si cambia la propria <A NAME="index749"></A>password? <A NAME="index750"></A> </STRONG></P>

<P>La propria <A NAME="index751"></A>password si pu&ograve; cambiare con:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>passwd</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.10.7)&nbsp;&nbsp;<A NAME="title142"></A><A NAME="anchor156"></A>
 Come si cambia la <A NAME="index752"></A>password degli utenti del sistema? <A NAME="index753"></A> </STRONG></P>

<P>Il comando &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>passwd utente</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote43" NAME="footnote-ref43">(43)</A></SUP></P>

<P>Si deve ricordare in ogni caso che il comando deve essere impartito dall'utente <SAMP>root</SAMP>.</P>

<P><STRONG>1.10.8)&nbsp;&nbsp;<A NAME="title143"></A><A NAME="anchor157"></A>
 Cosa sono le <A NAME="index755"></A>password <A NAME="index756"></A>shadow? <A NAME="index757"></A> </STRONG></P>

<P>Le <A NAME="index758"></A>password <A NAME="index759"></A>shadow si utilizzano per motivi di sicurezza. Sebbene le <A NAME="index760"></A>password presenti in <CODE>/etc/passwd</CODE> siano codificate, con gli strumenti necessari e con un po' di tempo, &egrave; possibile risalire alla <A NAME="index761"></A>password originale. L'accesso al file <CODE>/etc/passwd</CODE> &egrave; consentito a tutti gli utenti. Con le <A NAME="index762"></A>password <A NAME="index763"></A>shadow invece le <A NAME="index764"></A>password vengono mantenute nel file <CODE>/etc/shadow</CODE>, accessibile solo dall'utente <SAMP>root</SAMP>.</P>

<P><STRONG>1.10.9)&nbsp;&nbsp;<A NAME="title144"></A><A NAME="anchor158"></A>
 Come si pu&ograve; evitare la richiesta della <A NAME="index765"></A>password all'avvio? <A NAME="index766"></A> <A NAME="index767"></A> </STRONG></P>

<P>Per fare ci&ograve;, occorre modificare il file che contiene le <A NAME="index768"></A>password<SUP><A HREF="amministrazione_del_sistema.html#footnote44" NAME="footnote-ref44">(44)</A></SUP>. Occorrer&agrave; cancellare la <A NAME="index769"></A>password (che appare codificata) relativa all'utente desiderato.</P>

<P>Per esempio, se avessimo un file <CODE>/etc/passwd</CODE> di questo tipo:</P>

<PRE>root:Wteoh1TDSchyA:0:0:root:/root:/bin/bash
studente::100:100:,,,:/home/studente:/bin/bash</PRE>

<P>se si accede al sistema in qualit&agrave; di utente <SAMP>root</SAMP> verr&agrave; richiesta la <A NAME="index770"></A>password, mentre non verr&agrave; richiesta accedendo da utente <SAMP>studente</SAMP>.</P>

<P><STRONG>1.10.10)&nbsp;&nbsp;<A NAME="title145"></A><A NAME="anchor159"></A>
 Come si pu&ograve; evitare la richiesta del <A NAME="index771"></A>login e della <A NAME="index772"></A>password all'avvio? <A NAME="index773"></A> <A NAME="index774"></A> </STRONG></P>

<P>Prima di proseguire con la spiegazione, si consiglia innanzitutto di creare un dischetto di avvio per essere in grado in ogni caso di poter accedere al sistema e poi si devono tenere presenti i seguenti tre punti:</P>

<OL>

<LI>

<P>il file <CODE>/etc/inittab</CODE> contiene le azioni che <SAMP>init</SAMP> deve compiere dopo l'avvio del <A NAME="index775"></A>kernel. Viene infatti lanciato <SAMP>mingetty</SAMP> o <SAMP>getty</SAMP> per effettuare il <A NAME="index776"></A>login ed abilitare i terminali virtuali. Il termine <SAMP>respawn</SAMP> (in <CODE>/etc/inittab</CODE>) significa che il processo indicato deve ripartire una volta che &egrave; terminato. Ecco perch&eacute;, impartendo <SAMP>exit</SAMP> si ritorna al prompt del <A NAME="index777"></A> login;</P>
</LI>

<LI>

<P>la <A NAME="index778"></A>shell Bash, eseguita in modalit&agrave; <A NAME="index779"></A>login come &egrave; spiegato nella LDR <A HREF="ldr4.html#anchor125">1.9.3</A>, cerca in successione diversi file di configurazione: <CODE>/etc/profile</CODE>, <CODE>$HOME/.bash_profile</CODE>, <CODE>$HOME/.bash_login</CODE> e <CODE>$HOME/.profile</CODE> e se li trova li esegue;</P>
</LI>

<LI>

<P>normalmente, dopo avere inserito <A NAME="index780"></A>login e <A NAME="index781"></A>password vengono impostate le variabili d'ambiente <SAMP>HOME</SAMP>, <SAMP>PATH</SAMP>, <SAMP>SHELL</SAMP>, <SAMP>TERM</SAMP>, <SAMP>MAIL</SAMP> e <SAMP>LOGNAME</SAMP> ed infine viene lanciata la <A NAME="index782"></A>shell dell'utente specificata in <CODE>/etc/passwd</CODE>. Il normale processo di <A NAME="index783"></A>login quindi, avvia anche l'interprete dei comandi adatto, impostando poi la corretta variabile d'ambiente <SAMP>HOME</SAMP>. Di conseguenza, saltando il processo di <A NAME="index784"></A>login, la <SAMP>HOME</SAMP> rimane impostata a <CODE>/</CODE>, e non alla directory dell'utente che accede.</P>
</LI>
</OL>

<P>Esposte queste tre premesse, ecco come procedere:</P>

<OL>

<LI>

<P>Si deve modificare il file <CODE>/etc/profile</CODE>:</P>
<BLOCKQUOTE>

<PRE>HOME="/utente"
export HOME</PRE>

</BLOCKQUOTE>

<P><SUP><A HREF="amministrazione_del_sistema.html#footnote45" NAME="footnote-ref45">(45)</A></SUP>.</P>
</LI>

<LI>

<P>Occorrer&agrave; poi modificare il file <CODE>/etc/inittab</CODE>. Le seguenti righe:</P>
<BLOCKQUOTE>

<PRE># Run gettys in standard runlevels
1:2345:respawn:/sbin/mingetty tty1
2:2345:respawn:/sbin/mingetty tty2
3:2345:respawn:/sbin/mingetty tty3
4:2345:respawn:/sbin/mingetty tty4
5:2345:respawn:/sbin/mingetty tty5
6:2345:respawn:/sbin/mingetty tty6

# Run xdm in runlevel 5
# xdm is now a separate service
x:5:respawn:/etc/X11/prefdm -nodaemon</PRE>

</BLOCKQUOTE>

<P>dovranno essere modificate e se ne dovranno aggiungere altre due. Il risultato dovr&agrave; essere simile a quanto segue:</P>
<BLOCKQUOTE>

<PRE>#Avvio senza login
1:12345:wait:/bin/bash -login

# Run gettys in standard runlevels
#1:2345:respawn:/sbin/mingetty tty1
#2:2345:respawn:/sbin/mingetty tty2
#3:2345:respawn:/sbin/mingetty tty3
#4:2345:respawn:/sbin/mingetty tty4
#5:2345:respawn:/sbin/mingetty tty5
#6:2345:respawn:/sbin/mingetty tty6

# Run xdm in runlevel 5
# xdm is now a separate service
# x:5:respawn:/etc/X11/prefdm -nodaemon</PRE>

</BLOCKQUOTE>

<P>Il termine <SAMP>wait</SAMP> significa che si deve aspettare la fine del processo ma questo, una volta terminato, non sar&agrave; riavviato. Infatti, digitando <SAMP>exit</SAMP> al <A NAME="index785"></A>prompt, l'interprete dei comandi si chiuder&agrave; e sar&agrave; necessario avviare lo spegnimento.</P>
</LI>
</OL>

<P>Attenzione, non sar&agrave; pi&ugrave; possibile passare da un terminale virtuale all'altro mediante la combinazione [<KBD>Alt+Fx</KBD>], in quanto questi non sono stati attivati (le righe che servono per dichiararli, sono state commentate nel file <CODE>/etc/inittab</CODE> tramite <SAMP>#</SAMP>).</P>

<P><STRONG>1.10.11)&nbsp;&nbsp;<A NAME="title146"></A><A NAME="anchor160"></A>
 Cosa si deve fare se si dimentica la <A NAME="index786"></A>password di <SAMP>root</SAMP>? <A NAME="index787"></A> <A NAME="index788"></A> <A NAME="index789"></A> </STRONG></P>

<P>Nel caso si dimentichi la <A NAME="index790"></A>password di <SAMP>root</SAMP>, quello che si deve avere come obiettivo &egrave; quello di potere arrivare a modificare il file <CODE>/etc/passwd</CODE> (o <CODE>/etc/shadow</CODE> se si utilizzano le <A NAME="index791"></A>password <A NAME="index792"></A>shadow).</P>

<P>All'interno di uno o dell'altro, si troveranno tutti i dati relativi agli utenti, con le <A NAME="index793"></A>password codificate. Si dovr&agrave; cancellare il campo della <A NAME="index794"></A>password di <SAMP>root</SAMP>.</P>

<P>Questo permetter&agrave; all'utente <SAMP>root</SAMP> di accedere al sistema senza la richiesta di una <A NAME="index795"></A>password. Una volta ottenuto l'accesso, si dovr&agrave; riassegnare una nuova <A NAME="index796"></A>password all'utente <SAMP>root</SAMP> tramite il comando <SAMP>passwd</SAMP>.</P>

<P>Ci sono vari modi per poter arrivare a modificare quel file:</P>

<OL>

<LI>

<P>Al <A NAME="index797"></A>prompt di <A NAME="index798"></A>LILO occorrer&agrave; digitare:</P>

<P class="command"><CODE>LILO boot: </CODE><STRONG><CODE>linux single</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se questo metodo avr&agrave; successo, si otterr&agrave; accesso al sistema in qualit&agrave; di utente <SAMP>root</SAMP> e si potranno apportare le modifiche necessarie;</P>
</LI>

<LI>

<P>Si potr&agrave; montare la partizione contentente la directory <CODE>/etc/</CODE> da un'eventuale altra distribuzione presente nel sistema;</P>
</LI>

<LI>

<P>Si potr&agrave; utilizzare il disco fisso su un'altra macchina e lo si potr&agrave; montare;</P>
</LI>

<LI>

<P>Si potr&agrave; utilizzare una delle numerose minidistribuzioni GNU/Linux presenti su dischetto o su CD-ROM per montare la partizione contenente <CODE>/etc/</CODE>.</P>
</LI>
</OL>

<P><STRONG>1.10.12)&nbsp;&nbsp;<A NAME="title147"></A><A NAME="anchor161"></A>
 A cosa serve il file <CODE>/etc/.pwd.lock</CODE>? <A NAME="index799"></A> <A NAME="index800"></A> </STRONG></P>

<P>Questo file, se presente, nega la possibilit&agrave; di accedere in scrittura al file <CODE>/etc/passwd</CODE>. </P>

<P><STRONG>1.10.13)&nbsp;&nbsp;<A NAME="title148"></A><A NAME="anchor162"></A>
 Come si fa a sapere chi &egrave; connesso attualmente al sistema? <A NAME="index801"></A> </STRONG></P>

<P>Mediante i comandi <SAMP>w</SAMP> o <SAMP>who</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>w</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>o:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>who</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Il comando restituir&agrave; qualcosa simile a questo:</P>
<BLOCKQUOTE>

<PRE>  9:42pm  up  1:45,  4 users,  load average: 0.00, 0.00, 0.00
USER     TTY      FROM              LOGIN@   IDLE   JCPU   PCPU  WHAT
bigpaul  tty1     -                 7:57pm  1:23  24.06s 23.97s  mc 
giovann  tty2     -                 8:51pm  0.00s  0.20s   ?     -
mirco69  tty3     -                 9:04pm 38:36   8.29s  0.02s  sh /usr/bin/X11
bigpaul  tty4     -                 9:41pm 42.00s  0.09s  0.09s  -bash </PRE>

</BLOCKQUOTE>

<P><STRONG>1.10.14)&nbsp;&nbsp;<A NAME="title149"></A><A NAME="anchor163"></A>
 Come si cambia proprietario di un file? <A NAME="index802"></A> </STRONG></P>

<P>La sintassi da utilizzare &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chown nuovopropietario.nuovogruppo file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se si volesse cambiare solo il proprietario, il comando sar&agrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chown nuovoproprietario file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.10.15)&nbsp;&nbsp;<A NAME="title150"></A><A NAME="anchor164"></A>
 Come si cambia il gruppo di un file? <A NAME="index803"></A> </STRONG></P>

<P>La sintassi da utilizzare &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chown nuovopropietario.nuovogruppo file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se invece si volesse cambiare solamente il gruppo di un file, i comandi saranno:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chgrp nuovogruppo file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>o:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chown .nuovogruppo file</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote46" NAME="footnote-ref46">(46)</A></SUP></P>

<H2>1.11 &nbsp; <A NAME="title151"></A><A NAME="anchor165"></A>
 Permessi <A NAME="index804"></A> </H2>

<P><STRONG>1.11.1)&nbsp;&nbsp;<A NAME="title152"></A><A NAME="anchor166"></A>
 Come si conferisce il permesso di esecuzione ad un file? <A NAME="index805"></A> </STRONG></P>

<P>Ecco alcuni comandi che conferiscono il permesso di esecuzione ad alcuni file:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod a+x file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di esecuzione a tutti gli utenti del sistema;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod u+x file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di esecuzione esclusivamente al proprietario del file;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod g+x file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di esecuzione al gruppo;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod o+x file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di esecuzione agli altri utenti;</P>

<P>Si possono anche combinare le varie opzioni:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod ug+x file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.11.2)&nbsp;&nbsp;<A NAME="title153"></A><A NAME="anchor167"></A>
 Come si conferisce il permesso di lettura ad un file? <A NAME="index806"></A> </STRONG></P>

<P>Si seguiranno le stesse indicazioni del permesso di esecuzione (<A HREF="ldr4.html#anchor166">1.11.1</A>), sar&agrave; per&ograve; necessario sostituire <SAMP>x</SAMP> con <SAMP>r</SAMP>.</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod a+r file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di lettura a tutti gli utenti del sistema;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod u+r file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di lettura esclusivamente al proprietario del file;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod g+r file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di lettura al gruppo;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod o+r file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di lettura agli altri utenti;</P>

<P>Si possono anche combinare le varie opzioni:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod ug+r file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.11.3)&nbsp;&nbsp;<A NAME="title154"></A><A NAME="anchor168"></A>
 Come si conferisce il permesso di scrittura ad un file? <A NAME="index807"></A> </STRONG></P>

<P>Si seguiranno le stesse indicazioni del permesso di esecuzione (<A HREF="ldr4.html#anchor166">1.11.1</A>), sar&agrave; per&ograve; necessario sostituire <SAMP>x</SAMP> con <SAMP>w</SAMP>.</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod a+w file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di scrittura a tutti gli utenti del sistema;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod u+w file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di scrittura esclusivamente al proprietario del file;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod g+w file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di scrittura al gruppo;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod o+w file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>conferisce il permesso di scrittura agli altri utenti;</P>

<P>Si possono anche combinare le varie opzioni:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>chmod ug+w file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.11.4)&nbsp;&nbsp;<A NAME="title155"></A><A NAME="anchor169"></A>
 Come si conferiscono i permessi alle directory? <A NAME="index808"></A> </STRONG></P>

<P>Per cambiare i permessi delle directory si seguono le stesse regole utilizzate per i file (<A HREF="ldr4.html#anchor166">1.11.1</A>).</P>

<P><STRONG>1.11.5)&nbsp;&nbsp;<A NAME="title156"></A><A NAME="anchor170"></A>
 Qual &egrave; il significato del permesso di esecuzione di una directory? <A NAME="index809"></A> </STRONG></P>

<P>Questo permesso, se abilitato, permette di poter accedere alla directory in questione mediante il comando <SAMP>chdir</SAMP>. In caso contrario verr&agrave; restituito un messaggio di <SAMP>Permesso negato</SAMP>. Ecco un esempio pratico:</P>
<BLOCKQUOTE>

<PRE>[bigpaul@localhost]:[Tue Dec 12]:[22:13:45]:[~/temp3]:
--&gt; su
Password: 
[root@localhost]:[Tue Dec 12]:[22:13:48]:[/home/bigpaul/temp3]:
--&gt; mkdir alfa
[root@localhost]:[Tue Dec 12]:[22:13:59]:[/home/bigpaul/temp3]:
--&gt; chown root.root alfa/
[root@localhost]:[Tue Dec 12]:[22:14:23]:[/home/bigpaul/temp3]:
--&gt; exit
exit
[bigpaul@localhost]:[Tue Dec 12]:[22:14:27]:[~/temp3]:
--&gt; cd alfa
[bigpaul@localhost]:[Tue Dec 12]:[22:14:30]:[~/temp3/alfa]:
--&gt; cd ..
[bigpaul@localhost]:[Tue Dec 12]:[22:14:34]:[~/temp3]:
--&gt; su
Password: 
[root@localhost]:[Tue Dec 12]:[22:14:38]:[/home/bigpaul/temp3]:
--&gt; chmod o-x alfa/
[root@localhost]:[Tue Dec 12]:[22:14:43]:[/home/bigpaul/temp3]:
--&gt; exit
exit
[bigpaul@localhost]:[Tue Dec 12]:[22:14:45]:[~/temp3]:
--&gt; cd alfa/
bash: cd: alfa/: Permesso negato
[bigpaul@localhost]:[Tue Dec 12]:[22:14:47]:[~/temp3]:
--&gt;</PRE>

</BLOCKQUOTE>

<P><STRONG>1.11.6)&nbsp;&nbsp;<A NAME="title157"></A><A NAME="anchor171"></A>
 Come posso concedere i permessi di lettura e scrittura su partizioni vfat agli utenti del sistema? <A NAME="index810"></A> <A NAME="index811"></A> </STRONG></P>

<P>Si deve utilizzare il comando <SAMP>umask</SAMP>. Per dare ad esempio il permesso di lettura e scrittura sul primo disco fisso della catena IDE/EIDE a tutti gli utenti del sistema si deve inserire la seguente riga nel file <CODE>/etc/fstab</CODE>:</P>

<PRE>/dev/hda1       /mnt/win       vfat   quiet,users,umask=000  0    0  </PRE>

<P>I tre numeri dopo <SAMP>umask</SAMP> sono i parametri che impostano i permessi rispettivamente del proprietario del file, del gruppo cui appartiene il file, e di tutti gli altri; essi indicano quali permessi vengono tolti. Nell'esempio non viene tolto nessun permesso a nessuno. Si dovrebbe invece impostare:</P>

<PRE>umask=022</PRE>

<P>se si volessero assegnare i permessi di scrittura solamente al proprietario; oppure:</P>

<PRE>umask=066</PRE>

<P>se si volessero assegnare i permessi di lettura e scrittura solamente al proprietario.</P>

<P><STRONG>1.11.7)&nbsp;&nbsp;<A NAME="title158"></A><A NAME="anchor172"></A>
 Come si impostano i permessi predefiniti dei file e delle directory? <A NAME="index812"></A> </STRONG></P>

<P>Se si desidera che i propri file assumano permessi predefiniti sar&agrave; necessario utilizzare il comando <SAMP>umask</SAMP>. In genere questo comando viene inserito nei file che la <A NAME="index813"></A>shell legge quando viene inizializzata <SUP><A HREF="amministrazione_del_sistema.html#footnote47" NAME="footnote-ref47">(47)</A></SUP>.</P>

<P>Il valore da assegnare a <SAMP>umask</SAMP> viene calcolato sottraendo i permessi che si desiderano dal valore massimo. Si assume per definizione che i file siano non eseguibili per cui il loro valore massimo sar&agrave; 666. Se quindi si desidera che i file assumano permessi 664 il valore da assegnare a <SAMP>umask</SAMP> sar&agrave; 002. Per le directory, il valore predefinito &egrave; 777. Se anche qui si utilizzer&agrave; il valore 002, questo valore fornir&agrave; alle directory i permessi 775.</P>

<H2>1.12 &nbsp; <A NAME="title159"></A><A NAME="anchor173"></A>
 File, <A NAME="index814"></A>collegamenti (<EM>link</EM>) e directory <A NAME="index815"></A> <A NAME="index816"></A> <A NAME="index817"></A> <A NAME="index818"></A> </H2>

<P><STRONG>1.12.1)&nbsp;&nbsp;<A NAME="title160"></A><A NAME="anchor174"></A>
 Come si copiano i file? <A NAME="index819"></A> <A NAME="index820"></A> </STRONG></P>

<P class="syntax"><TT>cp <VAR>origine</VAR> <VAR>destinazione</VAR>
</TT></P>

<P>Con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp /opt/images/dog.png /home/pino/</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>l'utente <SAMP>root</SAMP>, copier&agrave; il file <CODE>dog.png</CODE> dalla directory <CODE>/opt/images/</CODE> alla directory <CODE>/home/pino/</CODE>. Utilizzando la seguente sintassi:</P>

<P class="syntax"><TT>cp -i <VAR>origine</VAR> <VAR>destinazione</VAR>
</TT></P>

<P>verr&agrave; chiesta conferma prima di sovrascrivere un file. Se durante la copia dei file si vogliono copiare i collegamenti simbolici e mantenerli come tali si deve utilizzare l'opzione <VAR>-d</VAR>. Se questo &egrave; richiesto durante la copia di directory con sottodirectory, l'opzione <VAR>-r</VAR> diventer&agrave; <VAR>-R</VAR>.</P>

<P><STRONG>1.12.2)&nbsp;&nbsp;<A NAME="title161"></A><A NAME="anchor175"></A>
 Come si cancellano i file? <A NAME="index821"></A> </STRONG></P>

<P class="syntax"><TT>rm <VAR>file</VAR>
</TT></P>

<P>Per esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>rm *.html</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>canceller&agrave; tutti i file con estensione <CODE>.html</CODE>. Per abilitare la richiesta di conferma della cancellazione per ogni file, si dovr&agrave; aggiungere l'opzione <VAR>-i</VAR>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>rm -i *.html</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.3)&nbsp;&nbsp;<A NAME="title162"></A><A NAME="anchor176"></A>
 Come si spostano i file? <A NAME="index822"></A> </STRONG></P>

<P class="syntax"><TT>mv <VAR>origine</VAR> <VAR>destinazione</VAR>
</TT></P>

<P>Per esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mv /root/dog.png /home/pino/</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>consentir&agrave; all'utente <SAMP>root</SAMP> di spostare il file <CODE>dog.png</CODE> dalla directory <CODE>/root/</CODE> alla directory <CODE>/home/pino/</CODE>.</P>

<P><STRONG>1.12.4)&nbsp;&nbsp;<A NAME="title163"></A><A NAME="anchor177"></A>
 Qual &egrave; in GNU/Linux l'equivalente di <SAMP>DIR *.HTML /S</SAMP> del Dos? <A NAME="index823"></A> <A NAME="index824"></A> </STRONG></P>

<P><SAMP>DIR *.HTML /S</SAMP> in un sistema Dos, permette di visualizzare tutti i file <CODE>.html</CODE> presenti nella directory da cui si &egrave; impartito il comando ed in tutte le discendenti. Il comando da impartire in un sistema GNU/Linux &egrave; il seguente:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find . -name "*.html"</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find . -print | grep -i "html$" &gt; ./all_html.txt</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.5)&nbsp;&nbsp;<A NAME="title164"></A><A NAME="anchor178"></A>
 Come si pu&ograve; evitare la cancellazione di un file da parte dell'utente <SAMP>root</SAMP>? <A NAME="index825"></A> <A NAME="index826"></A> </STRONG></P>

<P>Per evitare che inavvertitamente anche l'utente <SAMP> root</SAMP> possa cancellare determinati tipi di file, &egrave; necessario cambiare gli attributi dei file stessi. Questa operazione &egrave; consentita esclusivamente su <A NAME="index827"></A>file&nbsp;system <A NAME="index828"></A>Second-extended (<A NAME="index829"></A>Ext2). Per esempio, se un file &egrave; stato impostato dall'utente <SAMP>root</SAMP> con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chattr +i file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>esso non potr&agrave; venire rinominato, cancellato, modificato da nessuno, (utente <SAMP>root</SAMP> compreso), almeno non prima che l'attributo i venga tolto con:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>chattr -i file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Ecco un estratto della <A NAME="index830"></A>pagina di manuale <EM>chattr</EM>(1), in cui vengono elencati gli altri attributi.</P>
<BLOCKQUOTE>

<PRE>ATTRIBUTI
       Un file con l'attributo 'a' impostato  pu&ograve;  essere  aperto
       per la scrittura solo in modo append.

       Un  file  con  l'attributo `c' impostato &egrave; compresso auto-
       maticamente sul disco dal kernel. Una  lettura  di  questo
       file  restituisce  i  dati  decompressi.  Una scrittura su
       questo file comprime i dati prima di salvarli sul disco.

       Un file con l'attributo `d' impostato non &egrave;  un  candidato
       per  il backup quando viene lanciato il programma dump(8).

       Un file con l'attributo `i' impostato non pu&ograve; essere modi-
       ficato:  non  pu&ograve;  essere cancellato o rinominato, non pu&ograve;
       essere creato alcun link verso questo file e  nessun  dato
       pu&ograve; essere scritto sul file. Solo il superuser pu&ograve; mettere
       e togliere questo attributo.

       Quando un file con l'attributo `s' &egrave;  cancellato,  i  suoi
       blocchi sono azzerati e poi scritti sul disco.

       Quando  &egrave;  modificato  un  file  con  l'attributo  `S',  i

E2fsprogs versione 1.06    Ottobre 1996                         1

CHATTR(1)                                               CHATTR(1)

       cambiamenti sono scritti in modo sincrono sul disco; ci&ograve; &egrave;
       equivalente  alla  opzione di mount `sync' applicata ad un
       sottoinsieme di file.

       Quando un file con l'attributo `u' &egrave;  cancellato,  il  suo
       contenuto  &egrave;  salvato. Ci&ograve; permette all'utente di chiedere
       il suo ripristino.</PRE>

</BLOCKQUOTE>

<P><STRONG>1.12.6)&nbsp;&nbsp;<A NAME="title165"></A><A NAME="anchor179"></A>
 Come si esegue la copia di un'intera porzione del <A NAME="index831"></A>file&nbsp;system? <A NAME="index832"></A> <A NAME="index833"></A> <A NAME="index834"></A> </STRONG></P>

<P>Il comando da utilizzare &egrave; <SAMP>cp</SAMP> con l'opzione <VAR>-av</VAR>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp -av <VAR>origine</VAR> <VAR>destinazione</VAR> </CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote48" NAME="footnote-ref48">(48)</A></SUP></P>

<P>Se si aggiunge anche l'opzione <VAR>-x</VAR> (<VAR>--one-file-system</VAR>) verranno escluse dalla copia le sottodirectory che risiedono su <A NAME="index836"></A>file&nbsp;system diversi da quello da cui si &egrave; impartito il comando di copia.</P>

<P><STRONG>1.12.7)&nbsp;&nbsp;<A NAME="title166"></A><A NAME="anchor180"></A>
 Esiste la funzione <A NAME="index837"></A>undelete in GNU/Linux? <A NAME="index838"></A> <A NAME="index839"></A> <A NAME="index840"></A> <A NAME="index841"></A> <A NAME="index842"></A> <A NAME="index843"></A> </STRONG></P>

<P>Alcune delle tecniche che si possono utilizzare per effettuare il recupero dei file cancellati su un <A NAME="index844"></A>file&nbsp;system <A NAME="index845"></A>Ext2 sono descritte nel <EM>Linux Ext2fs Undeletion mini-HOWTO</EM> (&lt;<EM><A HREF="http://www.praeclarus.demon.co.uk/tech/e2-undel/">http://www.praeclarus.demon.co.uk/tech/e2-undel/</A></EM>&gt;)</P>

<P>In questo HOWTO si parla di una caratteristica apposita del <A NAME="index846"></A>Midnight Commander, che sembra ideale per utenti alle prime armi. Si deve tenere presente che la cancellazione, nei <A NAME="index847"></A>file&nbsp;system ad <A NAME="index848"></A>inode (quasi tutti quelli basati su <A NAME="index849"></A>UNIX, HPFS, NTFS, ecc.) avviene diversamente dai sistemi Dos o MS-Windows. In questi ultimi infatti, la cancellazione di un file non &egrave; altro che la sostituzione del primo carattere del nome del file (sostituito con &laquo;?&raquo;) all'interno della tavola delle partizioni (FAT). Diverso e pi&ugrave; complesso &egrave; il sistema di cancellazione nei <A NAME="index850"></A>file&nbsp;system ad <A NAME="index851"></A>inode. Quello che fa <A NAME="index852"></A>Midnight Commander non &egrave; altro che la sostituzione del comando <SAMP>rm</SAMP> con un comando che sposta il file su una directory prestabilita. Da quest'ultima sar&agrave; eventualmente possibile recuperare i file cancellati.</P>

<P><STRONG>1.12.8)&nbsp;&nbsp;<A NAME="title167"></A><A NAME="anchor181"></A>
 In che posizione del <A NAME="index853"></A>file&nbsp;system mi trovo? <A NAME="index854"></A> </STRONG></P>

<P>Per visualizzare la posizione del <A NAME="index855"></A>file&nbsp;system in cui ci si trova durante l'utilizzo di un terminale, sar&agrave; sufficiente impartire il comando <SAMP>pwd</SAMP> dalla riga di comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>pwd</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.9)&nbsp;&nbsp;<A NAME="title168"></A><A NAME="anchor182"></A>
 Come si visualizza il contenuto di un file? <A NAME="index856"></A> <A NAME="index857"></A> <A NAME="index858"></A> </STRONG></P>

<P>Ci sono diversi metodi.</P>

<UL>

<LI>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>mostra tutto il contenuto di un file;</P>
</LI>

<LI>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>more file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>mostra il contenuto del file una schermata alla volta;</P>
</LI>

<LI>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>less file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>mostra il contenuto del file una schermata alla volta, consente di poter scorrere all'indietro mostrando anche le porzioni di file gi&agrave; visualizzate; per uscire da questa modalit&agrave; di visualizzazione, si prema il tasto [<KBD>q</KBD>].</P>
</LI>
</UL>

<P><STRONG>1.12.10)&nbsp;&nbsp;<A NAME="title169"></A><A NAME="anchor183"></A>
 Come si visualizza la riga numero <VAR>n</VAR> di un file? <A NAME="index859"></A> <A NAME="index860"></A> <A NAME="index861"></A> </STRONG></P>

<P>Per visualizzare una riga specifica di un file, si utilizzano tre programmi concatenati tra loro: <SAMP>cat</SAMP>, <SAMP>head</SAMP> e <SAMP>tail</SAMP>:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat file | head -<VAR>n</VAR> | tail -1</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote49" NAME="footnote-ref49">(49)</A></SUP></P>

<P><STRONG>1.12.11)&nbsp;&nbsp;<A NAME="title170"></A><A NAME="anchor184"></A>
 Come si visualizza il contenuto di una directory? <A NAME="index862"></A> <A NAME="index863"></A> </STRONG></P>

<P>Ci sono vari modi:</P>

<UL>

<LI>

<P>Il comando predefinito deputato alla visualizzazione del contenuto di una directory &egrave; <SAMP>ls</SAMP>:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P>per visualizzare tutti i file, compresi quelli nascosti e i relativi permessi, si dar&agrave; il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls -la</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P>per visualizzare il contenuto della directory corrente, una schermata alla volta, si dar&agrave; il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls -la | more</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote50" NAME="footnote-ref50">(50)</A></SUP></P>
</LI>

<LI>

<P>per creare un file chiamato testo contenente l'elenco del contenuto della directory corrente, si dovr&agrave; impartire il seguente comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls -la &gt; testo</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P>per aggiungere il contenuto di un'altra directory al file, il comando sar&agrave;:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls -la &gt;&gt; testo</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P>per visualizzare in ordine il contenuto della directory corrente una schermata alla volta dovremo dare il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls | sort | more</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote51" NAME="footnote-ref51">(51)</A></SUP></P>
</LI>

<LI>

<P>per visualizzare con colori:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls --color</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>
</UL>

<P><STRONG>1.12.12)&nbsp;&nbsp;<A NAME="title171"></A><A NAME="anchor185"></A>
 Come si visualizza il contenuto di una directory a colori? <A NAME="index864"></A> </STRONG></P>

<P>Per visualizzare con colori uguali, tipi di file uguali (directory, eseguibili, ecc.) si dovr&agrave; dare il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls --color</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per non ripetere ogni volta il comando, si pu&ograve; inserire all'interno dei file che la shell legge al suo avvio<SUP><A HREF="amministrazione_del_sistema.html#footnote52" NAME="footnote-ref52">(52)</A></SUP>, la seguente riga:</P>
<BLOCKQUOTE>

<PRE>alias ls='ls -la --color'</PRE>

</BLOCKQUOTE>

<P><STRONG>1.12.13)&nbsp;&nbsp;<A NAME="title172"></A><A NAME="anchor186"></A>
 Come si visualizza il contenuto della directory corrente e delle sue discendenti compreso di percorso? <A NAME="index866"></A> </STRONG></P>

<P>Per poter visualizzare l'elenco dei file contenuti nella directory corrente e nelle sue discendenti, includendo anche il percorso, occorre impartire il seguente comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>find .</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.14)&nbsp;&nbsp;<A NAME="title173"></A><A NAME="anchor187"></A>
 Come si visualizza il contenuto di tutti i file di una directory? <A NAME="index867"></A> <A NAME="index868"></A> </STRONG></P>

<TABLE BORDER="3" WIDTH="100%">
<TR><TD>

<P>si deve ricordare in ogni caso che ci si riferisce esclusivamente a file di testo dal momento che la visualizzazione di un file non testuale genererebbe una serie di caratteri incomprensibili.</P>

</TD></TR>
</TABLE>

<P>Si pu&ograve; visualizzare il contenuto di tutti i file di una directory mediante il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat /percorso/* | less</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>o mediante il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>less /percorso/*</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per visualizzare quindi, il contenuto di tutti i file presenti nella directory corrente sar&agrave; sufficiente il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>less *</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.15)&nbsp;&nbsp;<A NAME="title174"></A><A NAME="anchor188"></A>
 Come si visualizza il contenuto di uno stesso file presente in diverse directory? <A NAME="index869"></A> <A NAME="index870"></A> <A NAME="index871"></A> </STRONG></P>

<P>Se si volesse ad esempio visualizzare il contenuto di tutti i file <CODE>rp_filter</CODE> presenti nelle varie directory contenute in <CODE>/proc/sys/net/conf/</CODE> con un solo comando, si potr&agrave; scegliere tra queste metodiche:</P>

<OL>

<LI>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cat `find /proc/sys/net/conf -name rp_filter -print`</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>for i in `find /proc/sys/net/conf -name rp_filter&nbsp;<SUB><EM>(segue)</EM></SUB><BR>&nbsp;&nbsp; -print` ; do echo $i; cat $i; done</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find /proc/sys/net/conf -name rp_filter &nbsp;<SUB><EM>(segue)</EM></SUB><BR>&nbsp;&nbsp;-exec "echo '{}' &amp;&amp; cat '{}'" ;</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>
</OL>

<P><STRONG>1.12.16)&nbsp;&nbsp;<A NAME="title175"></A><A NAME="anchor189"></A>
 Perch&eacute; <SAMP>less</SAMP> disattiva la colorazione di <SAMP>ls</SAMP>? <A NAME="index872"></A> <A NAME="index873"></A> </STRONG></P>

<P>Utilizzando il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls --color | more</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>la colorazione fornita dall'opzione <VAR>--color</VAR> di <SAMP>ls</SAMP> viene preservata. Se invece si utilizza il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ls --color | less</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>si ottengono delle scritte come queste:</P>

<P><SAMP>ESC[01;34mat-3.1.7ESC[0m/ </SAMP></P>

<P><SAMP>ESC[01;34maudiofile-0.1.6ESC[0m/ </SAMP></P>

<P><SAMP>ESC[01;34maumix-1.18.2ESC[0m/ </SAMP></P>

<P><SAMP>ESC[01;34mawesfx-0.4.3aESC[0m/</SAMP></P>

<P>Questo accade perch&eacute; <SAMP>less</SAMP> protegge il terminale evitando di mandare sequenze di caratteri che potrebbero <EM>sporcarlo</EM>. A volte per&ograve; questo non funziona e si deve utilizzare l'opzione <VAR>-r</VAR>.</P>

<P>Per mantenere la colorazione quindi anche con l'utilizzo di <SAMP>less</SAMP> si dovr&agrave; dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ls -alF --color=always |less -r</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In questo caso si consiglia l'utilizzo di un alias.</P>

<P><STRONG>1.12.17)&nbsp;&nbsp;<A NAME="title176"></A><A NAME="anchor190"></A>
 Come si crea un file vuoto? <A NAME="index874"></A> </STRONG></P>

<P>Il comando <SAMP>touch</SAMP> serve per creare un file vuoto:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>touch file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se invece all'atto della creazione si volesse cominciare a scriverci qualcosa si utilizzer&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cat &gt; file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>che permetter&agrave; all'utente di scriverne il contenuto fino alla pressione della combinazione di tasti [<KBD>Ctrl+d</KBD>].</P>

<P><STRONG>1.12.18)&nbsp;&nbsp;<A NAME="title177"></A><A NAME="anchor191"></A>
 Come si uniscono pi&ugrave; file di testo? <A NAME="index875"></A> <A NAME="index876"></A> </STRONG></P>

<P>Un metodo &egrave; quello di unire un file alla volta al file destinazione (<CODE>ris.txt</CODE>):</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat file1.txt &gt; ris.txt</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat file2.txt &gt;&gt; ris.txt</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat file3.txt &gt;&gt; ris.txt</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Un altro metodo &egrave; quello di unire tutti i file allo stesso istante:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat file1.txt file2.txt file3.txt &gt; ris.txt</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.19)&nbsp;&nbsp;<A NAME="title178"></A><A NAME="anchor192"></A>
 Come si fa a conoscere il tipo di un file? <A NAME="index877"></A> </STRONG></P>

<P>Si pu&ograve; conoscere il tipo di file mediante il comando <SAMP>file</SAMP>:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>file file</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.20)&nbsp;&nbsp;<A NAME="title179"></A><A NAME="anchor193"></A>
 Come si pu&ograve; mettere il contenuto di un file in ordine alfabetico? <A NAME="index878"></A> </STRONG></P>

<P>Si deve utilizzare il comando <SAMP>sort</SAMP> nella seguente maniera:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>sort &lt; origine.txt &gt; destinazione.txt</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote53" NAME="footnote-ref53">(53)</A></SUP></P>

<P><STRONG>1.12.21)&nbsp;&nbsp;<A NAME="title180"></A><A NAME="anchor194"></A>
 Come si creano le directory? <A NAME="index879"></A> </STRONG></P>

<P>Le directory si creano con il comando <SAMP>mkdir</SAMP>:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>mkdir nome</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>mkdir /percorso/nome</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.22)&nbsp;&nbsp;<A NAME="title181"></A><A NAME="anchor195"></A>
 Come si cancellano le directory? <A NAME="index880"></A> </STRONG></P>

<P>Per cancellare una directory si dovr&agrave; dare il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>rmdir nome</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>La directory per&ograve; deve essere gi&agrave; stata svuotata del suo contenuto. Se si &egrave; sicuri di cosa si sta facendo, si pu&ograve; cancellare una directory e tutto il suo contenuto con il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>rm -rf /prova</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<TABLE BORDER="3" WIDTH="100%">
<TR><TD>

<P><STRONG>Attenzione</STRONG>: &egrave; un comando cui bisogna prestare attenzione.</P>

</TD></TR>
</TABLE>

<P><STRONG>1.12.23)&nbsp;&nbsp;<A NAME="title182"></A><A NAME="anchor196"></A>
 Cosa sono gli <A NAME="index881"></A>attributi estesi? &Eacute; vero che se conferiti ad un file, ne impediscono la cancellazione anche da parte dell'utente <SAMP>root</SAMP>? <A NAME="index882"></A> <A NAME="index883"></A> <A NAME="index884"></A> </STRONG></P>

<P>Gli attributi dei file sono di varia natura. Il comando <SAMP>chattr</SAMP> serve per modificarli. Si faccia riferimento alla LDR <A HREF="ldr4.html#anchor178">1.12.5</A> per una trattazione pi&ugrave; esauriente.</P>

<P><STRONG>1.12.24)&nbsp;&nbsp;<A NAME="title183"></A><A NAME="anchor197"></A>
 Come ci si sposta tra le directory del <A NAME="index885"></A>file&nbsp;system? <A NAME="index886"></A> </STRONG></P>

<P>Il comando <SAMP>cd</SAMP> serve a muoversi tra le directory del <A NAME="index887"></A>file&nbsp;system. Occorre impartire il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cd nome</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per entrare in una directory contenuta in quella attuale;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cd /nome/nome2/</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per entrare nella directory <CODE>nome2/</CODE> contenuta in <CODE>/nome/</CODE>;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cd ..</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per tornare alla directory di livello superiore di quello attuale;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cd ~</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per tornare alla directory <EM>home</EM>;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cd ../conti</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per spostarmi alla directory <CODE>conti</CODE>, che &egrave; dello stesso livello della directory corrente;</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cd -</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per tornare nella directory da cui si &egrave; giunti in quella corrente.</P>

<P><STRONG>1.12.25)&nbsp;&nbsp;<A NAME="title184"></A><A NAME="anchor198"></A>
 Quali sono le differenze tra <A NAME="index888"></A>collegamenti <EM>soft</EM> e <EM>hard</EM>? <A NAME="index889"></A> <A NAME="index890"></A> <A NAME="index891"></A> <A NAME="index892"></A> </STRONG></P>

<P>Un <A NAME="index893"></A>collegamento <EM>soft</EM> &egrave; praticamente un nome diverso che viene dato allo stesso file. Non occupa spazio su disco (se non per un <A NAME="index894"></A>inode). Un <A NAME="index895"></A>collegamento <EM>hard</EM> &egrave; praticamente una copia fisica del file; inoltre ogni cambiamento fatto all'originale (o alla copia) risulter&agrave; effettuata anche sulla copia (o sull'originale).</P>

<P>Se si cancella un <A NAME="index896"></A>collegamento <EM>soft</EM> il file originale viene perso; se invece c'&egrave; un <A NAME="index897"></A>collegamento <EM>hard</EM> e si cancella l'originale, il <A NAME="index898"></A>collegamento (ed il suo contenuto) non verranno modificati.</P>

<P><STRONG>1.12.26)&nbsp;&nbsp;<A NAME="title185"></A><A NAME="anchor199"></A>
 Come si crea un <A NAME="index899"></A>collegamento simbolico? <A NAME="index900"></A> </STRONG></P>

<P>Il comando da dare &egrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ln -s /home/mario/resoconto.txt /root/resocontomario</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>dove <CODE>/home/mario/resoconto.txt</CODE> &egrave; il file che gi&agrave; esiste e al quale vogliamo fare il <A NAME="index901"></A>collegamento simbolico (<CODE>/root/resocontomario</CODE>).</P>

<P><STRONG>1.12.27)&nbsp;&nbsp;<A NAME="title186"></A><A NAME="anchor200"></A>
 Come si fa a trovare un file in tutto il <A NAME="index902"></A>file&nbsp;system? <A NAME="index903"></A> <A NAME="index904"></A> </STRONG></P>

<P>Ricercare un file in tutto il <A NAME="index905"></A>file&nbsp;system &egrave; un'operazione che si pu&ograve; fare mediante il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find / -name <VAR>nomefile</VAR> -print</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote54" NAME="footnote-ref54">(54)</A></SUP></P>

<P>Un altro metodo consiste nell'impartire il comando <SAMP>locate</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>locate <VAR>nomefile</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote55" NAME="footnote-ref55">(55)</A></SUP></P>

<P><SAMP>locate</SAMP> &egrave; <EM>decisamente</EM> pi&ugrave; veloce del comando <SAMP>find</SAMP>, ma per usarlo bisogna prima aggiornare il suo archivio impartendo in qualit&agrave; di utente <SAMP>root</SAMP> il comando <SAMP>updatedb</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>updatedb</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.28)&nbsp;&nbsp;<A NAME="title187"></A><A NAME="anchor201"></A>
 Come si fa a trovare un file in una porzione del <A NAME="index907"></A>file&nbsp;system? <A NAME="index908"></A> </STRONG></P>

<P>Se invece di tutto il <A NAME="index909"></A>file&nbsp;system si volesse ricercare un file nella directory <CODE>/var/</CODE> e in tutte le sue discendenti, dovremo impartire il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find /var -name <VAR>nomefile</VAR> -print</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote56" NAME="footnote-ref56">(56)</A></SUP></P>

<P><STRONG>1.12.29)&nbsp;&nbsp;<A NAME="title188"></A><A NAME="anchor202"></A>
 Con che comando posso copiare un file dopo averlo ricercato nel <A NAME="index910"></A>file&nbsp;system? <A NAME="index911"></A> <A NAME="index912"></A> <A NAME="index913"></A> <A NAME="index914"></A> <A NAME="index915"></A> <A NAME="index916"></A> </STRONG></P>

<P>Se si volessero ricercare all'interno del <A NAME="index917"></A>file&nbsp;system tutti i file <CODE>.png</CODE> e una volta trovati copiarli nella directory <CODE>/home/tizio/pngfile/</CODE>, si dovr&agrave; dare il seguente comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find / -name "*.png" -exec cp -p {} /home/tizio/pngfile/ \;</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.30)&nbsp;&nbsp;<A NAME="title189"></A><A NAME="anchor203"></A>
 Quali sono i file della directory corrente che contengono una stringa? <A NAME="index918"></A> <A NAME="index919"></A> <A NAME="index920"></A> <A NAME="index921"></A> </STRONG></P>

<P>Se si volesse visualizzare il nome dei file che contengono la stringa &laquo;resoconti&raquo;, si dovr&agrave; utilizzare il comando <SAMP>grep</SAMP> nel seguente modo:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>grep resoconti *</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote57" NAME="footnote-ref57">(57)</A></SUP></P>

<P>Lo stesso compito pu&ograve; essere svolto dal comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>find <VAR>percorso</VAR> -print -exec grep resoconti {} \;</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote58" NAME="footnote-ref58">(58)</A></SUP></P>

<P><STRONG>1.12.31)&nbsp;&nbsp;<A NAME="title190"></A><A NAME="anchor204"></A>
 Quali sono i file del <A NAME="index922"></A>file&nbsp;system che contengono una stringa? <A NAME="index923"></A> <A NAME="index924"></A> <A NAME="index925"></A> <A NAME="index926"></A> </STRONG></P>

<P>Il comando da impartire &egrave; il seguente:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>rgrep -r <VAR>stringa</VAR> <VAR>directory</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote59" NAME="footnote-ref59">(59)</A></SUP></P>

<P>oppure un comando equivalente &egrave;:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>find <VAR>directory</VAR> -type f -exec grep -l <VAR>stringa</VAR> {} \;</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote60" NAME="footnote-ref60">(60)</A></SUP></P>

<P><STRONG>1.12.32)&nbsp;&nbsp;<A NAME="title191"></A><A NAME="anchor205"></A>
 Come si visualizzano i nomi dei file che iniziano con una determinata stringa? <A NAME="index927"></A> <A NAME="index928"></A> </STRONG></P>

<P>Per visualizzare tutti i file presenti nel <A NAME="index929"></A>file&nbsp;system il cui nome inizia per &laquo;conf&raquo;, si dar&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find / -name conf\*</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure, lo stesso risultato si otterr&agrave; con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find / -name "conf*"</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.12.33)&nbsp;&nbsp;<A NAME="title192"></A><A NAME="anchor206"></A>
 Come si possono suddividere in pi&ugrave; parti i file di grandi dimensione? <A NAME="index930"></A> <A NAME="index931"></A> <A NAME="index932"></A> <A NAME="index933"></A> <A NAME="index934"></A> </STRONG></P>

<P>Per spezzettare un file di grandi dimensioni, occorre utilizzare il comando <SAMP>split</SAMP>:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>split -b 1400k <VAR>file</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Il comando ora esposto, suddivide <VAR>file</VAR> in parti da 1&nbsp;400&nbsp;Kibyte ciascuna che prendono in maniera predefinita il nome di <CODE>xaa</CODE>, <CODE>xab</CODE>, ecc.</P>

<P>Quando si avr&agrave; la necessit&agrave; di riunire le parti suddivise per ricreare il file originario, si dar&agrave; il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat xaa xab [...] &gt; <VAR>nome</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote61" NAME="footnote-ref61">(61)</A></SUP></P>

<P>Se nella directory corrente i file che iniziano con <SAMP>x</SAMP> sono esclusivamente i file suddivisi, un comando pi&ugrave; diretto &egrave;:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cat x* &gt; <VAR>nome</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In alternativa a questa metodica &egrave; possibile utilizzare <SAMP>tar</SAMP> con l'opzione <VAR>M</VAR>, scrivendo direttamente su <CODE>/dev/fd0</CODE> cio&egrave; su dischetto. Occorre in ogni caso prestare attenzione perch&eacute; <SAMP>tar</SAMP> scrive direttamente sul disco senza badare al <A NAME="index935"></A>file&nbsp;system. Il dischetto quindi andr&agrave; riformattato per un successivo riutilizzo.</P>

<P>Il comando che segue permette di archiviare su pi&ugrave; dischetti un file (<VAR>file</VAR>):</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>tar cvfM /dev/fd0 <VAR>file</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Tra un dischetto e quello successivo, <SAMP>tar</SAMP> mostrer&agrave; una richiesta del genere:</P>
<BLOCKQUOTE>

<PRE>Prepara il volume #2 per `/dev/fd0' e premi return: </PRE>

</BLOCKQUOTE>

<P>Per ripristinare il file suddiviso, dopo essersi posizionati nella directory destinazione, si dar&agrave; il comando:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>tar xvfM /dev/fd0</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<H2>1.13 &nbsp; <A NAME="title193"></A><A NAME="anchor207"></A>
 Configurazione della console <A NAME="index936"></A> </H2>

<P><STRONG>1.13.1)&nbsp;&nbsp;<A NAME="title194"></A><A NAME="anchor208"></A>
 Come si utilizzano le variabili nella <A NAME="index937"></A>shell Bash? <A NAME="index938"></A> </STRONG></P>

<P>In genere si utilizzano nomi di variabili con caratteri maiuscoli e si dichiarano dalla riga di comando nel seguente modo:</P>

<P class="syntax"><TT><VAR>NOMEVARIABILE</VAR>=<VAR>valore</VAR>
</TT></P>

<P>Il successivo utilizzo della variabile si effettua aggiungendo il carattere <SAMP>$</SAMP> davanti al nome della variabile. Ecco un esempio:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>RICOMP_KERNEL=/usr/src/linux</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>cd $RICOMP_KERNEL</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per visualizzare tutte le variabili d'ambiente del sistema si utilizza il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>set</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per vedere il contenuto di una variabile si utilizza il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>echo $<VAR>NOME_VARIABILE</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per svuotarne il contenuto si usa:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>unset <VAR>NOME_VARIABILE</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>La dichiarazione delle variabili &egrave; limitata alla <A NAME="index939"></A>shell corrente. I comandi esterni alla <A NAME="index940"></A>shell non ricevono la dichiarazione di queste variabili. Per fare in modo che anche essi ne possano beneficiare, si deve utilizzare il comando <SAMP>export</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>export <VAR>NOME_VARIABILE</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.13.2)&nbsp;&nbsp;<A NAME="title195"></A><A NAME="anchor209"></A>
 Come si pu&ograve; personalizzare il <A NAME="index941"></A>prompt? </STRONG></P>

<P>Per personalizzare l'aspetto del <A NAME="index942"></A>prompt della <A NAME="index943"></A>shell Bash, si dovr&agrave; modificare la variabile <SAMP>PS1</SAMP> utilizzando dei codici speciali.</P>

<P>L'elenco dei codici speciali presente nella tabella <A HREF="ldr4.html#anchor210">1.1</A> &egrave; tratto da <A NAME="index944"></A>Appunti di informatica libera di Daniele Giacomini. (&lt;<EM><A HREF="https://www.siena.linux.it/documenti/ldr/a2.swlibero.org">a2.swlibero.org</A></EM>&gt;)</P>

<TABLE ID="anchor210" BORDER="3">

<THEAD>
<TR><TD>Codice </TD><TD>Descrizione </TD></TR>
</THEAD>

<TBODY>
<TR><TD>\t </TD><TD>Orario attuale nel formato hh:mm:ss (ore, minuti, secondi). </TD></TR>
<TR><TD>\d </TD><TD>Data attuale. </TD></TR>
<TR><TD>\n </TD><TD><A NAME="index946"></A>Interruzione di riga. </TD></TR>
<TR><TD>\s </TD><TD>Nome della <A NAME="index947"></A>shell. </TD></TR>
<TR><TD>\w </TD><TD>Directory corrente. </TD></TR>
<TR><TD>\W </TD><TD>Percorso precedente alla directory corrente (<EM>basename</EM>). </TD></TR>
<TR><TD>\u </TD><TD>Utente. </TD></TR>
<TR><TD>\h </TD><TD>Nome del <A NAME="index948"></A>nodo. </TD></TR>
<TR><TD>\# </TD><TD>Numero del comando attuale. </TD></TR>
<TR><TD>\! </TD><TD>Numero del comando nello storico. </TD></TR>
<TR><TD>\$ </TD><TD><SAMP>#</SAMP> se UID = 0; <SAMP>$</SAMP> se UID &gt; 0. </TD></TR>
<TR><TD>\<VAR>n</VAR><VAR>n</VAR><VAR>n</VAR> </TD><TD>Carattere corrispondente al numero ottale indicato. </TD></TR>
<TR><TD>\\ </TD><TD>Una barra obliqua inversa singola (<SAMP>\</SAMP>). </TD></TR>
<TR><TD>\[ </TD><TD>Inizio di una sequenza di controllo. </TD></TR>
<TR><TD>\] </TD><TD>Fine di una sequenza di controllo. </TD></TR>
</TBODY>
</TABLE>

<P><EM> Tabella <A HREF="ldr4.html#anchor210">1.1</A>. Elenco dei codici speciali per definire il <A NAME="index945"></A>prompt. </EM></P>

<P><STRONG>1.13.3)&nbsp;&nbsp;<A NAME="title196"></A><A NAME="anchor211"></A>
 Esempi di <A NAME="index949"></A>prompt <A NAME="index950"></A> <A NAME="index951"></A> <A NAME="index952"></A> <A NAME="index953"></A> </STRONG></P>

<P>Ecco una serie di esempi di <A NAME="index954"></A>prompt:</P>

<OL>

<LI>

<PRE> 
export PS1='\[\033[1;34m\]\n\u@\h \[\033[1;33m\]---\[\033[1;34m\
][`pwd`] \[\033[1;33m\]---\[\033[1;34m\] [\t]\[\033[1;33m\]--- \
[\033[1;31m\]\!\n\[\033[1;31m\]*\[\033[0;37m\] '</PRE>

<P>Questa configurazione generer&agrave; un <A NAME="index955"></A>prompt simile a questo:</P>
<BLOCKQUOTE>

<PRE> 
bigpaul@localhost ---][/home/bigpaul/LDR] --- [21:58:48]--- [a530
* _</PRE>

</BLOCKQUOTE>

<TABLE ID="anchor212" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="15.jpg" ALT="figure/prompt1" WIDTH="737" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor212">1.11</A>. Esempio di prompt. </P>

</TD></TR>
</TABLE>
</LI>

<LI>

<PRE>export PS1="\[\033[1;31m\][\u@\h]\[\033[1;35m\]:\
[\033[1;33m\][\d]\[\033[1;35m\]:\[\033[1;36m\][\t]
\[\033[1;35m\]:\[\033[1;32m\][\w]\[\033[1;35m\]:\n\[\033[0;34m\]
-\[\033[1;34m\]-\[\033[1;31m\]&gt;\033[1C\[\033[0m\]"</PRE>

<P>Questa configurazione generer&agrave; un <A NAME="index956"></A>prompt simile a questo:</P>
<BLOCKQUOTE>

<PRE> 
[bigpaul@localhost]:[a[Fri Dec 15]:[22:03:35]
:[~/LDR]:

--&gt;_</PRE>

</BLOCKQUOTE>

<TABLE ID="anchor213" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="16.jpg" ALT="figure/prompt2" WIDTH="737" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor213">1.12</A>. Esempio di prompt. </P>

</TD></TR>
</TABLE>
</LI>

<LI>

<PRE>export PS1="\[\033[0;44m\]\u@\h \[\033[1;45m\]\w\[\033[0;39m\]# "</PRE>

<P>Questa configurazione generer&agrave; un <A NAME="index957"></A>prompt simile a questo:</P>
<BLOCKQUOTE>

<PRE> 
bigpaul@localhost ~/LDR# _</PRE>

</BLOCKQUOTE>

<TABLE ID="anchor214" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="17.jpg" ALT="figure/prompt3" WIDTH="737" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor214">1.13</A>. Esempio di prompt. </P>

</TD></TR>
</TABLE>
</LI>

<LI>

<PRE>export PS1="\[\033[1;34m\]\n\u@\h \[\033[1;33m\]--- \[
\033[1;34m\]\w\[\033[1;33m\]---\[\033[1;34m\] [\t] \[\033[1;33m\]---
\[\033[1;31m\]\!\n\[\033[1;31m\]$\[\033[0;39m\] "</PRE>

<P>Questa configurazione generer&agrave; un <A NAME="index958"></A>prompt simile a questo:</P>
<BLOCKQUOTE>

<PRE> 
bigpaul@localhost --- 
~/LDR--- [22:06:10] ---
533
$ _</PRE>

</BLOCKQUOTE>

<TABLE ID="anchor215" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="18.jpg" ALT="figure/prompt4" WIDTH="737" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor215">1.14</A>. Esempio di prompt. </P>

</TD></TR>
</TABLE>
</LI>

<LI>

<PRE>YLOBRN='\[\033[01;33;43m\]'
WHTBRN='\[\033[01;37;43m\]'
REDBRN='\[\033[00;31;43m\]'
REDBLK='\[\033[00;31;40m\]'
PPLBLK='\[\033[01;35;40m\]'
WHTBLK='\[\033[01;37;40m\]'
NONE='\[\033[00m\]'
HBLK='\[\033[00;30;30m\]'
HBLU='\[\033[01;34;34m\]'
BLU='\[\033[00;34;34m\]'
YEL='\[\033[00;33;33m\]'
WHT='\[\033[01;37;37m\]'
PRPL='\[\033[00;34;35m\]'
RED='\[\033[01;31;31m\]'
NORM='\[\033[01;00;0m\]'
CYAN='\[\033[00;31;36m\]'

case "$TERM" in
 xterm | xterm-color | xterm-debian | rxvt)
  # nei terminali grafici (xterm) imposta anche il titolo della finestra e dell'icona
  PS1="\[\033]1;\u: \w\007\033]2;\u: \w\007\033[01;37m\]$NORM\u@\h: 
             $WHT\w $HBLU&lt;\t&gt;$NORM\n$CYAN"'\$'"$NORM "
       ;;
   linux)
       # in console
       PS1="$NORM\u@\h: $WHT\w $HBLU&lt;\t&gt;$NORM\n$CYAN"'\$'"$NORM "
       ;;
   *)
        # altrimenti un prompt semplice
        PS1='\u@\h: \w \$ '
       ;;
esac

export PS1</PRE>

<P>Questa configurazione generer&agrave; un <A NAME="index959"></A>prompt simile a questo:</P>
<BLOCKQUOTE>

<PRE> 
bigpaul@localhost: ~/LDR &lt;22:07:01&gt;
$ _</PRE>

</BLOCKQUOTE>

<TABLE ID="anchor216" BORDER="0" WIDTH="100%">
<TR><TD>

<P><IMG SRC="19.jpg" ALT="figure/prompt5" WIDTH="737" ></P>

<P class="caption"> Figura <A HREF="ldr4.html#anchor216">1.15</A>. Esempio di prompt. </P>

</TD></TR>
</TABLE>
</LI>
</OL>

<P><STRONG>1.13.4)&nbsp;&nbsp;<A NAME="title197"></A><A NAME="anchor217"></A>
 Come si disabilita una console virtuale? <A NAME="index960"></A> <A NAME="index961"></A> </STRONG></P>

<P>Occorre modificare il file <CODE>/etc/inittab</CODE>. All'interno di questo file troviamo una serie di righe simile alle seguenti:</P>
<BLOCKQUOTE>

<PRE>1:2345:respawn:/sbin/getty 38400 tty1
2:23:respawn:/sbin/getty 38400 tty2
3:23:respawn:/sbin/getty 38400 tty3
4:23:respawn:/sbin/getty 38400 tty4
5:23:respawn:/sbin/getty 38400 tty5
6:23:respawn:/sbin/getty 38400 tty6</PRE>

</BLOCKQUOTE>

<P>Queste righe sono corrispondenti alle sei console virtuali. Per disabilitarne una o pi&ugrave; di una si dovr&agrave; inserire un simbolo di commento (<SAMP>#</SAMP>) all'inizio della riga corrispondente alla console da disabilitare.</P>

<P><STRONG>1.13.5)&nbsp;&nbsp;<A NAME="title198"></A><A NAME="anchor218"></A>
 Che significato hanno gli apici inversi (`) nella <A NAME="index962"></A>shell? <A NAME="index963"></A> <A NAME="index964"></A> </STRONG></P>

<P>La <A NAME="index965"></A>shell effettua un'espansione, eseguendo il comando all'interno degli apici inversi e catturandone lo <A NAME="index966"></A>standard output. Quest'ultimo verr&agrave; poi opportunamente sostituito all'interno del comando originario.</P>

<P>Ecco un esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ls -l `which cat`</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote62" NAME="footnote-ref62">(62)</A></SUP></P>

<P>In questo comando <SAMP>`which cat`</SAMP> ha come <A NAME="index967"></A>standard output:</P>
<BLOCKQUOTE>

<PRE>/bin/cat</PRE>

</BLOCKQUOTE>

<P>La <A NAME="index968"></A>shell eseguir&agrave; quindi:</P>
<BLOCKQUOTE>

<PRE>ls -l /bin/cat</PRE>

</BLOCKQUOTE>

<P>Lo stesso discorso funziona ovviamente anche con le variabili. Se ad esempio dichiariamo la variabile <VAR>PROVA</VAR> nel seguente modo:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>PROVA=`cat /etc/inetd.conf`</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>echo $PROVA</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>verr&agrave; visualizzato il contenuto del file <CODE>/etc/inetd.conf</CODE>. Gli apici inversi risultano quindi molto utili; vediamo un altro esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>kill -1 `pidof inetd`</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Il comando <SAMP>pidof inetd</SAMP> restituir&agrave; allo <A NAME="index969"></A>standard output l'attuale PID di <SAMP>inetd</SAMP>, facilitando quindi l'applicazione del comando <SAMP>kill</SAMP>.</P>

<P><STRONG>1.13.6)&nbsp;&nbsp;<A NAME="title199"></A><A NAME="anchor219"></A>
 Come funziona <SAMP>history</SAMP>, lo storico dei comandi? <A NAME="index970"></A> <A NAME="index971"></A> </STRONG></P>

<P>Se si impartisce il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>history</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>verr&agrave; visualizzata una lista dei comandi eseguiti dall'utente fino a quel momento. Ad ogni comando sar&agrave; associato un numero. Per eseguire nuovamente uno di questi comandi si utilizza il punto esclamativo (<STRONG>!</STRONG>) seguito dal numero che identifica il comando. Ecco un esempio:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>!267</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per richiamare dallo storico dei comandi l'ultimo comando che inizia con una determinata stringa si utilizza:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>!stringa</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se ad esempio il comando <SAMP>history</SAMP> avesse restituito:</P>
<BLOCKQUOTE>

<PRE>185 less README
186 cp Makefile /opt/Make/
187 less INSTALL
188 dmesg</PRE>

</BLOCKQUOTE>

<P>il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>!less</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>eseguir&agrave; nuovamente:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>less INSTALL</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.13.7)&nbsp;&nbsp;<A NAME="title200"></A><A NAME="anchor220"></A>
 Come si possono reindirizzare i messaggi di <CODE>/dev/console</CODE> su un'altra console? <A NAME="index972"></A> <A NAME="index973"></A> </STRONG></P>

<P>Per poter far questo, occorre aggiungere al file <CODE>/etc/lilo.conf</CODE> la riga:</P>
<BLOCKQUOTE>

<PRE>append="console=tty6"</PRE>

</BLOCKQUOTE>

<P>nella sezione <SAMP>image</SAMP>.</P>

<P>Esempio:</P>
<BLOCKQUOTE>

<PRE>image=/boot/vmlinuz-2.0.36-1
label=linux
root=/dev/hda2
append="console=tty6"
read-only</PRE>

</BLOCKQUOTE>

<P>Dopo avere apportato questa modifica, occorrer&agrave; dare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>/sbin/lilo</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>per rendere effettive le modifiche.</P>

<P><STRONG>1.13.8)&nbsp;&nbsp;<A NAME="title201"></A><A NAME="anchor221"></A>
 Come si pu&ograve; impostare la modalit&agrave; grafica della console? <A NAME="index974"></A> <A NAME="index975"></A> </STRONG></P>

<P>se si utilizza <A NAME="index976"></A>LILO come <A NAME="index977"></A>gestore degli avvii, si pu&ograve; utilizzare l'opzione <SAMP>vga</SAMP>. Inserendo:</P>
<BLOCKQUOTE>

<PRE>vga=extended </PRE>

</BLOCKQUOTE>

<P>nel file di configurazione di <A NAME="index978"></A>LILO si otterr&agrave; una risoluzione di 80 colonne per 50 righe.</P>

<P>Ecco la <A NAME="index979"></A>pagina di manuale <EM>lilo.conf</EM>(5) che spiega anche gli altri attributi di <SAMP>vga</SAMP>:</P>

<PRE>       vga=modo
              Ci&ograve; specifica il modo testo VGA che dovrebbe essere
              selezionato quando si fa il boot. Sono riconosciuti
              i  seguenti valori (caratteri minuscoli e maiuscoli
              sono equivalenti):

              normal: seleziona il normale modo testo 80x25.

              extended (o ext): seleziona il modo testo 80x50.

              ask: si ferma e attende un input dall'utente.

                          28 luglio 1995                        8

LILO.CONF(5)                                         LILO.CONF(5)

              &lt;numero&gt;: usa il  modo  testo  corrispondente.  Una
              lista  dei  modi  disponibili  la  si  pu&ograve; ottenere
              facendo il boot con vga=ask e premendo [Invio].


              Se &egrave; omessa questa variabile, &egrave; usato il  modo  VGA
              configurato   nell'immagine   del   kernel  (che  &egrave;
              impostato al momento della compilazione  usando  la
              variabile  SVGA_MODE nel Makefile del kernel, e che
              pi&ugrave; tardi pu&ograve;  essere  cambiato  con  il  programma
              rdev(8)).
</PRE>

<P>Ricordiamo infine che la risoluzione predefinita &egrave; impostata attraverso la variabile <VAR>SVGA_MODE</VAR> presente nel <CODE>Makefile</CODE> del <A NAME="index980"></A>kernel (generalmente in <CODE>/usr/src/linux/</CODE>). Il modo VGA predefinito potr&agrave; essere in seguito cambiato con il comando <SAMP>rdev</SAMP>.</P>

<P><STRONG>1.13.9)&nbsp;&nbsp;<A NAME="title202"></A><A NAME="anchor222"></A>
 <SAMP>shell-init: could not get current directory: getcwd: cannot access parent directories</SAMP> <A NAME="index981"></A> </STRONG></P>

<P>Questo messaggio pu&ograve; venire visualizzato quando si cerca di assumere l'identit&agrave; di un altro utente ma si incontrano dei problemi relativi al fatto che non vengono annullate le impostazioni del vecchio utente e non si caricano le impostazioni del nuovo. Per tentare di risolvere il problema, invece del comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>su <VAR>utente</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>si impartir&agrave;:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>su - <VAR>utente</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In questo modo la shell dell'utente sar&agrave; una shell di <A NAME="index982"></A>login. Ecco un estratto della <A NAME="index983"></A>pagina di manuale <EM>su</EM>(1):</P>

<PRE>       -, -l, --login
              Rende  la  shell una shell di login. Ci&ograve; implica le
              seguenti cose. Annulla tutte le  variabili  d'ambi&shy;
              ente  ad eccezione di `TERM', `HOME', e `SHELL' (le
              quali sono impostate  come  gi&agrave;  descritto),  e  di
              `USER'  e  `LOGNAME' (che sono impostate, anche per
              il superuser, come descritto sopra),  e  assegna  a
              `PATH'  il  valore  di default precompilato. Cambia
              alla home directory  dell'UTENTE.  Prepone  "-"  al
              nome  della shell, per far s&igrave; che essa legga i pro&shy;
              pri file di inizializzazione.</PRE>

<H2>1.14 &nbsp; <A NAME="title203"></A><A NAME="anchor223"></A>
 File di <EM>log</EM> <A NAME="index984"></A> <A NAME="index985"></A> </H2>

<P><STRONG>1.14.1)&nbsp;&nbsp;<A NAME="title204"></A><A NAME="anchor224"></A>
 Come si visualizzano i registri (<EM>log</EM>) degli accessi? <A NAME="index986"></A> <A NAME="index987"></A> </STRONG></P>

<P>Il comando per visualizzare i <EM>log</EM> di tutti gli accessi al sistema &egrave; <SAMP>last</SAMP>. Il risultato di questo programma pu&ograve; essere molto lungo per cui &egrave; meglio visualizzarlo a pagine mediante <SAMP>less</SAMP> (o <SAMP>more</SAMP>):</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>last | less</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se si desidera invece visualizzare gli ultimi <VAR>n</VAR> accessi, il comando sar&agrave;:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>last -<VAR>n</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.14.2)&nbsp;&nbsp;<A NAME="title205"></A><A NAME="anchor225"></A>
 Di chi si occupa della registrazione degli eventi del sistema? <A NAME="index988"></A> <A NAME="index989"></A> </STRONG></P>

<P>&Egrave; il demone <SAMP>syslogd</SAMP> che trova il suo file di configurazione in <CODE>/etc/syslogd.conf</CODE>. In quest'ultimo infatti sono dichiarati tutti i file che ospiteranno i messaggi delle diverse attivit&agrave; del sistema. Eccone un estratto:</P>
<BLOCKQUOTE>

<PRE>#
# First some standard logfiles.  Log by facility.
#

auth,authpriv.*                 /var/log/auth.log
*.*;auth,authpriv.none          -/var/log/syslog
#cron.*                         /var/log/cron.log
daemon.*                        -/var/log/daemon.log
kern.*                          -/var/log/kern.log
lpr.*                           -/var/log/lpr.log
mail.*                          /var/log/mail.log
user.*                          -/var/log/user.log
uucp.*                          -/var/log/uucp.log

#
# Logging for the mail system. Split it up so that
# it is easy to write scripts to parse these files.
#
mail.info                       -/var/log/mail.info
mail.warn                       -/var/log/mail.warn
mail.err                        /var/log/mail.err

# Logging for INN news system
#
news.crit                       /var/log/news/news.crit
news.err                        /var/log/news/news.err
news.notice                     -/var/log/news/news.notice

#
# Some `catch-all' logfiles.
#
*.=debug;\
        auth,authpriv.none;\
        news.none;mail.none     -/var/log/debug
*.=info;*.=notice;*.=warn;\
        auth,authpriv.none;\
        cron,daemon.none;\
        mail,news.none          -/var/log/messages</PRE>

</BLOCKQUOTE>

<P><STRONG>1.14.3)&nbsp;&nbsp;<A NAME="title206"></A><A NAME="anchor226"></A>
 Come si possono ricavare informazioni dai file di <EM>log</EM>? <A NAME="index990"></A> </STRONG></P>

<P>Il meccanismo principale utilizzato dalla maggior parte dei sistemi <A NAME="index991"></A>UNIX per registrare le attivit&agrave; del sistema &egrave; il demone <SAMP>syslogd</SAMP>, anche se alcune macchine <A NAME="index992"></A>UNIX hanno dei demoni appositi che creano file di <EM>log</EM> binari consultabili esclusivamente con appositi programmi proprietari.</P>

<P>I sistemi GNU/Linux utilizzano generalmente <SAMP>syslogd</SAMP>. In genere <SAMP>syslogd</SAMP> (ma anche questo dipende dalla distribuzione e pu&ograve; essere cambiato dall'amministratore) registra tutto nella directory <CODE>/var/log/</CODE>. <A NAME="index993"></A>Red&nbsp;Hat ad esempio registra il comportamento dei demoni in <CODE>daemon.log</CODE> presente in <CODE>/var/log/</CODE>, e ha anche altri file di <EM>log</EM> oltre al consueto <CODE>messages</CODE>.</P>

<P>In ogni caso, indipendentemente dalla distribuzione che si utilizza, impartendo un:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>tail -f /var/log/messages</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>verranno visualizzate le ultime righe del file, ed anche quelle che man mano vanno aggiungendosi. Questo risulta particolarmente utile per tenere sotto controllo lo svolgersi di determinate operazioni (connessione ad <A NAME="index994"></A>Internet, accessi al sistema, ecc.).</P>

<P>Chiaramente il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>more /var/log/messages</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>permetter&agrave; la consultazione di tutto il file di <EM>log</EM>.</P>

<P>Per fare ricerche sul file di <EM>log</EM> si pu&ograve; usare il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cat /var/log/messages | grep <VAR>stringa</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote63" NAME="footnote-ref63">(63)</A></SUP></P>

<P>Per la pulizia del file di <EM>log</EM>, alcune distribuzioni utilizzano <SAMP>rotatelogs</SAMP>, che rinomina e comprime il file di <EM>log</EM> dopo un determinato numero di giorni.</P>

<P><STRONG>1.14.4)&nbsp;&nbsp;<A NAME="title207"></A><A NAME="anchor227"></A>
 Si pu&ograve; creare uno <A NAME="index995"></A>script che riduca i file di <EM>log</EM>? <A NAME="index996"></A> <A NAME="index997"></A> <A NAME="index998"></A> </STRONG></P>

<P>La rimozione brutale dei file di <EM>log</EM> pu&ograve; essere effettuata mediante il comando seguente:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>find /var/log -name "*" -ctime <VAR>giorni</VAR> -exec rm {}\;</CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote64" NAME="footnote-ref64">(64)</A></SUP></P>

<P>Ecco la <A NAME="index999"></A>pagina di manuale <EM>find</EM>(1L) che spiega il significato di <VAR>-ctime</VAR>:</P>
<BLOCKQUOTE>

<PRE>       -ctime n
              Lo  stato del file ha subito l'ultima modifica n*24
              ore fa.</PRE>

</BLOCKQUOTE>

<P>Se invece si desidera ridurre uno o pi&ugrave; file di <EM>log</EM>, si dovr&agrave; creare uno script che esegua le seguenti operazioni: <SUP><A HREF="amministrazione_del_sistema.html#footnote65" NAME="footnote-ref65">(65)</A></SUP></P>
<BLOCKQUOTE>

<PRE># tail -100 /var/log/messages &gt; /var/log/messages.new
# rm -rf /var/log/messages
# mv /var/log/messages.new /var/log/messages</PRE>

</BLOCKQUOTE>

<P><STRONG>1.14.5)&nbsp;&nbsp;<A NAME="title208"></A><A NAME="anchor228"></A>
 Si possono inviare i file di <EM>log</EM> attraverso la posta elettronica? <A NAME="index1000"></A> <A NAME="index1001"></A> <A NAME="index1002"></A> </STRONG></P>

<P>Si pu&ograve; fare mediante <SAMP>mpack</SAMP>.</P>
<BLOCKQUOTE>

<PRE>DESCRIPTION
       The mpack program encodes the the named  file  in  one  or
       more  MIME messages.  The resulting messages are mailed to
       one or more recipients, written to a named file or set  of
       files, or posted to a set of newsgroups.</PRE>

</BLOCKQUOTE>

<P>Innanzitutto si dovr&agrave; comprimere il file di <EM>log</EM> che interessa spedire:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>tar zcvf log.tar.gz /var/log/<VAR>filedilog</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>In seguito, si potr&agrave; spedire il file come allegato con <SAMP>mpack</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>mpack -s <VAR>oggetto</VAR> -d <VAR>descrizione</VAR> <VAR>archivio</VAR> <VAR>destinatario</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote66" NAME="footnote-ref66">(66)</A></SUP></P>

<P><STRONG>1.14.6)&nbsp;&nbsp;<A NAME="title209"></A><A NAME="anchor229"></A>
 Come si pu&ograve; ridimensionare <CODE>/var/log/wtmp</CODE>? <A NAME="index1003"></A> <A NAME="index1004"></A> </STRONG></P>

<P>Il file <CODE>/var/log/wtmp</CODE> non pu&ograve; essere ridimensionato come indicato nella LDR <A HREF="ldr4.html#anchor227">1.14.4</A> dal momento che il suo contenuto non &egrave; testuale.</P>

<P>Per svuotarne il contenuto, si dar&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cat /dev/null &gt; /var/log/wtmp</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Si consiglia in ogni caso di fare una copia di sicurezza prima dell'operazione:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>cp /var/log/wtmp /var/log/wtmp.old</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.14.7)&nbsp;&nbsp;<A NAME="title210"></A><A NAME="anchor230"></A>
 Come si reindirizza lo <A NAME="index1005"></A>standard error? </STRONG></P>

<P>Per reindirizzare lo <A NAME="index1006"></A>standard error su un file (che quindi conterr&agrave; gli eventuali errori) occorrer&agrave; aggiungere alla fine del comando:</P>
<BLOCKQUOTE>

<PRE>2&gt; errori</PRE>

</BLOCKQUOTE>

<P>Dove <CODE>errori</CODE> &egrave; il file in cui verranno scritti gli errori. Ecco un esempio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>patch &lt; patchfile 2&gt; errori</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Qualora il comando <SAMP>patch</SAMP> produrr&agrave; degli errori, essi verranno scritti nel file <CODE>errori</CODE>.</P>

<P><STRONG>1.14.8)&nbsp;&nbsp;<A NAME="title211"></A><A NAME="anchor231"></A>
 Come si possono visualizzare i messaggi che appaiono all'avvio del sistema? <A NAME="index1007"></A> </STRONG></P>

<P>I messaggi visualizzati all'avvio sono messaggi del <A NAME="index1008"></A>kernel e dei vari processi di inizializzazione del sistema. Per poterli visualizzare tutti, si dovranno utilizzare i seguenti metodi:</P>

<UL>

<LI>

<P><SAMP>dmesg</SAMP> visualizzer&agrave; i messaggi di avvio:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>dmesg</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P>per visualizzare i <EM>log</EM> del <A NAME="index1009"></A>kernel si dovr&agrave; visualizzare il file <CODE>/var/log/kern.log</CODE>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>less /var/log/kern.log</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>

<LI>

<P>pu&ograve; in ogni caso risultare utile visualizzare i messaggi di comportamento del sistema:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>less /var/log/syslog</CODE></STRONG>[<KBD>Invio</KBD>]</P>
</LI>
</UL>

<H2>1.15 &nbsp; <A NAME="title212"></A><A NAME="anchor232"></A>
 <A NAME="index1010"></A>Cron e <A NAME="index1011"></A>At <A NAME="index1012"></A> <A NAME="index1013"></A> <A NAME="index1014"></A> </H2>

<P><STRONG>1.15.1)&nbsp;&nbsp;<A NAME="title213"></A><A NAME="anchor233"></A>
 Come si verifica se <A NAME="index1015"></A>Cron &egrave; attivo? </STRONG></P>

<P>Si deve verificare che sia attivo il demone di <A NAME="index1016"></A>Cron (<SAMP>crond</SAMP>) mediante il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ps ax|grep cron</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.15.2)&nbsp;&nbsp;<A NAME="title214"></A><A NAME="anchor234"></A>
 Come si attiva <A NAME="index1017"></A>Cron? </STRONG></P>

<P>Ammesso che <A NAME="index1018"></A>Cron sia installato nel sistema, se esso non &egrave; attivo, lo possiamo attivare con il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>/etc/init.d/crond start</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>oppure mediante:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>/etc/rc.d/init.d/crond start</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>a seconda della distribuzione di cui disponiamo.</P>

<P><STRONG>1.15.3)&nbsp;&nbsp;<A NAME="title215"></A><A NAME="anchor235"></A>
 Quali sono i file di configurazione del <A NAME="index1019"></A>Cron? <A NAME="index1020"></A> </STRONG></P>

<P>Il comando <SAMP>crontab</SAMP> permette la modifica delle pianificazioni dei comandi per un utente. Il file di configurazione principale dei comandi di pianificazione di un sistema &egrave; il file <CODE>/etc/crontab</CODE>. I file contenenti le pianificazioni degli utenti sono contenuti all'interno della directory <CODE>/var/spool/cron/crontabs/</CODE>.</P>

<P><STRONG>1.15.4)&nbsp;&nbsp;<A NAME="title216"></A><A NAME="anchor236"></A>
 Come si modificano i file <A NAME="index1021"></A>crontab? </STRONG></P>

<P>Il comando che si deve utilizzare per modificare le pianificazioni dei comandi per un utente &egrave; <SAMP>crontab</SAMP> con l'opzione <SAMP>-e</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>crontab -e</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.15.5)&nbsp;&nbsp;<A NAME="title217"></A><A NAME="anchor237"></A>
 Come sono strutturati i file <A NAME="index1022"></A>crontab? </STRONG></P>

<P>La struttura &egrave; abbastanza semplice. Essa &egrave; in pratica composta da righe ognuna delle quali pianifica un comando ed ha la seguente struttura:</P>
<BLOCKQUOTE>

<PRE>data comando</PRE>

</BLOCKQUOTE>

<P>Per <VAR>data</VAR> si intende quando eseguire un determinato comando. <VAR>data</VAR> ha la seguente struttura:</P>
<BLOCKQUOTE>

<PRE>minuti ore gg.mese mesi gg.settimana</PRE>

</BLOCKQUOTE>

<P>Le voci che non si intende specificare dovranno essere rimpiazzate da un asterisco. Ecco alcuni esempi:</P>

<UL>

<LI>
<BLOCKQUOTE>

<PRE>30 10 * * * pppd</PRE>

</BLOCKQUOTE>

<P>eseguir&agrave; ogni giorno alle 10.30 la connessione ad <A NAME="index1023"></A>Internet;</P>
</LI>

<LI>
<BLOCKQUOTE>

<PRE>* 10 * * 1-5 pppd</PRE>

</BLOCKQUOTE>

<P>eseguir&agrave; alle 10 la connessione ad <A NAME="index1024"></A>Internet ma solo dal luned&igrave; al venerd&igrave;;</P>
</LI>

<LI>
<BLOCKQUOTE>

<PRE>10 18 * 1-5,11-12 1 pppd</PRE>

</BLOCKQUOTE>

<P>eseguir&agrave; la connessione ad <A NAME="index1025"></A>Internet alle 18.10 di tutti i luned&igrave; da gennaio a maggio e da novembre e dicembre;</P>
</LI>

<LI>
<BLOCKQUOTE>

<PRE>*/15 * * * * pppd</PRE>

</BLOCKQUOTE>

<P>eseguir&agrave; la connessione ad <A NAME="index1026"></A>Internet ogni 15 minuti;</P>
</LI>

<LI>
<BLOCKQUOTE>

<PRE>* */15 * * * pppd</PRE>

</BLOCKQUOTE>

<P>eseguir&agrave; la connessione ad <A NAME="index1027"></A>Internet ogni 15 ore.</P>
</LI>
</UL>

<P><STRONG>1.15.6)&nbsp;&nbsp;<A NAME="title218"></A><A NAME="anchor238"></A>
 Come si visualizzano i file <A NAME="index1028"></A>crontab? </STRONG></P>

<P>Il comando che si deve utilizzare per visualizzare le pianificazioni dei comandi per un utente &egrave; <SAMP>crontab</SAMP> con l'opzione <SAMP>-l</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>crontab -l</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.15.7)&nbsp;&nbsp;<A NAME="title219"></A><A NAME="anchor239"></A>
 Come si cancellano i file <A NAME="index1029"></A>crontab? </STRONG></P>

<P>Il comando che si deve utilizzare per cancellare le pianificazioni dei comandi per un utente &egrave; <SAMP>crontab</SAMP> con l'opzione <SAMP>-r</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>crontab -r</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.15.8)&nbsp;&nbsp;<A NAME="title220"></A><A NAME="anchor240"></A>
 Come si modificano i file <A NAME="index1030"></A>crontab dell'utente <SAMP>tizio</SAMP>? </STRONG></P>

<P>Il comando che l'amministratore di sistema deve utilizzare per modificare le pianificazioni di un utente &egrave; <SAMP>crontab</SAMP> con l'opzione <SAMP>-u</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>crontab -u <VAR>utente</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote67" NAME="footnote-ref67">(67)</A></SUP></P>

<P><STRONG>1.15.9)&nbsp;&nbsp;<A NAME="title221"></A><A NAME="anchor241"></A>
 Cosa succede se <A NAME="index1031"></A>Cron &egrave; installato, ma la macchina &egrave; spenta? <A NAME="index1032"></A> </STRONG></P>

<P>Nel caso la macchina rimanga spenta nell'arco di tempo in cui erano previste alcune pianificazioni di lavoro, queste ultime non verranno mai pi&ugrave; eseguite. Questo problema, molto comune nelle macchine non costantemente accese, pu&ograve; essere risolto utilizzando <A NAME="index1033"></A>Anacron.</P>

<P><A NAME="index1034"></A>Anacron si basa sui file <CODE>/etc/anacrontab</CODE> che posseggono una struttura simile ai file <A NAME="index1035"></A>crontab.</P>

<P><STRONG>1.15.10)&nbsp;&nbsp;<A NAME="title222"></A><A NAME="anchor242"></A>
 Si pu&ograve; utilizzare <A NAME="index1036"></A>At con applicazioni <A NAME="index1037"></A>X? <A NAME="index1038"></A> </STRONG></P>

<P>Utilizzando <SAMP>at</SAMP> per invocare applicazioni che girano sotto il <A NAME="index1039"></A>server X, potrebbe manifestarsi il seguente errore:</P>
<BLOCKQUOTE>

<PRE>mozilla: cannot connect to X server</PRE>

</BLOCKQUOTE>

<P>Si tratta di una questione di permessi di accesso al <A NAME="index1040"></A>server X. Se <SAMP>mozilla</SAMP> &egrave; il programma da eseguire, <SAMP>at</SAMP> dovr&agrave; invocare il seguente <A NAME="index1041"></A>script piuttosto che l'eseguibile <SAMP>mozilla</SAMP> stesso:</P>
<BLOCKQUOTE>

<PRE>DISPLAY=:0; export DISPLAY
xhost +local:
mozilla
xhost -local: </PRE>

</BLOCKQUOTE>

<H2>1.16 &nbsp; <A NAME="title223"></A><A NAME="anchor243"></A>
Processi ed utilizzo delle risorse del sistema</H2>

<P><STRONG>1.16.1)&nbsp;&nbsp;<A NAME="title224"></A><A NAME="anchor244"></A>
 Perch&eacute; spesso si nota un improvviso aumento dell'attivit&agrave; del disco fisso e un conseguente rallentamento delle prestazioni del sistema? </STRONG></P>

<P>&Egrave; quasi sicuramente un comando invocato dal demone <SAMP>crond</SAMP>. In una distribuzione vengono generalmente inseriti in maniera predefinita dei comandi che <SAMP>crond</SAMP> invoca ad intervalli di tempi regolari. Tra i comandi pi&ugrave; laboriosi che <A NAME="index1042"></A>Cron esegue c'&egrave; <SAMP>updatedb</SAMP> e <SAMP>e2fsck</SAMP>. Il primo aggiorna una <A NAME="index1043"></A>base di dati di nomi di file il secondo verifica un <A NAME="index1044"></A>file&nbsp;system <A NAME="index1045"></A>Ext2. Si possono modificare le impostazioni di <A NAME="index1046"></A>Cron seguendo le indicazioni delle LDR presenti nella sezione <A HREF="ldr4.html#anchor232">1.15</A>.</P>

<P><STRONG>1.16.2)&nbsp;&nbsp;<A NAME="title225"></A><A NAME="anchor245"></A>
 Come si ottengono informazioni sulle risorse del sistema? <A NAME="index1047"></A> <A NAME="index1048"></A> <A NAME="index1049"></A> </STRONG></P>

<P>Il programma <SAMP>top</SAMP> fornisce in tempo reale istantanee dell'attivit&agrave; del processore. Ecco la visualizzazione che genera:</P>
<BLOCKQUOTE>

<PRE>  2:18pm  up  2:06,  2 users,  load average: 0.00, 0.05, 0.07
55 processes: 54 sleeping, 1 running, 0 zombie, 0 stopped
CPU states:  2.9% user,  5.2% system,  0.0% nice, 91.8% idle
Mem:  192560K av, 122660K used,  69900K free,  64136K shrd,  17832K buff
Swap:  56220K av,      0K used,  56220K free                 69700K cached

  PID USER     PRI  NI  SIZE  RSS SHARE STAT  LIB %CPU %MEM   TIME COMMAND
  142 root      18   0   440  440   376 S       0  3.6  0.2   0:18 gpm
 1672 bigpaul   18   0  1328 1328   704 R       0  1.7  0.6   0:01 top
  292 root      15   0 13100 8804  1968 S       0  1.1  4.5   5:12 XF86_SVGA
  887 bigpaul    5   0  2368 2364  1588 S       0  0.9  1.2   0:05 xterm
  870 bigpaul    2   0  6884 6884  2032 S       0  0.5  3.5   2:26 wish
    1 root       0   0   464  464   404 S       0  0.0  0.2   0:06 init
    2 root       0   0     0    0     0 SW      0  0.0  0.0   0:00 kflushd
    3 root       0   0     0    0     0 SW      0  0.0  0.0   0:00 kupdate
    4 root       0   0     0    0     0 SW      0  0.0  0.0   0:00 kpiod
    5 root       0   0     0    0     0 SW      0  0.0  0.0   0:00 kswapd
   73 daemon     0   0   396  396   320 S       0  0.0  0.2   0:00 portmap
  134 root       0   0   636  636   524 S       0  0.0  0.3   0:00 syslogd
  136 root       0   0   860  860   388 S       0  0.0  0.4   0:00 klogd
  147 root       0   0   544  544   472 S       0  0.0  0.2   0:00 inetd
  158 root       0   0   564  564   480 S       0  0.0  0.2   0:00 lpd
  219 root       0   0   996  996   796 S       0  0.0  0.5   0:00 master
  222 postfix    0   0  1132 1132   896 S       0  0.0  0.5   0:00 qmgr
  232 postgres   0   0  1160 1160   948 S       0  0.0  0.6   0:00 postmaster
[...]</PRE>

</BLOCKQUOTE>

<P>Il programma <SAMP>free</SAMP> indica invece la quantit&agrave; di memoria libera ed utilizzata dal sistema. Eccone l'output:</P>
<BLOCKQUOTE>

<PRE>             total       used       free     shared    buffers     cached
Mem:        192560     122188      70372      63824      17832      69720
-/+ buffers/cache:      34636     157924
Swap:        56220          0      56220</PRE>

</BLOCKQUOTE>

<P>Esiste anche <SAMP>tload</SAMP> che fornisce una visualizzazione simil grafica mediante l'utilizzazione di asterischi. Ulteriori informazioni possono essere rilevate mediante la visualizzazione dei file <CODE>/proc/meminfo</CODE>:</P>
<BLOCKQUOTE>

<PRE>        total:    used:    free:  shared: buffers:  cached:
Mem:  197181440 125710336 71471104 65290240 18259968 72142848
Swap: 57569280        0 57569280
MemTotal:    192560 kB
MemFree:      69796 kB
MemShared:    63760 kB
Buffers:      17832 kB
Cached:       70452 kB
SwapTotal:    56220 kB
SwapFree:     56220 kB</PRE>

</BLOCKQUOTE>

<P>e <CODE>/proc/loadavg</CODE>:</P>
<BLOCKQUOTE>

<PRE>0.11 0.16 0.11 1/55 1773</PRE>

</BLOCKQUOTE>

<P>Per quanto riguarda la gestione della memoria virtuale e dello spazio di <A NAME="index1050"></A>swap, si potr&agrave; lanciare il comando <SAMP>vmstat</SAMP> e visualizzare il file <CODE>/proc/swaps</CODE>. Quest'ultimo fornisce un output generalmente simile a questo:</P>
<BLOCKQUOTE>

<PRE>Filename                        Type            Size    Used    Priority
/dev/hda3                       partition       56220   0       -1</PRE>

</BLOCKQUOTE>

<P>Mentre <SAMP>vmstat</SAMP> restituisce qualcosa simile a questo:</P>
<BLOCKQUOTE>

<PRE> procs      memory    swap   io  system       cpu
r b w  swpd   free  buff cache si  so    bi    bo   in    cs us sy id
1 0 0     0 100852 10716 48708  0   0     4     1  162   392 21  8 71</PRE>

</BLOCKQUOTE>

<P><STRONG>1.16.3)&nbsp;&nbsp;<A NAME="title226"></A><A NAME="anchor246"></A>
 Quanta memoria e quante risorse sta utilizzando un processo? <A NAME="index1051"></A> <A NAME="index1052"></A> </STRONG></P>

<P>Si pu&ograve; ottenere questa informazione sia mediante il comando <SAMP>top</SAMP> che mediante il comando <SAMP>ps</SAMP>:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>ps aux | less</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P><STRONG>1.16.4)&nbsp;&nbsp;<A NAME="title227"></A><A NAME="anchor247"></A>
 Cosa &egrave; un <SAMP>fork</SAMP>? <A NAME="index1053"></A> <A NAME="index1054"></A> <A NAME="index1055"></A> </STRONG></P>

<P><SAMP>fork()</SAMP> &egrave; una chiamata di sistema.In pratica consiste nella creazione di un processo figlio di quello attuale. Ogni processo che viene eseguito nasce da un processo gi&agrave; esistente mediante la chiamata di sistema <SAMP>fork()</SAMP>.</P>

<P><STRONG>1.16.5)&nbsp;&nbsp;<A NAME="title228"></A><A NAME="anchor248"></A>
 Cosa &egrave; il PID dei processi? <A NAME="index1056"></A> <A NAME="index1057"></A> </STRONG></P>

<P>Il PID &egrave; un numero che identifica un processo. Mediante il comando <SAMP>ps</SAMP>, verranno elencati tutti i processi con i loro PID. Per alcuni processi all'interno della directory <CODE>/var/run</CODE> esistono i file <VAR>processo</VAR>.pid che contengono il PID di un processo. A volte essi possono contenere la riga di comando con cui il processo &egrave; stato attivato; ad esempio il file <CODE>sendmail.pid</CODE> contiene:</P>
<BLOCKQUOTE>

<PRE>174
/usr/sbin/sendmail -bd -q10m</PRE>

</BLOCKQUOTE>

<P>Nella programmazione di <A NAME="index1058"></A>script per la <A NAME="index1059"></A>shell &egrave; possibile utilizzare questi file per fermare un processo. Se ad esempio si volesse interrompere il processo <SAMP>apache</SAMP>, si dovr&agrave; creare uno <A NAME="index1060"></A>script contenente le seguenti righe:</P>
<BLOCKQUOTE>

<PRE>#!/bin/csh
set MYVAR = `more /var/run/httpd.pid`
echo "Il PID di Apache &egrave; : $MYVAR"
echo "Sto per eseguire il comando: kill -9 $MYVAR"
# Uccide il demone</PRE>

</BLOCKQUOTE>

<P>Ecco il significato di questo <A NAME="index1061"></A>script:</P>

<UL>

<LI>

<P>La prima riga indica che lo <A NAME="index1062"></A>script deve essere eseguito richiamando la <A NAME="index1063"></A>shell <SAMP>csh</SAMP>;</P>
</LI>

<LI>

<P>tutte le righe con il simbolo <SAMP>#</SAMP> all'inizio della riga sono commenti;</P>
</LI>

<LI>

<P><VAR>MYVAR</VAR> assumer&agrave; il risultato del comando <SAMP>more /var/run/httpd.pid</SAMP> cio&egrave; in pratica il PID di <SAMP> apache</SAMP>;</P>
</LI>

<LI>

<P>l'ultima riga rappresenta l'uccisione del processo.</P>
</LI>
</UL>

<P>Ecco lo stesso <A NAME="index1064"></A>script per la <A NAME="index1065"></A>shell Bash:</P>
<BLOCKQUOTE>

<PRE>#!/bin/sh
#mette il pid di apache in una variabile
MYVAR = `more /var/run/httpd.pid`
echo "Il PID di Apache &egrave; : $MYVAR"
echo "Sto per eseguire il comando: kill -9 $MYVAR"
# Uccide il demone
kill -9 $MYVAR</PRE>

</BLOCKQUOTE>

<P><STRONG>1.16.6)&nbsp;&nbsp;<A NAME="title229"></A><A NAME="anchor249"></A>
 Come si visualizzano i programmi che attualmente sono in esecuzione e come si interrompono? <A NAME="index1066"></A> <A NAME="index1067"></A> </STRONG></P>

<P>Per elencare i processi in esecuzione si utilizzer&agrave; il programma <SAMP>ps</SAMP>:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>ps aux</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Per uccidere (concludere) uno di questi processi:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>kill -9 <VAR>PID</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote68" NAME="footnote-ref68">(68)</A></SUP></P>

<P><STRONG>1.16.7)&nbsp;&nbsp;<A NAME="title230"></A><A NAME="anchor250"></A>
 Come si fa a sapere il PID del processo che tiene occupato un dispositivo? <A NAME="index1068"></A> <A NAME="index1069"></A> </STRONG></P>

<P>Per sapere il PID del processo che tiene occupato un dispositivo si utilizza il comando <SAMP>fuser</SAMP>. Questo comando mostra i PID dei processi che stanno utilizzando i file o i <A NAME="index1070"></A>file&nbsp;system specificati.</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>fuser -m /dev/<VAR>dispositivo</VAR></CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Se il PID restituito risulta essere associato alla <A NAME="index1071"></A>shell, il dispositivo sar&agrave; occupato perch&eacute; si &egrave; nella directory montata o in una delle sue sottodirectory.</P>

<P><STRONG>1.16.8)&nbsp;&nbsp;<A NAME="title231"></A><A NAME="anchor251"></A>
 Come si fa a chiudere un'applicazione bloccata? <A NAME="index1072"></A> <A NAME="index1073"></A> </STRONG></P>

<P>Per chiuderla occorrer&agrave; ucciderne il processo:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>kill -9 <VAR>PID</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote69" NAME="footnote-ref69">(69)</A></SUP></P>

<H2>1.17 &nbsp; <A NAME="title232"></A><A NAME="anchor252"></A>
Risoluzione di problemi di una certa entit&agrave;</H2>

<P><STRONG>1.17.1)&nbsp;&nbsp;<A NAME="title233"></A><A NAME="anchor253"></A>
 Storia di un recupero della tavola delle partizioni <A NAME="index1074"></A> <A NAME="index1075"></A> </STRONG></P>

<P> Riporto qui di seguito non una vera e propria FAQ ma un racconto di un'impresa sufficientemente eroica che ha portato l'amico Manfredo Marsili a recuperare i propri dati su un disco la cui tavola delle partizioni si era corrotta. Il testo risulta narrato in prima persona ed &egrave; quanto pi&ugrave; possibile conforme all'originale. </P>

<P> &laquo;La situazione del mio disco fisso, prima del disastro era questa: </P>
<BLOCKQUOTE>

<PRE>Partizione primaria                     7MB          Boot Manager di OS/2
Partizione primaria             C:\     203  Mibyte  Dos 6.20 (boot)
Partizione primaria
  (non formattata e nascosta)           3004 Mibyte
Partizione Estesa               D:\     1004 Mibyte  Dos 6.20 (dati)
Partizione Estesa               E:\     603  Mibyte  OS/2 (boot)
Partizione Estesa               F:\     3231 Mibyte  OS/2 (dati)</PRE>

</BLOCKQUOTE>

<P> Le partizioni <A NAME="index1076"></A>OS/2 erano quelle con i dati pi&ugrave; preziosi. Dopo il disastro il disco era completamente inaccessibile. I vari fdisk del Dos, di GNU/Linux e di OS2 mi riportavano dati completamente incoerenti oppure non vedevano neanche pi&ugrave; il disco fisso. Fortunatamente potevo avviare Linux da un dischetto e con il comando </P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>less -f /dev/hda</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P> riuscivo a leggerne il contenuto. Apparentemente le mie due partizioni <A NAME="index1077"></A>OS/2 erano intatte ma ovviamente non riuscivo nemmeno a montarle. Almeno ero certo di non aver sovrascritto parti del disco perci&ograve; quasi certamente era danneggiata soltanto la tabella delle partizioni. </P>

<P> Il fatto &egrave; che avevo un'idea piuttosto vaga di cosa fosse una tavola delle partizioni, men che mai sapevo dove mettere le mani per ricostruirla. </P>

<P> Una ricerca veloce mi ha permesso di raccogliere un po' di documentazione che ho studiato prima di mettermi all'opera: &lt;<EM><A HREF="http://www.win.tue.nl/~aeb/linux/partitions/">http://www.win.tue.nl/~aeb/linux/partitions/</A></EM>&gt; La tabella delle partizioni si trova nel Master Boot Record, il settore di avvio di 512&nbsp;byte, che &egrave; a sua volta il primo settore del disco fisso. I primi 445&nbsp;byte contengono il codice eseguibile dell'<A NAME="index1078"></A>MBR, quello per intenderci che viene ripristinato con: </P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>fdisk /mbr</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P> A partire dall'indirizzo <STRONG>0x1be=446</STRONG>, ci sono quattro gruppi di sedici byte ciascuno che identificano le partizioni. Infine, il byte di chiusura del settore deve essere sempre &laquo;55 AA&raquo;. Quattro gruppi di sedici byte significa che c'&egrave; posto solo per quattro partizioni. Infatti un disco fisso non pu&ograve; avere pi&ugrave; di quattro partizioni primarie tutte insieme. Tralasciamo per un momento il problema delle partizioni estese. Vediamo prima il significato dei sedici byte che identificano una partizione: </P>
<BLOCKQUOTE>

<PRE>Stato HD sec/cyl  Tipo  Head sec/cyl settore boot num. settori
===== == =======  ====  ==== ======= ============ ============
80   01 01  00    0A   FE    3F 00   3F 00 00 00  82 3E 00 00</PRE>

</BLOCKQUOTE>

<P> i valori sono espressi in numeri esadecimali. </P>
<BLOCKQUOTE>

<PRE>80:             indica che la partizione &egrave; attiva  (inattiva = 00);
01:             indica il numero della testina (Head) da cui inizia la
                partizione. (valori possibili: 0-255);
01 00:          indicano il settore e il cilindro (Sector-Cylinder) di inizio
                della partizione. Valori possibili: Settore=0/1024 
                Cilindro=1/63;
0A:             indica il tipo di partizione (Fat16 - HPFS - Linux, ecc.);
FE 3F 00:       segnalano rispettivamente la testina, settore e cilindro di
                fine partizione;
3F 00 00 00:    l'indirizzo del settore di avvio della partizione;
82 3E 00 00:    il numero di settori in uso alla partizione.</PRE>

</BLOCKQUOTE>

<P> La procedura consiste nel trovare in qualche modo questi dati, a mano o servendosi di qualche programma di utilit&agrave; e riscriverli poi nel <A NAME="index1079"></A>MBR. Ho provato a cercare tutti i marcatori &laquo;55 AA&raquo; che segnalano l'inizio della partizione. Ho scoperto che sul mio HD ne erano presenti una sessantina. Allora pazientemente ho selezionato indirizzo dopo indirizzo ed esaminato i settori per capire se potevano essere l'inizio delle partizioni che cercavo. Fortunatamente ricordavo, con buona approssimazione la dimensione di quelle che avevo perso e quindi ho potuto ritrovarle con relativa facilit&agrave;. </P>

<P> Ogni volta che ne trovavo una, mi segnavo i valori di CHS (Cylinder/Head/Sector) e il numero del settore. Queste informazioni sono necessarie per ricostruire i 16&nbsp;byte che identificano la partizione. Il problema da affrontare a questo punto era quello di mettere nella giusta sequenza i 16&nbsp;byte. I valori di CHS (Cilinder/Head/Sector) sono espressi in formato compresso. </P>

<P> Durante una delle mie esplorazioni su <A NAME="index1080"></A>Internet mi sono imbattuto in un programma di utilit&agrave; <SAMP>gpart</SAMP>. Qui trovate l'ultima versione: &lt;<EM><A HREF="http://www.stud.uni-hannover.de/user/76201/gpart/">http://www.stud.uni-hannover.de/user/76201/gpart/</A></EM>&gt; Come altri programmi che ho trovato, ma che non mi hanno convinto troppo, <SAMP>gpart</SAMP>, permette di recuperare le partizioni perse di un disco fisso. </P>

<P> Da GNU/Linux, ho eseguito: </P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>gpart -vfn s -l /home/manfred/gpart.log /dev/hda</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P> dopo quasi un'ora di elaborazione avevo come risultato un file di <EM>log</EM> con tutto il necessario per la ricostruzione delle mie partizioni. </P>

<P> Questo &egrave; uno stralcio dell'output di <SAMP>gpart</SAMP>: </P>

<PRE>dev(/dev/hda) mss(512) chs(1027/255/63)(LBA) #s(16498755) size(8056mb)

   [...]
   
   Primary partition(3)
      type: 010(0x0A)(OS/2 Boot Manager or OPUS) (BOOT)
      size: 7mb #s(16002) s(63-16064)
      chs:  (0/1/1)-(0/254/63)d (0/1/1)-(0/254/63)r
      hex:  80 01 01 00 0A FE 3F 00 3F 00 00 00 82 3E 00 00
   
      Possible partition(OS/2 HPFS), size(603mb), offset(4220mb)
         type: 000(0x00)(unused)
         size: 603mb #s(1236940) s(8643033-9879972)
         chs:  (538/1/1)-(614/254/61)d (538/1/1)-(614/254/61)r
         hex:  00 01 81 1A 00 FE BD 66 D9 E1 83 00 CC DF 12 00

   Possible extended partition at offset(4824mb)
      Possible partition(OS/2 HPFS), size(3231mb), offset(4824mb)
         type: 000(0x00)(unused)
         size: 3231mb #s(6618716) s(9880038-16498753)
         chs:  (615/1/1)-(1023/254/63)d (615/1/1)-(1026/254/62)r
         hex:  00 01 81 67 00 FE FF FF E6 C1 96 00 5C FE 64 00

   End scan.</PRE>

<P> Quello riportato qui sopra &egrave; la parte del file di <EM>log</EM> che mi interessava al fine del recupero delle mie due partizioni <A NAME="index1081"></A>OS/2. Inoltre ho avuto un riscontro sui dati che avevo visualizzato. Leggete il manuale di <SAMP>gpart</SAMP> ed esaminate attentamente il vostro <A NAME="index1082"></A>MBR con un <A NAME="index1083"></A>editor di disco per capire bene il significato di questi dati. <SAMP>gpart</SAMP> &egrave; anche dotato di un comando che permette di scrivere direttamente la tabella sul primo settore del disco, ma ho preferito fare da solo. Per GNU/Linux non fa alcuna differenza di che tipo siano le partizioni che andiamo a montare, primarie o estese, l'importante &egrave; che si trovino dove lui si aspetta di trovarle. Quindi con un <A NAME="index1084"></A>editor inserisco i miei tre gruppi di sedici codici esadecimali a partire dall'indirizzo 446 (1be) dal cilindro 0, testina 0, settore 1 (CHS 0,0,1). Al successivo avvio, il gestore di avvio riappare come per magia e posso avviare GNU/Linux direttamente. Con dmesg verifico quali sono le unit&agrave; che identificano le mie due partizioni <A NAME="index1085"></A>OS/2 (hda2 e hda3), una rapida modifica a <CODE>/etc/fstab</CODE> e un montaggio dei <A NAME="index1086"></A>file&nbsp;system mi conferma finalmente che le mie due partizioni esistono ancora e sono integre.&raquo; </P>

<H2>1.18 &nbsp; <A NAME="title234"></A><A NAME="anchor254"></A>
Caratteri speciali</H2>

<P><STRONG>1.18.1)&nbsp;&nbsp;<A NAME="title235"></A><A NAME="anchor255"></A>
 Come si fanno le parentesi graffe? <A NAME="index1087"></A> <A NAME="index1088"></A> <A NAME="index1089"></A> </STRONG></P>

<P>Le parentesi graffe si ottengono mediante la combinazione di due tasti. Per quanto riguarda la console testuale:</P>

<P>[<KBD>AltGr-8</KBD>] per la parentesi aperta (&nbsp;{&nbsp;) e [<KBD>AltGr-9</KBD>] per quella chiusa (&nbsp;}&nbsp;).</P>

<P>Nelle applicazioni per il <A NAME="index1090"></A>server X:</P>

<P>[<KBD>AltGr-7</KBD>] per la parentesi aperta (&nbsp;{&nbsp;) e [<KBD>AltGr-0</KBD>] per quella chiusa (&nbsp;}&nbsp;).</P>

<P>Un altro modo per generare le parentesi graffe &egrave; modificare i tasti con le bandiere di MS-Windows che in GNU/Linux risultano inutilizzati. Per generare con tali tasti, le parentesi graffe in ambiente grafico (X) si dovr&agrave; modificare <SAMP>xmodmap</SAMP> nel seguente modo:</P>
<BLOCKQUOTE>

<PRE>keycode 0x73 = braceleft
keycode 0x74 = braceright</PRE>

</BLOCKQUOTE>

<P>Per la console baster&agrave; modificare il file <CODE>it.kmap.gz</CODE> cos&igrave;:</P>
<BLOCKQUOTE>

<PRE>keycode 125 = braceleft
keycode 126 = braceright</PRE>

</BLOCKQUOTE>

<P><STRONG>1.18.2)&nbsp;&nbsp;<A NAME="title236"></A><A NAME="anchor256"></A>
 Come si fa la tilde? <A NAME="index1091"></A> <A NAME="index1092"></A> </STRONG></P>

<P>Per generarla all'interno di una console testuale si deve utilizzare la combinazione di tasti [<KBD>AltGr+0</KBD>].</P>

<P>Nelle applicazioni per il <A NAME="index1093"></A>server X si deve utilizzare la combinazione [<KBD>AltGr+&igrave;</KBD>].</P>

<H2>1.19 &nbsp; <A NAME="title237"></A><A NAME="anchor257"></A>
 Documentazione di aiuto <A NAME="index1094"></A> <A NAME="index1095"></A> <A NAME="index1096"></A> </H2>

<P><STRONG>1.19.1)&nbsp;&nbsp;<A NAME="title238"></A><A NAME="anchor258"></A>
 Come si possono ricercare parole chiave nelle <A NAME="index1097"></A>pagine di manuale (<EM>man</EM>)? <A NAME="index1098"></A> <A NAME="index1099"></A> </STRONG></P>

<P>Per cercare tutte le <A NAME="index1100"></A>pagine di manuale che contengono una stringa, si deve utilizzare il seguente comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>man -k <VAR>stringa</VAR></CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote70" NAME="footnote-ref70">(70)</A></SUP></P>

<P>Ad esempio, se si vogliono ricercare le <A NAME="index1101"></A>pagine di manuale relative all'avvio del sistema (<EM>boot</EM>) si dar&agrave; il comando:</P>

<P class="command"><CODE>#&nbsp;</CODE><STRONG><CODE>man -k boot</CODE></STRONG>[<KBD>Invio</KBD>]</P>

<PRE>ExtUtils::Mkbootstrap (3pm) - make a bootstrap file for use by DynaLoader
activate (8)         - read/write flags marking active boot partition
bootparam (7)        - Introduction to boot time parameters of the Linux kernel
initrd (4)           - boot loader initialized RAM disk 
install-mbr (8)      - install a Master Boot Record manager
lilo (8)             - install boot loader
mkboot (8)           - makes a bootdisk
modules (5)          - kernel modules to load at boot time
pump (8)             - configure network interface via BOOTP or DHCP protocol
rc.boot (5)          - directory for local or per-package boot scripts.
rcS (5)              - defaults used at boot time
reboot (2)           - reboot or enable/disable Ctrl-Alt-Del
reboot (8)           - stop the system. </PRE>

<P>Il comando <SAMP>apropos</SAMP> restituisce un risultato identico.</P>

<P><STRONG>1.19.2)&nbsp;&nbsp;<A NAME="title239"></A><A NAME="anchor259"></A>
 Come si convertono le <A NAME="index1102"></A>pagine di manuale in <A NAME="index1103"></A>PostScript? <A NAME="index1104"></A> <A NAME="index1105"></A> <A NAME="index1106"></A> </STRONG></P>

<P>Il comando <SAMP>man</SAMP>, utilizzato con l'opzione <SAMP>-t</SAMP> permette di generare una pagina <A NAME="index1107"></A>PostScript della <A NAME="index1108"></A>pagine di manuale indicata:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>man -t <VAR>pagina di manuale</VAR> &gt; <VAR>file</VAR>.ps </CODE></STRONG>[<KBD>Invio</KBD>]</P>

<P>Esempio:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>man -t which &gt; which.ps </CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote71" NAME="footnote-ref71">(71)</A></SUP></P>

<P><STRONG>1.19.3)&nbsp;&nbsp;<A NAME="title240"></A><A NAME="anchor260"></A>
 Come si stampano le <A NAME="index1111"></A>pagine di manuale? </STRONG></P>

<P>Se si volesse stampare la <A NAME="index1112"></A>pagina di manuale di <SAMP>which</SAMP>, si dovr&agrave; utilizzare il comando <SAMP>man</SAMP> seguito dall'opzione <SAMP>-t</SAMP>. Questo comando permette di generare un file <A NAME="index1113"></A>PostScript che pu&ograve; quindi essere inviato alla stampante con il comando <SAMP>lpr</SAMP>:</P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>man -t which &gt; <VAR>file</VAR>.ps </CODE></STRONG>[<KBD>Invio</KBD>]<SUP><A HREF="amministrazione_del_sistema.html#footnote72" NAME="footnote-ref72">(72)</A></SUP></P>

<P class="command"><CODE>$&nbsp;</CODE><STRONG><CODE>lpr <VAR>file</VAR>.ps</CODE></STRONG>[<KBD>Invio</KBD>]</P>
LDR --- <EM>Copyright &copy; 1999-2001 Gaetano Paolone -- &nbsp;bigpaul&nbsp;@&nbsp;linuxfaq.it</EM><HR>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref1" NAME="footnote1">1)</A> <CODE>floppy.img</CODE> rappresenta il nome dell'immagine che verr&agrave; creata.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref2" NAME="footnote2">2)</A> <CODE>bzImage</CODE> rappresenta il nome dell'immagine del <A NAME="index33"></A>kernel che verr&agrave; copiata sul dischetto. Si &egrave; scelto <CODE>bzImage</CODE> come esempio perch&eacute; &egrave; il nome dell'immagine che risulta alla fine della procedura di ricompilazione del <A NAME="index34"></A>kernel e che si viene generalmente a trovare in <CODE>/usr/src/linux/arch/i386/boot</CODE> nei computer con architettura i386.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref3" NAME="footnote3">3)</A> Per <VAR>partizione</VAR> si intende la partizione in cui abbiamo intenzione di installare il <A NAME="index36"></A>file&nbsp;system principale (es. <CODE>hda1</CODE>, <CODE>hdb5</CODE>, ecc.)</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref4" NAME="footnote4">4)</A> questione risolta con le recenti versioni di <A NAME="index49"></A>LILO</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref5" NAME="footnote5">5)</A> in questo caso <VAR>linux</VAR> &egrave; il nome dell'etichetta da inserire per invocare l'immagine del <A NAME="index83"></A>kernel e che &egrave; presente nel file <CODE>/etc/lilo.conf</CODE></P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref6" NAME="footnote6">6)</A>  <VAR>-c</VAR>: <EM>cancel shutdown</EM></P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref7" NAME="footnote7">7)</A>  <SAMP>visudo</SAMP> &egrave; il <SAMP>vi</SAMP> per <SAMP>sudo</SAMP></P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref8" NAME="footnote8">8)</A>  install-mbr si installa al posto del MBR del primo disco fisso della catena IDE-EIDE. Indicando <CODE>/dev/sda</CODE>, si installer&agrave; nel primo disco SCSI.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref9" NAME="footnote9">9)</A> <VAR>x</VAR> &egrave; la lettera della partizione Linux</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref10" NAME="footnote10">10)</A> La documentazione allegata ai <A NAME="index126"></A>file di differenze (<EM>patch</EM>) indica la versione minima del <A NAME="index127"></A>kernel che occorre utilizzare per poterli applicare</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref11" NAME="footnote11">11)</A> <VAR>x</VAR> va sostituito con il dispositivo che identifica la partizione contenente la radice del <A NAME="index154"></A>file&nbsp;system. Bisogna ricordare per&ograve; che si dovr&agrave; indicare il dispositivo corrente della partizione e non quello che sussisteva prima dell'errore.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref12" NAME="footnote12">12)</A> dove <VAR>dispositivo</VAR> &egrave; l'unit&agrave; da analizzare.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref13" NAME="footnote13">13)</A> <VAR>partizione</VAR> &egrave; il nome del dispositivo corrispondente alla partizione da controllare. L'opzione <VAR>-c</VAR> consente di verificare la presenza di settori danneggiati.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref14" NAME="footnote14">14)</A> <STRONG>GNU parted</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref15" NAME="footnote15">15)</A> <STRONG>ext2resize</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref16" NAME="footnote16">16)</A> Si deve creare uno spazio di dimensioni multiple di 4; in questo caso si sta creando un file di circa 1&nbsp;Mibyte.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref17" NAME="footnote17">17)</A> L'opzione <VAR>-c</VAR> sta ad indicare che verr&agrave; effettuato un controllo per i settori difettosi. Questa opzione non deve essere utilizzata nella creazione di uno spazio <SAMP>swap</SAMP> su un file.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref18" NAME="footnote18">18)</A> <CODE>/mnt/floppy</CODE> &egrave; in questo caso il <A NAME="index233"></A>punto di montaggio desiderato.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref19" NAME="footnote19">19)</A> dove <VAR>x</VAR> rappresenta la partizione contenente il <A NAME="index246"></A>file&nbsp;system NTFS e <VAR>y</VAR> il <A NAME="index247"></A>punto di montaggio (es. <CODE>/mnt/nt</CODE>).</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref20" NAME="footnote20">20)</A> <VAR>x</VAR> rappresenta la partizione contenente il <A NAME="index257"></A>file&nbsp;system NTFS di MS-Windows 2000 e <VAR>y</VAR> il <A NAME="index258"></A>punto di montaggio (es. <CODE>/mnt/win2k</CODE>).</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref21" NAME="footnote21">21)</A> Valgono le indicazioni del comando precedente.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref22" NAME="footnote22">22)</A> <STRONG>ext2&nbsp;tools</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref23" NAME="footnote23">23)</A> <STRONG>FSDEXT2</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref24" NAME="footnote24">24)</A> <STRONG>Explore2fs</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref25" NAME="footnote25">25)</A> <STRONG>LILO</STRONG> &nbsp; licenza speciale senza vincoli particolari</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref26" NAME="footnote26">26)</A> <SAMP>-v</SAMP> mostra alcuni messaggi sullo stato del processo.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref27" NAME="footnote27">27)</A>  <VAR>x</VAR> &egrave; la versione del <A NAME="index334"></A>kernel della seconda distribuzione. </P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref28" NAME="footnote28">28)</A> Come gi&agrave; accennato, le recenti versioni di <A NAME="index381"></A>LILO non hanno pi&ugrave; questa limitazione.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref29" NAME="footnote29">29)</A> <STRONG>GNU GRUB</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref30" NAME="footnote30">30)</A> <STRONG>GAG</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref31" NAME="footnote31">31)</A> <STRONG>Smart BootManager</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref32" NAME="footnote32">32)</A> <STRONG>Psiko</STRONG> &nbsp; GPL</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref33" NAME="footnote33">33)</A> Si deve ricordare che questo &egrave; un comando facoltativo, infatti se vogliamo ricompilare il <A NAME="index426"></A>kernel una seconda volta modificando pochissimi valori dall'ultima ricompilazione, il comando sopra indicato, canceller&agrave; tutte le ultime impostazioni. Se lo omettiamo quindi, ritroveremo tutte le opzioni selezionate in precedenza. </P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref34" NAME="footnote34">34)</A> dove <CODE>nome</CODE> &egrave; il nome del pacchetto appena creato.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref35" NAME="footnote35">35)</A> <VAR>-v</VAR> abilita la modalit&agrave; prolissa</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref36" NAME="footnote36">36)</A> <VAR>x</VAR>,<VAR>y</VAR> e <VAR>z</VAR> identificano la versione del <A NAME="index543"></A>kernel cui il file <CODE>System.map</CODE> fa riferimento</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref37" NAME="footnote37">37)</A> <VAR>x</VAR>, <VAR>y</VAR> e <VAR>z</VAR> identificano la versione del <A NAME="index553"></A>kernel; La versione dell'immagine del <A NAME="index554"></A>kernel caricata, si pu&ograve; rilevare mediante il comando <SAMP>uname -r</SAMP>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref38" NAME="footnote38">38)</A> <VAR>x</VAR>, <VAR>y</VAR> e <VAR>z</VAR> identificano la versione del <A NAME="index584"></A>kernel.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref39" NAME="footnote39">39)</A> dove <VAR>x</VAR> assume il valore del <A NAME="index678"></A>livello di esecuzione di cui si vogliono disattivare i servizi.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref40" NAME="footnote40">40)</A> se il <A NAME="index681"></A>livello di esecuzione &egrave; il numero 3</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref41" NAME="footnote41">41)</A> <VAR>IDutente</VAR> &egrave; il numero di identificazione dell'utente. Questo numero si pu&ograve; recuperare nel file <CODE>/etc/passwd</CODE> o mediante il comando <SAMP>id -u utente</SAMP>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref42" NAME="footnote42">42)</A> dove <VAR>uid</VAR> &egrave; il valore numerico dell'utente del quale vuoi cancellare i file; (da rilevare in <CODE>/etc/passwd</CODE> o mediante il comando <SAMP>id -u utente</SAMP>).</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref43" NAME="footnote43">43)</A> <VAR>utente</VAR> &egrave; l'utente di cui si vuole cambiare la <A NAME="index754"></A>password.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref44" NAME="footnote44">44)</A>  <CODE>/etc/passwd</CODE> o <CODE>/etc/shadow</CODE>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref45" NAME="footnote45">45)</A> questo permetter&agrave; di mantenere le configurazioni salvate nella directory <EM>home</EM></P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref46" NAME="footnote46">46)</A> prestiamo attenzione al <SAMP>.</SAMP>, se lo si omettete, il nuovo gruppo viene interpretato come un nuovo utente.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref47" NAME="footnote47">47)</A> <CODE>/etc/profile</CODE>, <CODE>.bash_profile</CODE>, ecc.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref48" NAME="footnote48">48)</A> dove <VAR>origine</VAR> &egrave; la directory del <A NAME="index835"></A>file&nbsp;system da spostare nella directory <VAR>destinazione</VAR>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref49" NAME="footnote49">49)</A> <VAR>n</VAR> &egrave; il numero della riga da visualizzare.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref50" NAME="footnote50">50)</A> <SAMP>more</SAMP> pu&ograve; essere sostituito da <SAMP>less</SAMP>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref51" NAME="footnote51">51)</A> <SAMP>more</SAMP> pu&ograve; essere sostituito da <SAMP>less</SAMP>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref52" NAME="footnote52">52)</A> fare riferimento alla LDR <A HREF="ldr4.html#anchor125">1.9.3</A> per i file della <A NAME="index865"></A>shell in questione. </P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref53" NAME="footnote53">53)</A> dove <CODE>origine.txt</CODE> &egrave; il file che deve essere ordinato e <CODE>destinazione.txt</CODE> &egrave; il nuovo file ordinato</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref54" NAME="footnote54">54)</A> dove <CODE>nomefile</CODE> &egrave; il nome del file da ricercare; <CODE>/</CODE> indica la directory radice del <A NAME="index906"></A>file&nbsp;system.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref55" NAME="footnote55">55)</A> dove <CODE>nomefile</CODE> &egrave; il nome del file da ricercare</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref56" NAME="footnote56">56)</A> dove <CODE>nomefile</CODE> &egrave; il nome del file da ricercare</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref57" NAME="footnote57">57)</A> <CODE>*</CODE> sta ad indicare tutti i file della directory corrente.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref58" NAME="footnote58">58)</A> dove <VAR>percorso</VAR> &egrave; il nome della directory in cui cercare.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref59" NAME="footnote59">59)</A> dove <VAR>stringa</VAR> &egrave; la stringa da ricercare e <VAR>directory</VAR>, la directory in cui cercare.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref60" NAME="footnote60">60)</A> dove <VAR>stringa</VAR> &egrave; la stringa da ricercare e <VAR>directory</VAR>, la directory in cui iniziare la ricerca.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref61" NAME="footnote61">61)</A> dove <VAR>nome</VAR> &egrave; il nome del file da ripristinare e <SAMP>[...]</SAMP> indica la successione dei file suddivisi.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref62" NAME="footnote62">62)</A> in questo caso il comando <SAMP>which</SAMP> restituisce il percorso del comando <SAMP>cat</SAMP>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref63" NAME="footnote63">63)</A> dove <VAR>stringa</VAR> &egrave; la stringa che intendiamo ricercare nel file.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref64" NAME="footnote64">64)</A> verranno eliminati tutti i file presenti in <CODE>/var/log/</CODE> modificati l'ultima volta <VAR>giorni</VAR> giorni addietro.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref65" NAME="footnote65">65)</A> Si prender&agrave; come esempio il file <CODE>/var/log/messages</CODE></P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref66" NAME="footnote66">66)</A> dove <VAR>oggetto</VAR>, <VAR>descrizione</VAR>, <VAR>archivio</VAR> e <VAR>destinatario</VAR> sono rispettivamente il oggetto del messaggio di posta elettronica, la descrizione dell'allegato, l'allegato, e l'indirizzo di posta elettronica del destinatario.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref67" NAME="footnote67">67)</A> <VAR>utente</VAR> &egrave; l'utente di cui si vogliono modificare le pianificazioni.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref68" NAME="footnote68">68)</A> dove <VAR>PID</VAR> &egrave; il numero associato al processo che si vuole terminare.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref69" NAME="footnote69">69)</A> <VAR>PID</VAR> &egrave; il numero associato al processo dell'applicazione bloccata. Esso pu&ograve; essere ottenuto mediante il comando <SAMP>ps</SAMP>.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref70" NAME="footnote70">70)</A> dove <VAR>stringa</VAR> &egrave; la stringa da ricercare.</P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref71" NAME="footnote71">71)</A> Questo comando generer&agrave; un file <A NAME="index1109"></A>PostScript della <A NAME="index1110"></A>pagine di manuale di <SAMP>which</SAMP>. </P>

<P><A HREF="amministrazione_del_sistema.html#footnote-ref72" NAME="footnote72">72)</A> <VAR>file</VAR> &egrave; il nome del file <A NAME="index1114"></A>PostScript che deve essere generato.</P>
</DIV>
<HR>
<P>Dovrebbe essere possibile fare riferimento a questa pagina anche con il nome  <A HREF="amministrazione_del_sistema.html">amministrazione_del_sistema.html</A></P>
<P>
<A HREF="ldr5.html">[successivo]</A>
<A HREF="ldr3.html">[precedente]</A>
<A HREF="ldr.html">[inizio]</A>
<A HREF="ldr23.html">[fine]</A>
<A HREF="ldr1.html">[indice generale]</A>
<A HREF="ldr21.html">[hall of fame]</A>
<A HREF="ldr23.html">[indice analitico]</A>
</P>
</BODY>
</HTML>
